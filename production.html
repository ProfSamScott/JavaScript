<!DOCTYPE html>
<html>
    <head>
        <title>JavaScript for Sheridan Students</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width">
        <script type="text/javascript" src="js/jquery-1.10.1.min.js"></script>
        <script type="text/javascript" src="js/links.js"></script>
        <script type="text/javascript" src="js/nav.js"></script>
        <link rel="stylesheet" type="text/css" href="css/formatting.css">
        <link rel="shortcut icon" type="image/png" href="https://www.sheridancollege.ca/SheridanCollege/img/favicon.ico">

    </head>
    <body>
        <div id="titlePage">
            <a name="top"></a>

            <!-- TITLE PAGE -->
            <div class="spacer"></div>
            <div id="title">
                <img id="logo" alt="sheridan logo" src="images/title.png" style="border-radius:10px">
            </div>
            <div id="info">
                <span id="author">Â© 2015 <a href="http://www-acad.sheridanc.on.ca/staff/scottsam">Sam Scott</a>, Sheridan College, Brampton ON.</span><br>
                <p><span id="date">Winter 2015 Version</span><br>         
                    <a href="winter2014">Winter 2014 Version</a></p>         
            </div>
            <div class="screenonly" style="text-align:center;margin:0px">
                <div id="buttonBox">
                    <a class="howtobutton" href="JFSS_examples.zip" title="Download the Example Pack">
                        <img src="images/icon-download.png" alt="download" class="howtobutton">
                    </a>
                    <a class="howtobutton" href="" title="Print this Textbook" onclick="
                            if (navigator.appVersion.indexOf('Chrome') === -1) {
                                if (confirm('This book will look best if printed with Google Chrome.\n\nAre you sure you want to print from this browser?'))
                                    window.print();
                            } else
                                window.print();
                            return false;">
                        <img class="howtobutton" alt="print" src="images/icon-print.png">
                    </a>
                    <a class="howtobutton" title="Open in a Narrow Browser" href="" onclick="window.open('index.html', '', 'height=' + screen.height * 0.89 + ',width=600');
                               return false;">
                        <img class="howtobutton" alt="narrow browser" src="images/icon-openwindow.png">
                    </a>
                    <a class="howtobutton" title="Get Chrome" href="http://google.com/chrome" target="http://google.com/chrome">
                        <img class="howtobutton" alt="chrome" src="images/icon-chrome.png">
                    </a>
                    <a class="howtobutton" title="Go To Sheridan" href="http://www.sheridancollege.ca" target="http://www.sheridancollege.ca">
                        <img class="howtobutton" alt="sheridan" src="images/icon-sheridan.png">
                    </a>
                    <a class="howtobutton" title="Start Reading" href="" onclick="$(window).scrollTop($('#toc').offset().top);
                               return false;">
                        <img class="howtobutton" alt="read" src="images/icon-rightarrow.png">
                    </a>
                </div>

            </div>
        </div>
        <div id="container">
            <!-- TOC -->


            <!-- CHAPTER 0 -->
            <div id="printtoc" class="pageBreak"><h1 class="nobookmark">Contents</h1><div id="ptoc0-0-0" class="toc ptoc"><a href="" class="toc1">0. About This Book</a></div><div id="ptoc1-0-0" class="toc ptoc"><a href="" class="toc1">1. Getting Started with JavaScript</a></div><div id="ptoc2-0-0" class="toc ptoc"><a href="" class="toc1">2. The <code>document</code> Object and the DOM</a></div><div id="ptoc3-0-0" class="toc ptoc"><a href="" class="toc1">3. Functions and Events</a></div><div id="ptoc4-0-0" class="toc ptoc"><a href="" class="toc1">4. Graphics on the HTML5 Canvas</a></div><div id="ptoc5-0-0" class="toc ptoc"><a href="" class="toc1">5. Functions as Values</a></div><div id="ptoc6-0-0" class="toc ptoc"><a href="" class="toc1">6. Custom Objects</a></div><div id="ptoc7-0-0" class="toc ptoc"><a href="" class="toc1">7. Programming Challenges</a></div><div id="ptoc8-0-0" class="toc ptoc"><a href="" class="toc1">8. Server-Independent Web Apps</a></div><div id="ptoc9-0-0" class="toc ptoc"><a href="" class="toc1">9. Advanced DOM Manipulation</a></div><div id="ptoc10-0-0" class="toc ptoc"><a href="" class="toc1">10. AJAX</a></div><div id="ptoc11-0-0" class="toc ptoc"><a href="" class="toc1">11. The jQuery Library</a></div><div id="ptoc12-0-0" class="toc ptoc"><a href="" class="toc1">12. AJAX with jQuery</a></div></div><div id="toc"><a name="Contents"></a><h1>Contents</h1><div id="toc0-0-0" class="toc"><a href="" id="ftoc0-" class="tocfolder screenonly"><img src="images/collapsed.png" class="ftoc"></a><a href="" class="toc1" title="Jump To Section 0.">0. About This Book</a></div><div id="toc0-1-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 0.1">0.1 Who Should Read This Book?</a></div><div id="toc0-2-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 0.2">0.2 What Is JavaScript?</a></div><div id="toc0-2-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 0.2.1">0.2.1 Popular Misconceptions About JavaScript</a></div><div id="toc0-2-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 0.2.2">0.2.2 The Future of JavaScript</a></div><div id="toc0-3-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 0.3">0.3 How To Use This Book</a></div><div id="toc0-3-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 0.3.1">0.3.1 W3Schools and Wikipedia</a></div><div id="toc0-3-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 0.3.2">0.3.2 Critical Thinking</a></div><div id="toc1-0-0" class="toc"><a href="" id="ftoc1-" class="tocfolder screenonly"><img src="images/collapsed.png" class="ftoc"></a><a href="" class="toc1" title="Jump To Section 1.">1. Getting Started with JavaScript</a></div><div id="toc1-1-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 1.1">1.1 Imperative Programming</a></div><div id="toc1-1-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 1.1.1">1.1.1 Imperative Programming in a Browser Console</a></div><div id="toc1-1-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 1.1.2">1.1.2 Imperative Programming in an HTML <code>&lt;script&gt;</code> Element</a></div><div id="toc1-1-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 1.1.3">1.1.3 A Note on IDEs</a></div><div id="toc1-1-4" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 1.1.4">1.1.4 Debugging Output</a></div><div id="toc1-2-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 1.2">1.2 Dynamic (and Weak) Typing</a></div><div id="toc1-2-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 1.2.1">1.2.1 Weak Typing and Boolean Expressions</a></div><div id="toc1-2-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 1.2.2">1.2.2 Explicit Casting</a></div><div id="toc1-2-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 1.2.3">1.2.3 Dynamic Typing and Arrays</a></div><div id="toc2-0-0" class="toc"><a href="" id="ftoc2-" class="tocfolder screenonly"><img src="images/collapsed.png" class="ftoc"></a><a href="" class="toc1" title="Jump To Section 2.">2. The <code>document</code> Object and the DOM</a></div><div id="toc2-1-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 2.1">2.1 The Document Object Model</a></div><div id="toc2-2-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 2.2">2.2 What is a JavaScript Object? (An Important Aside)</a></div><div id="toc2-3-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 2.3">2.3 Retrieving and Manipulating a DOM Node</a></div><div id="toc2-3-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 2.3.1">2.3.1 Changing an Element's <code>innerHTML</code></a></div><div id="toc2-3-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 2.3.2">2.3.2 Changing an Element's <code>style</code></a></div><div id="toc2-3-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 2.3.3">2.3.3 Changing an Element's <code>class</code> Name</a></div><div id="toc2-3-4" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 2.3.4">2.3.4 Changing Other Attributes</a></div><div id="toc2-4-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 2.4">2.4 Retrieving and Manipulating a List of Nodes</a></div><div id="toc3-0-0" class="toc"><a href="" id="ftoc3-" class="tocfolder screenonly"><img src="images/collapsed.png" class="ftoc"></a><a href="" class="toc1" title="Jump To Section 3.">3. Functions and Events</a></div><div id="toc3-1-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 3.1">3.1 The Basics</a></div><div id="toc3-1-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 3.1.1">3.1.1 Declaring a Function</a></div><div id="toc3-1-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 3.1.2">3.1.2 Responding to an Event</a></div><div id="toc3-1-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 3.1.3">3.1.3 Clicking on Buttons</a></div><div id="toc3-1-4" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 3.1.4">3.1.4 Clicking on Text</a></div><div id="toc3-2-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 3.2">3.2 Parameters, Global Variables and Return Values</a></div><div id="toc3-2-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 3.2.1">3.2.1 Variable Scope</a></div><div id="toc3-2-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 3.2.2">3.2.2 Watch Out!!!</a></div><div id="toc3-3-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 3.3">3.3 Application: Drop-down Menus</a></div><div id="toc3-4-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 3.4">3.4 Forms and Functions</a></div><div id="toc3-4-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 3.4.1">3.4.1 Responding to Form Events</a></div><div id="toc3-4-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 3.4.2">3.4.2 Retrieving Form Elements</a></div><div id="toc3-4-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 3.4.3">3.4.3 Accessing Form Contents</a></div><div id="toc3-4-4" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 3.4.4">3.4.4 Form-based Client-side Web Apps</a></div><div id="toc4-0-0" class="toc"><a href="" id="ftoc4-" class="tocfolder screenonly"><img src="images/collapsed.png" class="ftoc"></a><a href="" class="toc1" title="Jump To Section 4.">4. Graphics on the HTML5 Canvas</a></div><div id="toc4-1-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 4.1">4.1 Canvas Basics</a></div><div id="toc4-2-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 4.2">4.2 Drawing Commands</a></div><div id="toc4-2-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 4.2.1">4.2.1 Rectangles and Text</a></div><div id="toc4-2-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 4.2.2">4.2.2 Where and When to Draw</a></div><div id="toc4-2-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 4.2.3">4.2.3 Polygons</a></div><div id="toc4-2-4" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 4.2.4">4.2.4 Circles and Curves</a></div><div id="toc4-3-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 4.3">4.3 Canvas Input Events</a></div><div id="toc4-3-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 4.3.1">4.3.1 Mouse Input</a></div><div id="toc4-3-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 4.3.2">4.3.2 Keyboard Input</a></div><div id="toc5-0-0" class="toc"><a href="" id="ftoc5-" class="tocfolder screenonly"><img src="images/collapsed.png" class="ftoc"></a><a href="" class="toc1" title="Jump To Section 5.">5. Functions as Values</a></div><div id="toc5-1-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 5.1">5.1 The Truth About Functions</a></div><div id="toc5-2-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 5.2">5.2 Better Ways to Add Event Handlers</a></div><div id="toc5-2-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 5.2.1">5.2.1 The <code>event</code> Object and the <code>this</code> Keyword</a></div><div id="toc5-2-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 5.2.2">5.2.2 The <code>window.onload</code> Event</a></div><div id="toc5-3-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 5.3">5.3 Functions, Timers and Animation</a></div><div id="toc5-3-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 5.3.1">5.3.1 JavaScript Timers</a></div><div id="toc5-3-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 5.3.2">5.3.2 Getting Things Moving</a></div><div id="toc5-4-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 5.4">5.4 Functions, Images and Sound</a></div><div id="toc5-4-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 5.4.1">5.4.1 The Basics</a></div><div id="toc5-4-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 5.4.2">5.4.2 Dealing with Lag</a></div><div id="toc5-5-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 5.5">5.5 Creating Your First Canvas Game</a></div><div id="toc6-0-0" class="toc"><a href="" id="ftoc6-" class="tocfolder screenonly"><img src="images/collapsed.png" class="ftoc"></a><a href="" class="toc1" title="Jump To Section 6.">6. Custom Objects</a></div><div id="toc6-1-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 6.1">6.1 Some Important Facts</a></div><div id="toc6-1-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 6.1.1">6.1.1 Object Notation</a></div><div id="toc6-1-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 6.1.2">6.1.2 Flexible Objects</a></div><div id="toc6-1-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 6.1.3">6.1.3 Silent Errors</a></div><div id="toc6-2-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 6.2">6.2 Creating Objects from Scratch</a></div><div id="toc6-3-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 6.3">6.3 Creating Objects With Literals</a></div><div id="toc6-4-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 6.4">6.4 Creating Objects With Constructors</a></div><div id="toc6-4-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 6.4.1">6.4.1 Classes in JavaScript</a></div><div id="toc6-4-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 6.4.2">6.4.2 Constructors in JavaScript</a></div><div id="toc6-4-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 6.4.3">6.4.3 Instance Variables (Fields)</a></div><div id="toc6-4-4" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 6.4.4">6.4.4 Instance Methods</a></div><div id="toc6-4-5" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 6.4.5">6.4.5 Creating and Using Objects</a></div><div id="toc6-4-6" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 6.4.6">6.4.6 Information Hiding</a></div><div id="toc6-4-7" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 6.4.7">6.4.7 Inheritance</a></div><div id="toc7-0-0" class="toc"><a href="" id="ftoc7-" class="tocfolder screenonly"><img src="images/collapsed.png" class="ftoc"></a><a href="" class="toc1" title="Jump To Section 7.">7. Programming Challenges</a></div><div id="toc7-1-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 7.1">7.1 Dice Histogram</a></div><div id="toc7-2-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 7.2">7.2 Tic Tac Toe</a></div><div id="toc7-3-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 7.3">7.3 Image Magnifier</a></div><div id="toc7-4-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 7.4">7.4 Pong</a></div><div id="toc8-0-0" class="toc"><a href="" id="ftoc8-" class="tocfolder screenonly"><img src="images/collapsed.png" class="ftoc"></a><a href="" class="toc1" title="Jump To Section 8.">8. Server-Independent Web Apps</a></div><div id="toc8-1-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 8.1">8.1 Web Storage</a></div><div id="toc8-1-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 8.1.1">8.1.1 Initializing Web Storage</a></div><div id="toc8-1-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 8.1.2">8.1.2 Advice on Sharing Web Storage</a></div><div id="toc8-2-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 8.2">8.2 The App Cache</a></div><div id="toc8-2-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 8.2.1">8.2.1 The <code>manifest</code> Attribute</a></div><div id="toc8-2-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 8.2.2">8.2.2 The Manifest File</a></div><div id="toc9-0-0" class="toc"><a href="" id="ftoc9-" class="tocfolder screenonly"><img src="images/collapsed.png" class="ftoc"></a><a href="" class="toc1" title="Jump To Section 9.">9. Advanced DOM Manipulation</a></div><div id="toc9-1-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 9.1">9.1 The Full DOM</a></div><div id="toc9-2-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 9.2">9.2 Traversing the DOM</a></div><div id="toc9-3-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 9.3">9.3 Getting a DOM Node from an Event</a></div><div id="toc9-4-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 9.4">9.4 Using innerHTML to Modify the DOM</a></div><div id="toc9-4-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 9.4.1">9.4.1 Delete All Child Nodes</a></div><div id="toc9-4-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 9.4.2">9.4.2 Replace All Child Nodes With a Text Node</a></div><div id="toc9-4-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 9.4.3">9.4.3 Replace All Child Nodes With New Nodes</a></div><div id="toc9-4-4" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 9.4.4">9.4.4 Append New Child Nodes</a></div><div id="toc9-5-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 9.5">9.5 Creating New Nodes From Scratch</a></div><div id="toc9-6-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 9.6">9.6 Removing a Single Child Node</a></div><div id="toc10-0-0" class="toc"><a href="" id="ftoc10-" class="tocfolder screenonly"><img src="images/collapsed.png" class="ftoc"></a><a href="" class="toc1" title="Jump To Section 10.">10. AJAX</a></div><div id="toc10-1-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 10.1">10.1 The Basic Idea</a></div><div id="toc10-2-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 10.2">10.2 A New Web App Architecture</a></div><div id="toc10-3-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 10.3">10.3 How AJAX Works</a></div><div id="toc10-3-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 10.3.1">10.3.1 A Data Source</a></div><div id="toc10-3-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 10.3.2">10.3.2 AJAX GET Requests</a></div><div id="toc10-3-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 10.3.3">10.3.3 AJAX POST Requests</a></div><div id="toc10-3-4" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 10.3.4">10.3.4 AJAX On a Web Page</a></div><div id="toc10-3-5" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 10.3.5">10.3.5 What To Do While You Wait</a></div><div id="toc11-0-0" class="toc"><a href="" id="ftoc11-" class="tocfolder screenonly"><img src="images/collapsed.png" class="ftoc"></a><a href="" class="toc1" title="Jump To Section 11.">11. The jQuery Library</a></div><div id="toc11-1-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 11.1">11.1 Selectors and Effects</a></div><div id="toc11-1-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 11.1.1">11.1.1 The jQuery Sandbox</a></div><div id="toc11-1-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 11.1.2">11.1.2 The <code>jQuery</code> (<code>$</code>) Function</a></div><div id="toc11-1-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 11.1.3">11.1.3 Chaining Methods: <code>innerHTML</code>, styles and attributes</a></div><div id="toc11-1-4" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 11.1.4">11.1.4 Effects and Animations</a></div><div id="toc11-2-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 11.2">11.2 jQuery Events and the Truth about Functions</a></div><div id="toc11-2-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 11.2.1">11.2.1 The Truth About Functions</a></div><div id="toc11-2-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 11.2.2">11.2.2 Adding Event Handlers in Plain JavaScript</a></div><div id="toc11-2-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 11.2.3">11.2.3 Event Handlers in jQuery</a></div><div id="toc11-2-4" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 11.2.4">11.2.4 A Note on Best Practices</a></div><div id="toc11-2-5" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 11.2.5">11.2.5 jQuery Callback Functions</a></div><div id="toc11-3-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 11.3">11.3 DOM Manipulation with jQuery</a></div><div id="toc12-0-0" class="toc"><a href="" id="ftoc12-" class="tocfolder screenonly"><img src="images/collapsed.png" class="ftoc"></a><a href="" class="toc1" title="Jump To Section 12.">12. AJAX with jQuery</a></div><div id="toc12-1-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 12.1">12.1 The Basic Idea</a></div><div id="toc12-2-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 12.2">12.2 A New Web App Architecture</a></div><div id="toc12-3-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 12.3">12.3 How jQuery Makes AJAX Easier</a></div><div id="toc12-3-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 12.3.1">12.3.1 A Data Source</a></div><div id="toc12-3-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 12.3.2">12.3.2 Your First AJAX Request</a></div><div id="toc12-3-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 12.3.3">12.3.3 AJAX From a Web Page</a></div><div id="toc12-4-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 12.4">12.4 What To Do While You Wait</a></div><div id="toc12-4-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 12.4.1">12.4.1 Some Options</a></div><div id="toc12-4-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 12.4.2">12.4.2 AJAX Error Handling</a></div><div id="toc12-5-0" class="toc" style="display: none;"><a href="" class="toc2" title="Jump To Section 12.5">12.5 Working With XML Data</a></div><div id="toc12-5-1" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 12.5.1">12.5.1 Basic XML Structure</a></div><div id="toc12-5-2" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 12.5.2">12.5.2 XML vs. HTML</a></div><div id="toc12-5-3" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 12.5.3">12.5.3 Navigating the XML DOM</a></div><div id="toc12-5-4" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 12.5.4">12.5.4 Loading XML With AJAX</a></div><div id="toc12-5-5" class="toc" style="display: none;"><a href="" class="toc3" title="Jump To Section 12.5.5">12.5.5 Learning More About XML</a></div></div><div class="sectionStart pageBreak"><a name="0."></a><h1 id="sec0-0-0">0. About This Book</h1><p><a href="">JavaScript for Sheridan Students</a> is intended to be a complete course in <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> programming for <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web application</a> design. In this book, you will learn the basics of the JavaScript language and how to embed JavaScript programs into a web page; you will learn how to create <a href="http://en.wikipedia.org/wiki/Client-side" title="http://en.wikipedia.org/wiki/Client-side" target="en.wikipedia.org">client-side</a> web apps; you will learn how to effectively use the extensions provided in the widely-used <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> package, including its <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> capabilities; you will learn how to use the new <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a> to create dynamic, graphical web content; you will learn how to access the new <a href="http://en.wikipedia.org/wiki/Web_storage" title="http://en.wikipedia.org/wiki/Web_storage" target="en.wikipedia.org">web storage</a> capabilities of HTML5; and you will learn how to implement <a href="http://en.wikipedia.org/wiki/Object-oriented_design" title="http://en.wikipedia.org/wiki/Object-oriented_design" target="en.wikipedia.org">object-oriented</a> design in JavaScript.</p></div>
            

            <div class="sectionStart"><a name="0.1"></a><h2 id="sec0-1-0">0.1 Who Should Read This Book?</h2><p><a href="">JavaScript for Sheridan Students</a> is aimed at Students in the Applied Computing programs at <a href="http://www.sheridancollege.ca" title="http://www.sheridancollege.ca" target="www.sheridancollege.ca">Sheridan College<span class="printonly"> [http://www.sheridancollege.ca]</span></a>, though it could also be used effectively by students in other contexts or even by experienced programmers who are new to <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>.</p></div>
            
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break">If you are a Sheridan student or if you have just completed an introductory course in <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, <a href="">JavaScript for Sheridan Students</a> was written just for you!</p></div>
            <p>When Sheridan students first encounter JavaScript, they have already completed a first programming course in <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> and a first course in web design, in which they were asked to write HTML and CSS by hand (i.e. not using a <a href="http://en.wikipedia.org/wiki/WYSIWIG" title="http://en.wikipedia.org/wiki/WYSIWIG" target="en.wikipedia.org">WYSIWYG</a> editor like DreamWeaver). These students already have a good understanding of <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a>, <a href="http://en.wikipedia.org/wiki/Data_type" title="http://en.wikipedia.org/wiki/Data_type" target="en.wikipedia.org">data types</a>, <a href="http://en.wikipedia.org/wiki/If_statement" title="http://en.wikipedia.org/wiki/If_statement" target="en.wikipedia.org">if statements</a>, <a href="http://en.wikipedia.org/wiki/Control_flow#Loops" title="http://en.wikipedia.org/wiki/Control_flow#Loops" target="en.wikipedia.org">loops</a>, <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a>, <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">HTML elements</a> (tags and <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attributes</a>), and <a href="http://www.w3schools.com/css/css_syntax.asp" title="http://www.w3schools.com/css/css_syntax.asp" target="www.w3schools.com">CSS rules</a> (properties and <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a>). They have designed simple web pages and written computer programs that are split up into multiple methods (possibly also multiple <a href="https://en.wikipedia.org/wiki/Class_(computer_programming)" title="https://en.wikipedia.org/wiki/Class_(computer_programming)" target="en.wikipedia.org">classes</a>)  to process user input and produce new output. </p>
            <p>If you fit the profile above, this text will leverage your prior knowledge of programming to skim over stuff you already know and <a href="http://en.wikipedia.org/wiki/Focus_(computing)" title="http://en.wikipedia.org/wiki/Focus_(computing)" target="en.wikipedia.org">focus</a> on the differences and unique capabilities of JavaScript, <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a>, and <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a>. It will also leverage your existing web design skills to get you creating <a href="http://en.wikipedia.org/wiki/Client-side" title="http://en.wikipedia.org/wiki/Client-side" target="en.wikipedia.org">client-side</a> <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web applications</a> in JavaScript more quickly. </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Look for DIY (Do It Yourself) boxes like this throughout this text. They are here to give you something to do, to keep you engaged and thinking, and to break up the monotony of reading. But theyâre not optional! You should read them and try the activities before moving on. Think of it as an opportunity to experiment, try new things, and test out what you have already learned.</p></div>

            <div class="sectionStart"><a name="0.2"></a><h2 id="sec0-2-0">0.2 What Is JavaScript?</h2><p><a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> is a fully-functional programming language that was designed to be embedded in an HTML page to create <a href="http://en.wikipedia.org/wiki/Dhtml" title="http://en.wikipedia.org/wiki/Dhtml" target="en.wikipedia.org">Dynamic HTML</a> (DHTML). It was first shipped with the now-defunct <a href="http://en.wikipedia.org/wiki/Netscape" title="http://en.wikipedia.org/wiki/Netscape" target="en.wikipedia.org">Netscape</a> browser in 1995. DHTML pages make use of JavaScript <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statements</a> and <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> (similar to <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a>) to change their appearance and contents both as they are loading and after they are loaded. (<span>Static</span> HTML pages, on the other hand, always look the same and do not change once they are loaded. <span>Static</span> pages used to be the only thing on the web, but they are now all but extinct.)</p></div>
            
            <p>JavaScript was standardized as <a href="http://en.wikipedia.org/wiki/Ecmascript" title="http://en.wikipedia.org/wiki/Ecmascript" target="en.wikipedia.org">ECMAScript</a> a couple of years after its initial release. The name "JavaScript" is a trademark of the <a href="http://en.wikipedia.org/wiki/Oracle_Corporation" title="http://en.wikipedia.org/wiki/Oracle_Corporation" target="en.wikipedia.org">Oracle</a> corporation, but other implementations of the ECMAScript also exist (notably Microsoftâs <a href="http://en.wikipedia.org/wiki/Jscript" title="http://en.wikipedia.org/wiki/Jscript" target="en.wikipedia.org">JScript</a> used in Internet Explorer and Adobeâs <a href="http://en.wikipedia.org/wiki/Actionscript" title="http://en.wikipedia.org/wiki/Actionscript" target="en.wikipedia.org">ActionScript</a> used in Flash). </p>
            <div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break">Look for these boxes throughout the text to get a quick summary of the similarities and differences between <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> and <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>.</p></div>
            <p>Almost all <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web applications</a> make use of JavaScript for drop down menus, pop-up windows, slide shows, image magnifiers and other dynamic <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> that can be implemented on the client side of the <a href="http://en.wikipedia.org/wiki/Client%E2%80%93server_model" title="http://en.wikipedia.org/wiki/Client%E2%80%93server_model" target="en.wikipedia.org">client-server</a> architecture. Many web sites also make use of JavaScript with <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> to load new content from the server and refresh parts of the page after load time. This is how <a href="http://www.google.com" title="http://www.google.com" target="www.google.com">Google<span class="printonly"> [http://www.google.com]</span></a> makes suggestions as you type into the search bar, and how <a href="http://www.facebook.com" title="http://www.facebook.com" target="www.facebook.com">Facebook<span class="printonly"> [http://www.facebook.com]</span></a> loads new content when you get to the bottom of your activity feed.</p>
            <p>By at least one measure, JavaScript might be the most frequently used programming language: If you counted up all the lines of JavaScript in the browser caches of all the computers in the world, the total would probably be higher than the number of lines of source code in any other language.</p>

            <div class="sectionStart"><a name="0.2.1"></a><h3 id="sec0-2-1">0.2.1 Popular Misconceptions About JavaScript</h3><p>There are two widely-held misconceptions about JavaScript. The first is that Java and JavaScript are the same language, or two versions of the same language. In fact, JavaScript is a very different programming language from Java. The similarity in names is the result of a marketing decision made by Netscape in the 1990âs. Itâs true that the two languages can look similar at first glance. Like Java, JavaScript derives much of its basic <a href="https://en.wikipedia.org/wiki/Syntax_(logic)" title="https://en.wikipedia.org/wiki/Syntax_(logic)" target="en.wikipedia.org">syntax</a> from the <a href="http://en.wikipedia.org/wiki/C_programming_language" title="http://en.wikipedia.org/wiki/C_programming_language" target="en.wikipedia.org">C programming language</a>. But donât be fooled by surface appearances. JavaScriptâs <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a>, <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">arrays</a>, <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">objects</a>, and functions are implemented very differently from their counterparts in Java.</p></div>
            
            <p>The second misconception is that JavaScript is somehow a less powerful, simpler, or more "lightweight" language than Java. In this case, there are several kernels of truth. It is true that JavaScript is designed to run in a restricted environment (e.g. a web page, a PDF document, the Windows desktop, etc.). It is also true that historically, JavaScript has been used mostly for very simple tasks (e.g. image <a href="http://en.wikipedia.org/wiki/Rollover_(web_design)" title="http://en.wikipedia.org/wiki/Rollover_(web_design)" target="en.wikipedia.org">rollovers</a> and drop-down menus). And it is also true that JavaScript runs more slowly than Java (itâs <a href="http://en.wikipedia.org/wiki/Interpreter_(computing)" title="http://en.wikipedia.org/wiki/Interpreter_(computing)" target="en.wikipedia.org">interpreted</a> rather than <a href="http://en.wikipedia.org/wiki/Compiler" title="http://en.wikipedia.org/wiki/Compiler" target="en.wikipedia.org">compiled</a>), making it less suited to high performance applications. Finally, it is also true that JavaScript programmers do not have easy access to the same kind of standard plugin libraries that Java programmers enjoy. </p>
            <p>But JavaScript is not "lightweight" or "simpler" in the sense of being easier to learn. Writing effective code in JavaScript can be just as difficult as any other language, and a deep understanding of how the language works is as important to being an effective JavaScript programmer as it is for a programmer in any other language. </p>
            <p>JavaScript is also not "less powerful" in the theoretical sense than any other language. JavaScript is a fully developed, <a href="http://en.wikipedia.org/wiki/Turing_completeness" title="http://en.wikipedia.org/wiki/Turing_completeness" target="en.wikipedia.org">Turing complete</a>, programming language. This means that there is no computational problem that can be solved in Java that could not also be solved in JavaScript. </p>

            <div class="sectionStart"><a name="0.2.2"></a><h3 id="sec0-2-2">0.2.2 The Future of JavaScript</h3><p>With the widespread adoption of <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a>, JavaScript is poised to become the language of choice for web-based, hybrid, and possibly even standalone mobile apps, and it will soon replace Adobeâs Flash as the primary way to produce graphics-intensive web content like games, interactive diagrams and fancy menu systems. With the development of <a href="https://en.wikipedia.org/wiki/Node.js" title="https://en.wikipedia.org/wiki/Node.js" target="en.wikipedia.org">Node.js</a>, JavaScript can now also be used to write code on the <a href="https://en.wikipedia.org/wiki/Server_side" title="https://en.wikipedia.org/wiki/Server_side" target="en.wikipedia.org">server side</a> of a <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web app</a>.</p></div>
            
            <p>And JavaScript is not just for web apps any more. JavaScript <a href="http://en.wikipedia.org/wiki/Interpreter_(computing)" title="http://en.wikipedia.org/wiki/Interpreter_(computing)" target="en.wikipedia.org">interpreters</a> are also embedded into the Microsoft Windows Desktop, Adobe Acrobat, Open Office, and a number of other environments to allow programmers to add apps and other dynamic functionality to these products.</p>
            <p>It may not be long before a solid working knowledge of JavaScript is a requirement for many programming jobs.</p>

            <div class="sectionStart"><a name="0.3"></a><h2 id="sec0-3-0">0.3 How To Use This Book</h2><p><a href="">JavaScript for Sheridan Students</a> was designed using <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>, <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> and <a href="http://en.wikipedia.org/wiki/Css#CSS_3" title="http://en.wikipedia.org/wiki/Css#CSS_3" target="en.wikipedia.org">CSS3</a> <a href="http://en.wikipedia.org/wiki/Media_queries" title="http://en.wikipedia.org/wiki/Media_queries" target="en.wikipedia.org">Media Queries</a> to make it look good and be usable on a tablet, in a narrow desktop browser, and on the printed page. This is to make it easier for you to try things out on your computer as you read. The book also makes use of the <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> <a href="http://www.w3schools.com/html/html5_app_cache.asp" title="http://www.w3schools.com/html/html5_app_cache.asp" target="www.w3schools.com">App Cache</a>, which means after you load it for the first time the main text will always be available, even if your device has no Internet connection. Bookmark it once, download the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> once, and you will always have everything you need.</p></div>
            
            <p>Since it is a <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web app</a> written in HTML5, CSS3 and JavaScript, the book can also serve as a testbed to try out JavaScript <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statements</a> as you read along.</p>
            <p>You will see lots of links and highlighted terms in the book. In most cases these are links to <a href="https://www.wikipedia.org/" title="https://www.wikipedia.org/" target="www.wikipedia.org">Wikipedia</a> entries, <a href="http://www.w3schools.com" title="http://www.w3schools.com" target="www.w3schools.com">w3Schools</a> pages or online examples . When you print the book, the links appear in boldface. If the link points to anything other than Wikipedia, w3Schools or an online example, the URL will appear beside it.</p>

            <div class="sectionStart"><a name="0.3.1"></a><h3 id="sec0-3-1">0.3.1 W3Schools and Wikipedia</h3><p><a href="http://www.w3schools.com/">W3Schools</a> is a standard <span>reference</span> site for JavaScript, HTML, CSS, and other web technologies. It also has a "Try it Yourself Editor" that lets you tweak example code to see the results immediately. You should get to know this site as a good quick <a href="http://en.wikipedia.org/wiki/Reference_(computer_science)" title="http://en.wikipedia.org/wiki/Reference_(computer_science)" target="en.wikipedia.org">reference</a>.</p></div>
            
            <p><a href="http://www.wikipedia.org">Wikipedia</a> is a <a href="http://en.wikipedia.org/wiki/Crowdsourcing" title="http://en.wikipedia.org/wiki/Crowdsourcing" target="en.wikipedia.org">crowdsourced</a> encyclopedia. For computer-related topics, the entries are usually of acceptable quality, thanks to a very large number of working computer scientists and computer programmers who police the content and keep it up to date and accurate. You should use the Wikipedia links to brush up on the meanings of terms you may have forgotten and to dig deeper into topics that interest you.</p>			
            <p>But as good as these resources are, they have some limitations. The text in w3Schools is brief and does not always work well for students without much prior programming experience, and some of the topics in Wikipedia can be difficult for a novice to read. Beginner students need detailed explanations of big ideas, lots of signposts along the way, worked examples and exercises. So we will <span>focus</span> on that stuff here. You are encouraged to move back and forth between this text, w3schools, Wikipedia and other sources to help build your understanding.</p>

            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">If you have never used <a href="http://www.w3schools.com" title="http://www.w3schools.com" target="www.w3schools.com">w3schools</a> before, you should get to know it. Before moving on, pay w3schools a visit and follow one of the trails (e.g. click on the <span>HTML</span> link and start reading). Be sure to try out some of the "Try It Yourself" activities. </p></div>

            <div class="sectionStart"><a name="0.3.2"></a><h3 id="sec0-3-2">0.3.2 Critical Thinking</h3><p>All sources of information (including the one you're reading now) should be treated with caution. I think w3Schools is a great resource to get quick details on HTML, CSS and JavaScript, but it is not without its critics (see the <a href="http://www.w3fools.com/" title="http://www.w3fools.com/" target="www.w3fools.com">w3fools<span class="printonly"> [http://www.w3fools.com/]</span></a> site). It has gaps and sometimes it's not as up-to-date as it should be. I also think Wikipedia generally has high quality entries for computer-related topics, but it is crowdsourced so on any given day the information might be inaccurate or out of date as well. </p></div>
            
            <p>You should always be aware of the drawbacks of any on line source and develop strategies for cross-checking information from multiple sources. If you think you have found an error in this text, please <a href="mailto:sam.scott@sheridancollege.ca" title="mailto:sam.scott@sheridancollege.ca" target="undefined">let me know<span class="printonly"> [mailto:sam.scott@sheridancollege.ca]</span></a> so I can investigate.</p>

            <!-- CHAPTER 1 -->
            <div class="sectionStart pageBreak"><a name="1."></a><h1 id="sec1-0-0">1. Getting Started with JavaScript</h1><div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Syntax.</span> JavaScriptâs core <a href="https://en.wikipedia.org/wiki/Syntax_(logic)" title="https://en.wikipedia.org/wiki/Syntax_(logic)" target="en.wikipedia.org">syntax</a> is very similar to <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>. But donât be fooled by surface appearances. Some deep differences lurk beneath.</p></div></div>
            
            <p>Because <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> and <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> are both based on <a href="http://en.wikipedia.org/wiki/C_syntax" title="http://en.wikipedia.org/wiki/C_syntax" target="en.wikipedia.org">C syntax</a>, and because you have some experience in Java, you should have no problem with many of the nuts and bolts of the language. <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">Statements</a>, comments, operators, comparisons, selection statements (<code>if</code> and <code>switch</code>), repetition statements (<code>for</code>, <code>while</code>, <code>do..while</code>) and even catching and throwing exceptions all work pretty much exactly how you would expect them to. JavaScript <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">objects</a> and the special Math object also contain most of the same <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> as their Java counterparts (e.g. <code>charAt</code>, <code>Math.random</code>, etc.) </p>
            <p>This is great news. You already know most of the <a href="https://en.wikipedia.org/wiki/Syntax_(logic)" title="https://en.wikipedia.org/wiki/Syntax_(logic)" target="en.wikipedia.org">syntax</a> of JavaScript and you haven't even done anything yet! But before you can leverage all that existing knowledge and start writing JavaScript programs, you need to understand two core features of JavaScript that make it very different from Java: its support for <a href="http://en.wikipedia.org/wiki/Imperative_programming" title="http://en.wikipedia.org/wiki/Imperative_programming" target="en.wikipedia.org">imperative programming</a> and its <a href="http://en.wikipedia.org/wiki/Type_system" title="http://en.wikipedia.org/wiki/Type_system" target="en.wikipedia.org">dynamically-typed</a> and <a href="http://en.wikipedia.org/wiki/Strong_and_weak_typing" title="http://en.wikipedia.org/wiki/Strong_and_weak_typing" target="en.wikipedia.org">weakly-typed</a> approach to <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a>, <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a> and <a href="http://en.wikipedia.org/wiki/Data_type" title="http://en.wikipedia.org/wiki/Data_type" target="en.wikipedia.org">data types</a>.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">If you have some programming experience, but not with a C-like language, or if you need to brush up on your <a href="https://en.wikipedia.org/wiki/Syntax_(logic)" title="https://en.wikipedia.org/wiki/Syntax_(logic)" target="en.wikipedia.org">syntax</a>, <a href="http://www.w3schools.com" title="http://www.w3schools.com" target="www.w3schools.com">w3schools</a> is a great place to go for a refresher. Just click on the <a href="http://www.w3schools.com/js/default.asp" title="http://www.w3schools.com/js/default.asp" target="www.w3schools.com">Learn JavaScript</a> link and then choose the topics from the list on the left. Even if youâre feeling confident, you should probably take a quick look at the sections on <a href="http://www.w3schools.com/js/js_strings.asp" title="http://www.w3schools.com/js/js_strings.asp" target="www.w3schools.com">JS String</a> and <a href="http://www.w3schools.com/js/js_math.asp" title="http://www.w3schools.com/js/js_math.asp" target="www.w3schools.com">JS Math</a> because there are some slight differences from the <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">String</a> and Math <a href="https://en.wikipedia.org/wiki/Class_(computer_programming)" title="https://en.wikipedia.org/wiki/Class_(computer_programming)" target="en.wikipedia.org">classes</a>.</p></div>


            <div class="sectionStart"><a name="1.1"></a><h2 id="sec1-1-0">1.1 Imperative Programming</h2><div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Statements.</span> In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, every <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statement</a> must be part of a <a href="https://en.wikipedia.org/wiki/Class_(computer_programming)" title="https://en.wikipedia.org/wiki/Class_(computer_programming)" target="en.wikipedia.org">class</a> or <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a>. This is not true in <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>.</p></div></div>
            
            <p>Purely <a href="http://en.wikipedia.org/wiki/Imperative_programming" title="http://en.wikipedia.org/wiki/Imperative_programming" target="en.wikipedia.org">imperative</a> programs consist of a list of <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statements</a> in the order they are to be executed. These statements do not need to be part of a <a href="https://en.wikipedia.org/wiki/Class_(computer_programming)" title="https://en.wikipedia.org/wiki/Class_(computer_programming)" target="en.wikipedia.org">class</a>, <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>, <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a>, <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> or any other structure. </p>
            <p>In human languages, imperative sentences are commands: "Do this. Now do that." Imperative programs read just like that to the computer. There are no pleasantries, you just get straight to the instructions. This is quite different from <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, where you have to define both a <span>class</span> and a main method before you can get to the commands.</p>

            <div class="sectionStart"><a name="1.1.1"></a><h3 id="sec1-1-1">1.1.1 Imperative Programming in a Browser Console</h3><p>The easiest way to execute JavaScript statements is using the JavaScript console of your favorite browser (a.k.a. <a href="https://www.google.com/intl/en_ca/chrome/browser/" title="https://www.google.com/intl/en_ca/chrome/browser/" target="www.google.com">Google Chrome<span class="printonly"> [https://www.google.com/intl/en_ca/chrome/browser/]</span></a>). In Chrome, hit F12 to open the developer tools, then choose "Console" from the tabs that appear at the bottom of the page.  </p></div>
            
            <p>The console will appear as a new panel beneath the web page, like this.	</p>
            <img class="fullsize" alt="chrome console" src="images/console.png" style="width: 263px;">
            <p>(Whatâs that you say? Chrome isnât your favorite browser? Well you have two options. You can either make Chrome your new favorite, or you can search through the menus on any another browser for "Developer Tools", "<span>JavaScript Console</span>" or something similar.)</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">If you're reading this on line, open the JavaScript console now (F12 in Chrome). If you're not reading this on line, open any web page in Chrome or another browser, then go to the developer console.
                <br><br>Now youâre ready to execute your first JavaScript statement. At the flashing cursor beside the â&gt;â, type:
                <code class="first">window.alert("Hello, World!");</code>
                â¦and hit enter. See the popup message?
            </p></div>
            <p>What you have just done in the DIY box above is execute a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> function named <code>alert</code> that is part of the built-in <code>window</code> object. JavaScript functions are a lot like Java methods or C functions â you call them by typing their name followed by a list of <a href="https://en.wikipedia.org/wiki/Parameter_(computer_programming)" title="https://en.wikipedia.org/wiki/Parameter_(computer_programming)" target="en.wikipedia.org">arguments</a> inside round brackets. If a function belongs to an object, you type the name of the object first followed by the . (dot) operator. </p>
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Semicolons.</span> In <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>, you usually donât need a semicolon at the end of a <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statement</a>, but sometimes you do. Instead of trying to remember which case is which, itâs better to always include one.</p></div>
            <p>No matter what browser you are using, you will always have access to a <code>window</code> object containing <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> and functions pertaining to the currently active panel of the browser.  And because you are always "inside" the <code>window</code> object when executing JavaScript, you donât actually need to type the "<code>window.</code>" part. So this would have worked, too:
                <code class="first">alert("Hello, World!");</code>
            </p>
            <div class="JC" style="width: auto;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">String Literals.</span> In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, double quotes are for <code>String</code>s and single quotes are for <code>char</code>s. <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> doesnât have a <code>char</code> type, so you can use either type of quote character for a <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a>. This means you don't have to use <a href="http://en.wikipedia.org/wiki/Escape_characters" title="http://en.wikipedia.org/wiki/Escape_characters" target="en.wikipedia.org">escape characters</a> to put quotes inside a string (e.g. instead of <code>"\"Murder,\", she wrote"</code>, you can use single quotes like this: <code>'"Murder,", she wrote'</code>). </p></div>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Here are a couple more window functions to try in a Chrome console window. 
                <code class="first">prompt('What is your name? ');
                    <br>confirm("You're programming in JavaScript!");</code>
            </p></div>
            <p>Note the <a href="http://en.wikipedia.org/wiki/Return_statement" title="http://en.wikipedia.org/wiki/Return_statement" target="en.wikipedia.org">return values</a> of each function that appear in the console window when you try the statements in the above DIY box. Just like Java and other languages, you can use the <span>return value</span> of one function as an argument to another.</p>
            <p>Before we move on, a few more useful tips:</p>
            <ol>
                <li>If you ever want to repeat a command in the Chrome console, you can always hit the up arrow on your keyboard to cycle through recent commands, tweak them, and try again</li>
                <li>If you ever want to enter a multiple line command, use <code>shift-enter</code>.</li>
                <li>If you want to complete a command using one of Chrome's pop-up suggestions, navigate to it using up and down arrows, then complete the command using the right arrow</li>
                <li>If you want to clear the console screen, use <code>ctrl-L</code> (or you can use the <code>console.clear()</code> function)</li>
                <li>If you want to detach the console and use it in a separate window,  press the windows icon on the top right (beside the X icon). If you change your mind, press the same button again to reattach it.</li>
            </ol>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">In a Chrome console window, try these two separate statements that use the return values from the prompt and confirm functions, then make up some of your own.
                <code class="first">alert(prompt('What do you want to say? '));
                    <br>
                    <br>if (confirm('OK?')) alert("You're OK"); else alert("You're not OK?");
                </code>
            </p></div>
            <p>The <code>prompt</code>, <code>alert</code> and <code>confirm</code> functions are pretty straightforward and are discussed under the heading <a href="http://www.w3schools.com/js/js_popup.asp" title="http://www.w3schools.com/js/js_popup.asp" target="www.w3schools.com">JS PopupAlert</a> on <a href="http://www.w3schools.com" title="http://www.w3schools.com" target="www.w3schools.com">w3Schools</a>.</p>
            <p>The Chrome console is a great tool for testing out JavaScript statements and expressions to get the <a href="https://en.wikipedia.org/wiki/Syntax_(logic)" title="https://en.wikipedia.org/wiki/Syntax_(logic)" target="en.wikipedia.org">syntax</a> right before incorporating them into a web page. It can also help you remember method names by popping up suggestions as you type...</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Type "Math.r" in the Chrome console window and look at the suggestions that pop up</p></div>
            <p> â¦ and it can evaluate JavaScript expressions for you.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Try the following in a Chrome console window. (Make sure you get the upper and lower case right in these examples or they won't work.)
                <code class="first">5 + 3 * 2
                    <br>5 &lt;= 3
                    <br>Math.round(Math.PI*2)
                    <br>Math.round(Math.PI*2) &lt; Math.PI*Math.PI
                </code>
            </p></div>
            <div class="sectionStart"><a name="1.1.2"></a><h3 id="sec1-1-2">1.1.2 Imperative Programming in an HTML <code>&lt;script&gt;</code> Element</h3><p>Of course the real point of JavaScript is to embed a program into a web page. You can put JavaScript statements anywhere you want in an <a href="http://en.wikipedia.org/wiki/Html" title="http://en.wikipedia.org/wiki/Html" target="en.wikipedia.org">HTML</a> document, as long as they are inside a <code>&lt;script&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> with a <code>type</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> set to <code>"text/javascript"</code>, as in the example below.
                <code class="first">&lt;script type="text/javascript"&gt;
                    <code class="new">alert("Hello, world!");</code>
                    &lt;/script&gt;
                </code>
            </p></div>
            
            <p>You can put any number of <code>&lt;script&gt;</code> elements anywhere inside the <code>&lt;body&gt;</code> or <code>&lt;head&gt;</code> elements of an HTML document. The browser will read the page from top to bottom as it loads it. When it gets to a <code>&lt;script&gt;</code> element, it will execute the commands inside before moving on. So if the <code>&lt;script&gt;</code> element appears inside the <code>&lt;head&gt;</code>, the page will be blank until the script has finished executing. If it appears in the middle of the <code>&lt;body&gt;</code>, the first part of the page will be displayed, then the <code>&lt;script&gt;</code> element will run, then the rest of the page will be displayed. </p>

            <div class="sectionStart"><a name="1.1.3"></a><h3 id="sec1-1-3">1.1.3 A Note on IDEs</h3><p>You can write HTML, CSS, and JavaScript in a text editor and test it in a browser, but there are much more programmer-friendly environments out there for code creation. I recommend that you at least use a programming editor like <a href="http://notepad-plus-plus.org/" title="http://notepad-plus-plus.org/" target="notepad-plus-plus.org">NotePad++<span class="printonly"> [http://notepad-plus-plus.org/]</span></a>. This program will use color to highlight keywords, <a href="https://en.wikipedia.org/wiki/Literal_(computer_programming)" title="https://en.wikipedia.org/wiki/Literal_(computer_programming)" target="en.wikipedia.org">literals</a>, and other elements, and will also do some simple bracket matching for you. </p></div>
            
            <p>Better still is to use a fully-developed Integrated Development Environment (IDE) like <a href="https://netbeans.org/" title="https://netbeans.org/" target="netbeans.org">NetBeans<span class="printonly"> [https://netbeans.org/]</span></a> or <a href="http://www.aptana.com/" title="http://www.aptana.com/" target="www.aptana.com">Aptana Studio<span class="printonly"> [http://www.aptana.com/]</span></a> (which is based on <a href="https://eclipse.org/" title="https://eclipse.org/" target="eclipse.org">Eclipse<span class="printonly"> [https://eclipse.org/]</span></a>). For web programming, I like NetBeans the best, especially now it has support for HTML5 projects and connects to Chrome using the <a href="https://chrome.google.com/webstore/detail/netbeans-connector/hafdlehgocfcodbgjnpecfajgkeejnaa" title="https://chrome.google.com/webstore/detail/netbeans-connector/hafdlehgocfcodbgjnpecfajgkeejnaa" target="chrome.google.com">NetBeans Connector Plugin<span class="printonly"> [https://chrome.google.com/webstore/detail/netbeans-connector/hafdlehgocfcodbgjnpecfajgkeejnaa]</span></a>.  Just download the latest copy of NetBeans, then start an HTML5 Project, right click it in the project window and create an HTML document. Youâll get a starting template, errors and warnings, as well as shortcuts and suggestions. You can also create CSS and JavaScript files this way, and you can "run" the files in Chrome to test them once you have installed the NetBeans plugin from the <a href="https://chrome.google.com/webstore/category/apps" title="https://chrome.google.com/webstore/category/apps" target="chrome.google.com">Chrome Web Store<span class="printonly"> [https://chrome.google.com/webstore/category/apps]</span></a>.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Create a new HTML5 project in <a href="https://netbeans.org/" title="https://netbeans.org/" target="netbeans.org">NetBeans<span class="printonly"> [https://netbeans.org/]</span></a> (or your favorite IDE) and inside that project create a new <a href="http://en.wikipedia.org/wiki/Html" title="http://en.wikipedia.org/wiki/Html" target="en.wikipedia.org">HTML</a> page. You should get an <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> template but just in case you don't, you can download <a href="http://localhost:8383/TextBook/examples/template.html" target="examples" title="template.html">template.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and use that instead. 
                <br><br>Make sure you can run your template (i.e. display it in a web browser) then add the <code>&lt;script&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> shown in the previous section somewhere in the page and refresh it to see what happens.
                <br><br>Try moving the <code>&lt;script&gt;</code> element to different positions in the file. What do you notice about the behavior of the page when you reload it with the script element in different positions? What happens if you have multiple copies of it in the file? Is there anywhere in the file you canât put this element?  
            </p></div>

            <div class="sectionStart"><a name="1.1.4"></a><h3 id="sec1-1-4">1.1.4 Debugging Output</h3><p>Once we get past this opening chapter, we won't use alert boxes very much to talk to the user. They're rather inelegant and obtrusive. But you might still  want to have a way to create debugging output to let you know what is going on inside your JavaScript programs. For this, you can use the <code>console.log</code> function. It's a bit like <code>System.out.println()</code> in Java. It sends output to the browser's console where nobody but us developers will see it.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Go back to the <a href="https://netbeans.org/" title="https://netbeans.org/" target="netbeans.org">NetBeans<span class="printonly"> [https://netbeans.org/]</span></a> project from the last DIY box and change the <code>alert</code> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> to <code>console.log</code>. Refresh the page to see the message end up in the browser's console window.</p></div>

            <div class="sectionStart"><a name="1.2"></a><h2 id="sec1-2-0">1.2 Dynamic (and Weak) Typing</h2><p>Another important feature of <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> that sets it apart from <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> is that its <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> are <a href="http://en.wikipedia.org/wiki/Type_system" title="http://en.wikipedia.org/wiki/Type_system" target="en.wikipedia.org">dynamically-typed</a>. Another way to say this is that <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a> have fixed <a href="http://en.wikipedia.org/wiki/Data_type" title="http://en.wikipedia.org/wiki/Data_type" target="en.wikipedia.org">data types</a> but variables do not. JavaScript supports a number of data types including <code>Number</code>, <code>String</code>, <code>Boolean</code>, <code>Array</code> and <code>Object</code> (you can look these up in <a href="http://www.w3schools.com" title="http://www.w3schools.com" target="www.w3schools.com">w3schools</a> under <a href="http://www.w3schools.com/js/js_datatypes.asp" title="http://www.w3schools.com/js/js_datatypes.asp" target="www.w3schools.com">JS Data Types</a>) but you do not have to <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declare</a> a variableâs type in order to use it and you can change the type of a variable as the program runs. </p></div>
            
            <p>Unlike in Java where you have to declare a variable by specifying its type, variable <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declaration</a> in JavaScript is done with the generic keyword <code>var</code>. </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Try the statements below in the JavaScript console of your browser. 
                <code class="first">var x = 100;			
                    <br>alert(x);
                    <br><br>x = "I'm a <span>string</span> now";		
                    <br>alert(x);
                    <br><br>x = 45.3;				
                    <br>alert(x);
                    <br><br>x = "$"+x; 				
                    <br>alert(x);
                </code>
            </p></div>
            <p>(Here's a tip: To reset the console and make it forget all the variables you have defined in this session, just hit the refresh button on your browser.)</p>
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Data Types.</span> <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> is statically-typed, but <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> is <a href="http://en.wikipedia.org/wiki/Type_system" title="http://en.wikipedia.org/wiki/Type_system" target="en.wikipedia.org">dynamically-typed</a>. This seemingly small difference has ripple effects throughout the entire language.</p></div>
            <p>The examples in the DIY box above show that not only can <code>x</code> change its type from a number to a <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a> and back again, the <code>alert</code> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> can also take an <a href="https://en.wikipedia.org/wiki/Parameter_(computer_programming)" title="https://en.wikipedia.org/wiki/Parameter_(computer_programming)" target="en.wikipedia.org">argument</a> of any type. </p>
            <p>Other than the fact that variables are dynamically-typed, they work in pretty much the way you are used to from Java.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Here's a little <a href="http://en.wikipedia.org/wiki/Control_flow#Loops" title="http://en.wikipedia.org/wiki/Control_flow#Loops" target="en.wikipedia.org">loop</a> for counting to 10. You can try it out by creating a simple <a href="http://en.wikipedia.org/wiki/Html" title="http://en.wikipedia.org/wiki/Html" target="en.wikipedia.org">HTML</a> file with a <code>&lt;script&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>. You could also try it it in your <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> console using <code>shift-enter</code> to separate the lines, or if you're online right now, just copy and paste it into the console.) 
                <code class="first">for(var i = 1; i &lt;= 10; i++)
                    <code class="new">console.log(i);</code>
                </code>
                Hereâs another one to try.
                <code class="first">var n = prompt("Enter a number");	
                    <br>if (n &lt; 1000) 
                    <code class="new">alert("that was a small number");</code>
                    else
                    <code class="new">alert("that was a big number");</code>
                </code>
                Note that in this case the <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variable</a> <code>n</code> contains a <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a>, but JavaScript still allows the comparison to happen. This is because JavaScript practices not only dyamic but also weak typing. More on this in the next section.
            </p></div>
            <p>Actually, you can often use variables without declaring them at all, but this is considered very bad programming practice, for reasons we will discuss later. <span class="bold">Always declare your variables!</span> </p>
            <a name="e1.2"></a><div class="exercises"><h5>&lt;exercises section='1.2'&gt;</h5>
                <ol>
                    <li>Write a script on a web page that presents the user with an arithmetic problem (e.g. <code>What is 23 + -4?</code>) and asks for the answer using a <code>prompt</code>. Then give them feedback using an alert box.</li>
                    <li>Extend the script so that it generates the integers for the arithmetic problem randomly. Keep presenting the question until they get it right. Then give them a success message in an alert box.</li>
                    <li>Extend the script so that it asks the user if they would like another question using a confirm dialog and gives them another question if they press "OK". If they press "Cancel", the page should finish loading and display a goodbye message.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>
            <div class="JC" style="width: auto;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Random Numbers.</span> <code>Math.random()</code> works the same way in both <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> and <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>. But you canât cast to an integer with (int) in JavaScript. (Why not?) You can use <code>parseInt()</code> or <code>Math.floor()</code> instead. Look up the <a href="http://www.w3schools.com/js/js_math.asp" title="http://www.w3schools.com/js/js_math.asp" target="www.w3schools.com">JavaScript Math object</a> on <a href="http://www.w3schools.com" title="http://www.w3schools.com" target="www.w3schools.com">w3schools</a> for more info. </p></div>
            <div class="sectionStart"><a name="1.2.1"></a><h3 id="sec1-2-1">1.2.1 Weak Typing and Boolean Expressions</h3><p></p></div>
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Implicit Typecasting.</span> <code>"double x=45"</code> is an example of implicit type casting in <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> (an <code>int</code> <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> is converted and then assigned to a <code>double</code> <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variable</a>). <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> also performs <a href="http://en.wikipedia.org/wiki/Type_conversion" title="http://en.wikipedia.org/wiki/Type_conversion" target="en.wikipedia.org">implicit typecasting</a>, but does it in many more cases than Java does. Because of this we say that JavaScript is <a href="http://en.wikipedia.org/wiki/Strong_and_weak_typing" title="http://en.wikipedia.org/wiki/Strong_and_weak_typing" target="en.wikipedia.org">weakly-typed</a> while Java is strongly-typed.</p></div>
            <p>In <a href="http://en.wikipedia.org/wiki/Boolean_data_type" title="http://en.wikipedia.org/wiki/Boolean_data_type" target="en.wikipedia.org">Boolean</a> expressions (i.e. the expressions that evaluate to <code>true</code> or <code>false</code> to control <a href="http://en.wikipedia.org/wiki/If_statement" title="http://en.wikipedia.org/wiki/If_statement" target="en.wikipedia.org">if statements</a> and <a href="http://en.wikipedia.org/wiki/Control_flow#Loops" title="http://en.wikipedia.org/wiki/Control_flow#Loops" target="en.wikipedia.org">loops</a>) JavaScript uses aggressive <a href="http://en.wikipedia.org/wiki/Type_conversion" title="http://en.wikipedia.org/wiki/Type_conversion" target="en.wikipedia.org">implicit typecasting</a> (also known as weak typing) to compare any two values regardless of whether or not their types match. Typecasting is the act of converting one data type to another. Implicit typecasting is when the <a href="http://en.wikipedia.org/wiki/Compiler" title="http://en.wikipedia.org/wiki/Compiler" target="en.wikipedia.org">compiler</a> or <a href="http://en.wikipedia.org/wiki/Interpreter_(computing)" title="http://en.wikipedia.org/wiki/Interpreter_(computing)" target="en.wikipedia.org">interpreter</a> does the conversion automatically for you. </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">To see JavaScriptâs aggressive implicit typecasting in action, try the following in the Chrome console:
                <code class="first">var x = "hi";
                    <br>x == 45.3		
                    <br>x &gt;= 45.3		
                    <br>x == "hi"		
                </code>
                The first two comparisons above are legal but <code>false</code>. The last one is <code>true</code>.
            </p></div>
            <p>If a String contains a representation of a number, it can be compared to integers and floatsâ¦</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Try the following in a JavaScript console:
                <code class="first">var y = "50"; 
                    <br>x = 50; 
                    <br>y == x  
                </code>
                This comparison is <code>true</code>, even though <code>y</code> is a <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a> and <code>x</code> is a number
            </p></div>
            <p>Because of JavaScript's weak approach to types, there is a special Boolean operator <code>===</code> that returns true if two values are equal and also of the same type - this is known as being "exactly equal" or "identical". Similarly, <code>!==</code> is a "not exactly equal to" operator that respects the types of the operands. See <a href="http://www.w3schools.com/js/js_comparisons.asp" title="http://www.w3schools.com/js/js_comparisons.asp" target="www.w3schools.com">JS Comparison Operators</a> on w3schools for more info.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Try the <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statements</a> below using the same <code>x</code> and <code>y</code> variables from the last DIY box. Try to predict the result before you hit enter.
                <code class="first">y === x		
                    <br>y === "50"		
                    <br>y !== x		
                    <br>y !== "50"		
                </code>
                Explain to yourself what is happening in each case, and why each statement is either <code>true</code> or <code>false</code>.
            </p></div>
            <p>Because of the confusion that implicit type casting can cause, it is often considered best practice to use <code>===</code> and <code>!==</code> whenever possible and try to avoid using <code>==</code> and <code>!=</code>.</p>
            <div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Boolean Operators.</span> <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> adds two new <a href="http://en.wikipedia.org/wiki/Boolean_data_type" title="http://en.wikipedia.org/wiki/Boolean_data_type" target="en.wikipedia.org">Boolean</a> operators, <code>===</code> and <code>!==</code> for "is exactly equal to" and "is not exactly equal to". </p></div>
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">String Comparison.</span> In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> you write <code>x.equals("hi")</code> to find out if the <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">String</a> <code>x</code> contains the word "hi". In <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> you just use <code>x === "hi"</code>.</p></div>
            <p></p>

            <div class="sectionStart"><a name="1.2.2"></a><h3 id="sec1-2-2">1.2.2 Explicit Casting</h3><p>Sometimes you really want to treat a String value as a Number. For example, the prompt function always returns a String, which works fine in most cases, but suppose we are asking the user to enter a number and then we want to add 1 to it. The code in the DIY box below wonât do it.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Try this in a <code>&lt;script&gt;</code> element or a Chrome console window. What is going wrong?
                <code class="first">var y=prompt("Enter a number");	
                    <br>y = y + 1;	
                    <br>alert(y);	
                </code>
            </p></div>
            <div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Explicit Typecasting.</span> In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> this can often be done with a casting operator. For example <code>(int)23.5</code> converts  the <code>double 23.5</code> to the <code>int 23</code>.  There is no such mechanism in <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>. Instead you use the <code>parseInt</code> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a>.</p></div>
            <p>The example in the DIY box above doesnât do what we want because <code>y</code> is a string. So JavaScript treats the <code>+</code> operator as concatenation (much like Java). In this case, we need to use <a href="http://en.wikipedia.org/wiki/Type_conversion" title="http://en.wikipedia.org/wiki/Type_conversion" target="en.wikipedia.org">explicit typecasting</a> to force the type we want. JavaScript has built in <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global</a> <code>parseInt</code> and <code>parseFloat</code> functions for this very purpose.</p>
            <p>(Unlike <code>alert</code>, <code>prompt</code> and <code>confirm</code> which  belong to the <code>window</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>, <code>parseInt</code> and <code>parseFloat</code> are <a href="http://www.w3schools.com/jsref/jsref_obj_global.asp" title="http://www.w3schools.com/jsref/jsref_obj_global.asp" target="www.w3schools.com">global functions</a>. They do not belong to any object in the system. But this doesn't usually make a difference in practice.)</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Hereâs the fix for the last example. Verify that it works and that you understand why it works before moving on.
                <code class="first">var y=prompt("Enter a number");	
                    <br>y = parseInt(y)+1; 
                    <br>alert(y);
                </code>
            </p></div>
            <p>But what if <code>parseInt</code> or <code>parseFloat</code> fail (i.e. the user typed something that canât be <a href="http://en.wikipedia.org/wiki/Interpreter_(computing)" title="http://en.wikipedia.org/wiki/Interpreter_(computing)" target="en.wikipedia.org">interpreted</a> as a number)? In that case, they return the special value <code>NaN</code> (Not a Number) which can be detected with the global Boolean function <code>isNaN</code>. So to be fully robust, you could do the following:</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Try this out in a <code>&lt;script&gt;</code> element or a JavaScript console. Can you explain what each line is doing?
                <code class="first">var n;
                    <br>do {
                    <code class="new">n = prompt("Enter a number");</code>
                    } while (isNaN(n)); 
                    <br>n = parseFloat(n) + 1;
                    <br>alert(n);
                </code>
            </p></div>
            <p>JavaScript always tries to do the best it can to avoid crashing. So <code>parseInt("50.5")</code> will work and return <code>50</code>. So will <code>parseInt("50x6")</code> (the parser just stops at the x and returns what it has so far). This can be either a blessing or a curse depending on what the you are trying to do.</p>
            <a name="e1.2.2"></a><div class="exercises"><h5>&lt;exercises section='1.2.2'&gt;</h5>
                <ol>
                    <li>Load <a href="http://localhost:8383/TextBook/examples/whatswrong.html" target="examples" title="whatswrong.html">whatswrong.html</a> file from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, run it to see what it does, then view the page source and read the instructions in the comment header of the file. Explain exactly where the error or errors happen, and fix them.</li>
                    <li>Further fix the code from question 1 so that it recovers gracefully when the user types a bad number.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>
            <div class="sectionStart"><a name="1.2.3"></a><h3 id="sec1-2-3">1.2.3 Dynamic Typing and Arrays</h3><p>Like most languages, JavaScript contains support for <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">arrays</a>. In many cases the code for processing arrays will look very familiar. Things are only slightly different in JavaScript because of the consequences of the language being dynamically-typed.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">As a Java programmer, you ought to be able leverage your understanding of Java arrays and your growing understanding of JavaScript to describe the effect of this JavaScript code:
                <code class="first">
                    var a = [3, 4, 5];
                    <br>for(var i = 0; i &lt; a.length; i++)
                    <code class="new">
                        a[i] = a[i] * 2;
                    </code>
                </code>
                Take a minute to think about what this code does, then type or paste it into a browser console window to run it, and then type <code>a</code> and press enter to examine the contents of the <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">array</a>. Did you get it right?
            </p></div>
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Array Literals.</span> In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">array</a> <a href="https://en.wikipedia.org/wiki/Literal_(computer_programming)" title="https://en.wikipedia.org/wiki/Literal_(computer_programming)" target="en.wikipedia.org">literals</a> are written with curly brackets and can only be used as part of a combined <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declaration</a> and assignment, like this: <code>int[] x = {5,3,2};</code>. In contrast, <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> array literals are written with square brackets and can be used anywhere you could use an array. For example the expression <code>[-10,3,0][1]</code> evaluates to <code>3</code>. Can you figure out why?</p></div>
            <p>The first consequence of JavaScriptâs dynamic typing is that you donât have to declare a type for an array. The following pieces of code show two different ways of creating a generic empty array.
                <code class="first">
                    var a = [];
                    <br>var a = new Array();
                </code>
            </p>
            <p>You can also create an array with some initial contents, like this:
                <code class="first">
                    var initializedArray = [43, "hello", -2.5, true];
                </code>
            </p>
            <p>The expression in square brackets above is called an array <a href="https://en.wikipedia.org/wiki/Literal_(computer_programming)" title="https://en.wikipedia.org/wiki/Literal_(computer_programming)" target="en.wikipedia.org">literal</a>. In JavaScript, you can use array literals anywhere you could use an array.</p>
            <p>Notice that this array contains values of three different types (Number, String, and Boolean). This brings us to the second consequence of dynamic typing: you can mix values of different types in a single array. In fact, you can even have arrays stored within other arrays.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break"> Type or paste this line into a browser console and hit enter.	
                <code class="first">
                    var a = [6, [5, 3, -2], "JavaScript"];
                </code>
                How many items does the <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">array</a> <code>a</code> have in it? Type <code>a.length</code> to find out.
                <br><br>What does each item contain? Type <code>a[0]</code>, <code>a[1]</code>, and so on to find out. What if you type <code>a[1][1]</code>? What do you expect to be the result? Try it to see if you were right.
            </p></div>
            <p>You never have to declare the size of an array in advance because you can arbitrarily extend its length after you create it.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Type or paste the following into a browser console.
                <code class="first">
                    var a = [];
                    <br>a[0] = -23;
                    <br>a[1] = 45;
                </code>
                Now type <code>a</code> and hit enter to see the contents of the <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">array</a>. This is an example of extending the length of an initially empty array. Type a.length to see the new length.
            </p></div>
            <p>It is also possible to create an array with "holes" in it.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Complete the previous DIY box, and then in the same console window, type the following:
                <code class="first">
                    a[9] = 0;
                </code>
                You just created an <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">array</a> with 7 "holes in" it from indices 2 to 8. How long is the array now? Type <code>a.length</code> to find out, then type <code>a</code> and hit enter to find out what the contents of the array looks like. 
                <br><br>The "holes" in the array have been filled with the special <a href="http://www.w3schools.com/jsref/jsref_obj_global.asp" title="http://www.w3schools.com/jsref/jsref_obj_global.asp" target="www.w3schools.com">global property</a> <code>undefined</code>.
                <br><br>So if you are ever not sure whether an array index has been given a value, you can test it in an if statement. Try this:
                <code class="first">
                    if (a[3] === undefined) 
                    alert("index 3 is undefined");
                </code>
            </p></div>
            <div class="JC" style="width: auto;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Arrays.</span> <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">arrays</a> are a lot like <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> arrays, except: 1. You donât need to specify the type or size of the array; 2. You can mix <a href="http://en.wikipedia.org/wiki/Data_type" title="http://en.wikipedia.org/wiki/Data_type" target="en.wikipedia.org">data types</a> in the same array; 3. You can increase the size of the array after it has been created; and 4. The array indices you fill with <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a> donât have to be <a href="http://en.wikipedia.org/wiki/Contiguity#Computer_science" title="http://en.wikipedia.org/wiki/Contiguity#Computer_science" target="en.wikipedia.org">contiguous</a>.</p></div>
            <a name="e1.2.3"></a><div class="exercises"><h5>&lt;exercises section='1.2.3'&gt;</h5>
                <ol>
                    <li>Create a page that prompts the user for 10 numbers and then computes the average <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> of the numbers entered and reports in an <code>alert</code> box how many of the values they entered were above average.</li>
                    <li>Create a page with a script that defines an <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">array</a> and puts the <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">String</a> values <code>"Hello"</code>, <code>"World"</code>, and <code>"!"</code> into <a href="http://en.wikipedia.org/wiki/Random_number_generation" title="http://en.wikipedia.org/wiki/Random_number_generation" target="en.wikipedia.org">random</a> array locations between 1 and 10. Then prompt the user for three integers and check to see if they have found the array locations where the three String values are stored. Give them a score out of 3 depending on how many they found and show them the values they uncovered using <code>alert</code> boxes.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>


            <!-- CHAPTER 2 -->
            <div class="sectionStart pageBreak"><a name="2."></a><h1 id="sec2-0-0">2. The <code>document</code> Object and the DOM</h1><p>After the previous chapter, you should be able to write <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> programs that are integrated with a web page, communicate with the user, and solve problems. Congratulations! You still have a long way to go. </p></div>
            
            <p>Up to this point, your interactions with the user have entirely made use of pop-up dialogs. While this style of communication is sometimes used in <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web apps</a>, most input to a JavaScript program usually consists of mouse and keyboard <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a> (i.e. moving the mouse, clicking, and typing) and most JavaScript output consists of modifications to the web page (e.g. changing colors and styles, revealing and hiding menus, changing the contents of an <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>, loading and displaying new content, etc.). Weâll start with the output first in this chapter, then the next chapter will show you how to respond to keyboard and mouse input. By the end of these two chapters, youâll have the tools you need to write much more professional web apps.</p>

            <div class="sectionStart"><a name="2.1"></a><h2 id="sec2-1-0">2.1 The Document Object Model</h2><p>Every <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> program running in a web browser has access to a <code>document</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>. This object holds the browserâs internal representation of the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">Document Object Model</a> (<a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a>), and contains all the information the browser constructs using the <a href="http://en.wikipedia.org/wiki/HTML_element" title="http://en.wikipedia.org/wiki/HTML_element" target="en.wikipedia.org">HTML tags</a> and <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attributes</a>, <a href="http://www.w3schools.com/css/css_syntax.asp" title="http://www.w3schools.com/css/css_syntax.asp" target="www.w3schools.com">CSS style rules</a>, images, and other components that make up the source code of the page. Understanding the DOM is key to becoming an effective JavaScript programmer.</p></div>
            
            <p>Like any bracketed structure, an HTML page can be viewed as a hierarchical family <a href="http://en.wikipedia.org/wiki/Tree_(data_structure)" title="http://en.wikipedia.org/wiki/Tree_(data_structure)" target="en.wikipedia.org">tree</a> of <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> containing other elements. When the browser reads an HTML source page it constructs an object for each element, links it to the elements it contains (the "children") and also links it to the element that contains it (the "parent").</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Load <a href="http://localhost:8383/TextBook/examples/helloworld.html" target="examples" title="helloworld.html">helloworld.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, and look at the page source:
                <code class="first">
                    &lt;!DOCTYPE html&gt;
                    <br>&lt;html&gt;
                    <code class="new">
                        &lt;head&gt;
                        <code class="new">
                            &lt;title&gt;Hello World&lt;/title&gt;
                        </code>
                        &lt;/head&gt;
                        <br> &lt;body&gt;
                        <code class="new">
                            &lt;h1 id='message' class='heading'&gt;Hello, World!&lt;/h1&gt;
                            <br>&lt;img src='images/smiley.jpg' alt='smile image'&gt;
                        </code>
                        &lt;/body&gt;
                    </code>
                    &lt;/html&gt;			 
                </code>
            </p></div>
            <p>In the example above, the document consists of a <code>&lt;!DOCTYPE&gt;</code>  element and an <code>&lt;html&gt;</code> element. The <code>&lt;html&gt;</code> element contains a <code>&lt;head&gt;</code> and a <code>&lt;body&gt;</code>. The <code>&lt;head&gt;</code> contains a <code>&lt;title&gt;</code> element and the <code>&lt;body&gt;</code> contains an <code>&lt;h1&gt;</code> element and an <code>&lt;img&gt;</code> element. This set of relationships can be displayed in a tree diagram like the one shown below. </p>
            <img class="fullsize" alt="dom tree" src="images/helloworldtree.jpg" style="width: 263px;">
            <p>The items in the boxes are referred to as <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">nodes</a>. Each node is a JavaScript object that has been constructed by the browser to represent the corresponding <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">HTML element</a>. Each node object contains information about the attributes, CSS style and contents of the element it represents.</p>
            <p>A node can have one parent above it, any number of children directly below it, and any number of siblings (nodes with the same parent). The root node is at the top and the leaf nodes are the ones at the bottom with no children, which makes this a curious sort of upside down "tree". When you are using JavaScript in a web page, the <code>window</code> <a href="https://en.wikipedia.org/wiki/Property_(computer_science)" title="https://en.wikipedia.org/wiki/Property_(computer_science)" target="en.wikipedia.org">property</a>, <code>document</code>,  holds the root node of this tree. Like all properties and <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> belonging to the <code>window</code> object, you can access <code>document</code> on its own or by typing <code>window.document</code>.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Open <a href="http://localhost:8383/TextBook/examples/helloworld.html" target="examples" title="helloworld.html">helloworld.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>. Hit F12 and instead of the Console tab, go to the <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">Elements</a> tab. This is a representation of the browserâs <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a>. 
                <br><br>Now right click the <code>&lt;img&gt;</code> element, select "add <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a>", and give this image a style attribute (e.g. <code>style="width:100px"</code>). You should see the change reflected on the page immediately.
                <br><br>Now check the page source, and you will see that it has not changed. Why not?
                <br><br>Now go to the Console, type <code>document</code>, and hit enter. Click the response to open the DOM and explore it. This <code>document</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> gives you access to the browserâs DOM from within a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> program.
            </p></div>
            <p>There is a lot more to say about the structure of the DOM than this, but the information in this section is good enough to get you started.</p>

            <div class="sectionStart"><a name="2.2"></a><h2 id="sec2-2-0">2.2 What is a JavaScript Object? (An Important Aside)</h2><div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Objects.</span> <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> makes extensive use of <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">Objects</a>, and supports the creation of custom objects and an <a href="http://en.wikipedia.org/wiki/Object-oriented_design" title="http://en.wikipedia.org/wiki/Object-oriented_design" target="en.wikipedia.org">object-oriented</a> style of programming. But JavaScript also supports other programming styles (e.g. <a href="http://en.wikipedia.org/wiki/Imperative_programming" title="http://en.wikipedia.org/wiki/Imperative_programming" target="en.wikipedia.org">imperative</a>), and as you will see later, JavaScript objects are different in many ways from their <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> counterparts. But for now you can treat JavaScript objects just like Java objects.  </p></div></div>
            
            <p>The last section introduced the notion of an <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">Object</a>, so we better say a few words about that before we move on. </p>
            <p>Just like in <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> object is a package of <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> (or "<a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a>" or "properties") and code (or "<a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a>") stored together under a single variable name. In your experience with Java you have probably used objects before, and you may even have created your own objects. </p>
            <p>For example, in JavaScript every <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">String</a> object has a field named <code>length</code> and a method named <code>charAt</code> (just like the Java <code>String</code> object). The code in the DIY box below creates a string and displays its length and first character. Note the use of the variable name, <code>s</code>, with the dot operator to access the variables and methods that belong to the object referenced by <code>s</code>.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Try this in a console window or a <code>&lt;script&gt;</code> element of a web page. Predict the result of each line before you run it.
                <code class="first"> 
                    var s = "<span>JavaScript</span> is Cool. ";
                    <br> alert(s.length);
                    <br> alert(s.charAt(0));
                </code>
            </p></div>
            <div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Char versus String.</span> Unlike <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, there is no <code>char</code> <a href="http://en.wikipedia.org/wiki/Data_type" title="http://en.wikipedia.org/wiki/Data_type" target="en.wikipedia.org">data type</a> in <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>.</p></div>
            <p>The second line in the code above accesses the <code>length</code> field associated with the object <code>s</code>. The third line calls the <code>charAt</code> method with the parameter 0 to get the first character from the object <code>s</code>. The <code>charAt</code> method returns a string of length 1.</p>
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Object Syntax.</span> There are two ways of accessing an objectâs <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a> and <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> in <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>. Like <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, you can write <code>objectName.fieldName</code>. Unlike Java, you can also write <code>objectName["fieldname"]</code>. </p></div>
            <p><br>One thing that is a little different about JavaScript is that you can use either dot notation or square bracket notation to access an objectâs properties and methods. For example, instead of <code>s.length</code> and <code>s.charAt</code>, you can write <code>s["length"]</code> and <code>s["charAt"]</code>, as shown in the DIY box below.  </p>
            <p>This square bracket object notation looks and behaves exactly like a data structure called an <a href="http://en.wikipedia.org/wiki/Associative_array" title="http://en.wikipedia.org/wiki/Associative_array" target="en.wikipedia.org">associative array</a> (or sometimes a "map" or a "dictionary"). Indeed, there is really no difference between an object and an associative <span>array</span> in JavaScript, so both styles of referencing are included for the convenience of the programmer.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try this in a console window or a <code>&lt;script&gt;</code> element of a web page.
                <code class="first">
                    var s = "<span>JavaScript</span> is Cool. ";
                    <br>alert( s["length"] );
                    <br>alert( s["charAt"](0) );
                </code>
                This square bracket style of accessing an objectâs fields and methods might seem strange, but it has its uses. For example, try the following (after typing the lines above). Make sure you type something legal like "length" when prompted.
                <code class="first">
                    var fieldName = prompt("type a field name");
                    <br>alert( s[fieldName] );
                </code>
            </p></div>

            <div class="sectionStart"><a name="2.3"></a><h2 id="sec2-3-0">2.3 Retrieving and Manipulating a DOM Node</h2><p>There are lots of ways to access and dig through the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> <a href="http://en.wikipedia.org/wiki/Tree_(data_structure)" title="http://en.wikipedia.org/wiki/Tree_(data_structure)" target="en.wikipedia.org">tree</a> from within a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> program, but by far the easiest way to retrieve a <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">node</a> is by using its <code>id</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a>. To do this, use the <code>getElementById</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a> of the <code>document</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> to reach into the DOM and grab the node you want (note the lower-case <code>d</code> in that method name!). Once you have it, you can access and/or change the contents of the <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>, its style information, or any of its attributes.</p></div>
            
            <p>Any element you retrieve using <code>document.getElementById</code> will be an object of type <code>Element</code> (and also of type <code>Node</code>). JavaScript <a href="http://www.w3schools.com/jsref/dom_obj_all.asp" title="http://www.w3schools.com/jsref/dom_obj_all.asp" target="www.w3schools.com">Element objects</a> contain a number of <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a>, each containing information associated with the corresponding <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">HTML element</a>. These fields can be used to make changes to the DOM long after a page has been loaded.</p>
            <p>Here are some of the more useful <code>Element</code> fields... </p>
            <div class="table">                
                <table>
                    <tbody><tr><td><code>innerHTML</code>:</td><td>a String representing the contents of the node as HTML </td></tr>
                    <tr><td><code>style</code>:</td><td>the CSS style information associated with the node</td></tr>
                    <tr><td><code>className</code>:</td><td>the HTML class attribute</td></tr>
                    <tr><td>plusâ¦</td><td>there will be one field for every attribute specified in the corresponding tag in the original HTML source code (e.g. <code>id</code>, <code>src</code>, <code>href</code>, <code>value</code>, <code>type</code>, etc.)</td></tr>
                </tbody></table>

            </div>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Open <a href="http://localhost:8383/TextBook/examples/helloworld.html" target="examples" title="helloworld.html">helloworld.html</a> example from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, go to the console and try the following commands, noting the return values in each case. 
                <code class="first">var e = document.getElementById("message");
                    <br>e;
                    <br>e.innerHTML;
                    <br>e.style;
                    <br>e.className;
                </code>
                Now add an <code>id</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> to the <code>&lt;img&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>, either by changing the source code, or by changing the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> through the Elements view (see a previous DIY box).
                <br><br>Now use <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statements</a> similar to the ones above to retrieve the <code>src</code> and <code>alt</code> attributes of the image.
            </p></div>
            <p>An alternative to the <code>getElementById</code> method is <code>querySelector</code>. You can use <code>querySelector</code> with any <a href="http://www.w3schools.com/cssref/css_selectors.asp" title="http://www.w3schools.com/cssref/css_selectors.asp" target="www.w3schools.com">CSS selector</a> and it will return the first matching element (or <code>null</code> if no elements match).</p>
            <p>For example, <code>document.querySelector("h1")</code> returns the first <code>&lt;h1&gt;</code> element in the DOM, <code>document.querySelector("h1.main")</code> returns the first <code>&lt;h1&gt;</code> element with a <a href="http://www.w3schools.com/css/css_selectors.asp" title="http://www.w3schools.com/css/css_selectors.asp" target="www.w3schools.com">class</a> of <code>main</code>, and so on. And of course, <code>document.querySelector("#myId")</code> is equivalent to <code>document.getElementById("myID")</code>. </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Open the browser console for this page (the one you're reading now) and try the following to get the first DIY box and the first Java Connection box.
                <code class="first">
                    document.querySelector("div.DIY")
                    <br>document.querySelector("div.JC")
                </code>
            </p></div>
            <p>The <code>querySelector</code> method can sometimes be a useful tool to have in your toolbox, but to keep things simple, I will continue to just use <code>getElementById</code> in the examples that follow.</p>

            <div class="sectionStart"><a name="2.3.1"></a><h3 id="sec2-3-1">2.3.1 Changing an Element's <code>innerHTML</code></h3><p>An <code>Element</code>'s <code>innerHTML</code> <a href="https://en.wikipedia.org/wiki/Property_(computer_science)" title="https://en.wikipedia.org/wiki/Property_(computer_science)" target="en.wikipedia.org">property</a> contains a <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">String</a> representation of the content of the corresponding DOM node.   The content is everything that appears between the opening and closing tags that defined that node in the original HTML file. Changing this string is probably the easiest way to rewrite part of the DOM. </p></div>
            
            <p>The DIY example below shows you how to change the text contents of an element.</p>
            <p>(Be careful with case here. If you type <code>innerHtml</code> instead of <code>innerHTML</code>, the command may fail without even giving you an error message!)</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Load <a href="http://localhost:8383/TextBook/examples/innerHTMLExample1.html" target="examples" title="innerHTMLExample1.html">innerHTMLExample1.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, and let it do its thing. After you press OK, you will see the text of the heading change.
                <br><br>The relevant code is shown below:
                <code class="first">
                    <code>&lt;h1 id="heading"&gt;</code>A Simple Example<code>&lt;/h1&gt;</code>
                    <br><code>&lt;p&gt;</code>Here is some text in a paragraph.<code>&lt;/p&gt;</code>
                    <br><code>&lt;script type="text/javascript"&gt;</code>
                    <code class="new">alert("Press OK to see me change my own heading.");
                        <br>document.getElementById("heading").innerHTML = "Done";
                    </code>
                    <code>&lt;/script&gt;</code>
                </code>
                See if you can rewrite this code so that instead of just rewriting the heading, it also rewrites the <code>&lt;p&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>.
            </p></div>
            <p>You can also place <a href="http://en.wikipedia.org/wiki/HTML_element" title="http://en.wikipedia.org/wiki/HTML_element" target="en.wikipedia.org">HTML tags</a> into the <code>innerHTML</code> field of a node. When you do that, the browser will read the tags, create node objects for the corresponding HTML elements, and add them to the DOM, as demonstrated in the DIY box below. If the <code>innerHTML</code> of the element you rewrite already contained other HTML elements, the corresponding nodes will be discarded from the DOM and replaced with new ones.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Load the file <a href="http://localhost:8383/TextBook/examples/innerHTMLExample2.html" target="examples" title="innerHTMLExample2.html">innerHTMLExample2.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> into a browser, and let it do its thing. After you press OK, you will see the div change to have two new paragraphs added as contents. Hit F12 and go to <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">Elements</a> to verify that two new <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">nodes</a> have been added to the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a>.
                <br><br>The relevant code is shown below:
                <code class="first"><code>&lt;div id='target'&gt;</code>Here is some text in a div.<code>&lt;/div&gt;</code>
                    <br><code>&lt;script type='text/javascript'&gt;</code>
                    <code class="new">alert("Press OK to see me change the contents of my div.");
                        <br>document.getElementById("target").innerHTML = 
                        <br>"<code>&lt;p&gt;</code>First paragraph<code>&lt;/p&gt;</code><code>&lt;p&gt;</code>Second paragraph<code>&lt;/p&gt;</code>";
                    </code>
                    <code>&lt;/script&gt;</code>
                </code>
                Rewrite the code so that it asks the user for some HTML and then inserts whatever the user types into the <code>&lt;div&gt;</code>.
            </p></div>
            <p>Here is a diagram of the relevant part of the DOM before and after executing the script in the DIY example above.</p>
            <img class="fullsize" alt="changes to the dom" src="images/domchange.jpg" style="width: 263px;">
            <br>
            <h4>Note: Adding Fields to Objects</h4>
            <div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Bad Field Names.</span> In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, if you mistype an object's <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> name, you will get a <a href="http://en.wikipedia.org/wiki/Syntax_error" title="http://en.wikipedia.org/wiki/Syntax_error" target="en.wikipedia.org">syntax error</a> every time. In <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> if you try to read a non-existent field, you will get a runtime error in the console. But if you try to assign to a non-existent field, JavaScript will create a new field for you without any errors or warnings. This makes JavaScript <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">objects</a> very flexible, but it also makes some errors very hard to find.</p></div>
            <p>Unlike <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, JavaScript allows you to create a new field in any object at any time simply by assigning something to a new field name. This is very convenient, but it also means that some errors are hard to catch. If you misspell a field or get the case wrong JavaScript will modify the object by adding a new field without warning you about what has happened.</p>
            <p>For example if you type <code>node.innerHtml = "new content"</code>, the <code>innerHTML</code> field of the <code>node</code> object will not change because you got the case wrong on its name. But you will not get any error or warning messages either since JavaScript just adds a new <code>innerHtml</code> field to the <code>node</code> object.</p>
            <a name="e2.3.1"></a><div class="exercises"><h5>&lt;exercises section='2.3.1'&gt;</h5>
                <ol> 
                    <li><span class="bold">From the first DIY box above:</span> Modify the code for <a href="http://localhost:8383/TextBook/examples/innerHTMLExample1.html" target="examples" title="innerHTMLExample1.html">innerHTMLExample1.html</a> so that it rewrites the <code>&lt;p&gt;</code> element as well as the <code>&lt;h1&gt;</code> element.</li>
                    <li><span class="bold">From the second DIY box above:</span>
                        <ol class="sublist">
                            <li>Modify <a href="http://localhost:8383/TextBook/examples/innerHTMLExample2.html" target="examples" title="innerHTMLExample2.html">innerHTMLExample2.html</a> so that it prompts the user for some text, and then changes the contents of the <code>&lt;div&gt;</code> to match what they typed.</li>
                            <li>Test your code and try entering HTML at the prompt and investigate what happens to the DOM. </li>
                            <li>Why do you have to create the script after the <code>&lt;div&gt;</code> element? What happens if you place it earlier in the file?</li>
                            <li>Modify the script again so that it asks the user to enter a positive integer. Then alter the contents of the <code>&lt;div&gt;</code> element to display the integers from 1 up to the number the user entered. Each integer should be contained in a separate <code>&lt;p&gt;</code> element. (Note this will require some string processing with a loop.)</li>
                        </ol>
                    </li>
                    <li>Get <a href="http://localhost:8383/TextBook/examples/addition.html" target="examples" title="addition.html">addition.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>. Read the comment header in the page source and follow the instructions to complete the program.</li>
                    <li>Create a new page using <a href="http://localhost:8383/TextBook/examples/template.html" target="examples" title="template.html">template.html</a> from the example pack (or the default <a href="https://netbeans.org/" title="https://netbeans.org/" target="netbeans.org">NetBeans<span class="printonly"> [https://netbeans.org/]</span></a> template). Place a <code>&lt;script&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> after the <code>&lt;div&gt;</code> to put a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> program. This program should ask the user how many paragraph elements they want, then ask them to type a sentence to use as the content of those paragraphs. Then change the contents of the <code>&lt;div&gt;</code> element according to what the user entered. Right click the page and choose "inspect element" to make sure that the paragraphs got created correctly.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="2.3.2"></a><h3 id="sec2-3-2">2.3.2 Changing an Element's <code>style</code></h3><p>Changing an element's CSS information can be done most easily by accessing the <code>style</code> field of the corresponding DOM node. This <code>style</code> object contains all the in-line CSS information for the Node, where each field of the object corresponds to a CSS property.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Load <a href="http://localhost:8383/TextBook/examples/innerHTMLExample1.html" target="examples" title="innerHTMLExample1.html">innerHTMLExample1.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, and press OK when prompted. Now hit F12 to open the console and type the following:
                <code class="first">var e = document.getElementById("heading"); 
                    <br>e.style.color = "red";

                </code>
                Now try changing other CSS styles in the same way. Add a border, change the font, position the header below the paragraph, etc.
                <br><br>Now go to the <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">Elements</a> view and look at the <code>&lt;h1&gt;</code> element. You will see style information in the elementâs <code>style</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a>. Note that the page source does not contain this information. 
            </p></div>
            <p>In addition to assigning or changing style information, you can also read style information from the fields of the <code>style</code> object, but you cannot read any CSS properties that were defined as part of a <a href="http://en.wikipedia.org/wiki/Style_sheet_(web_development)" title="http://en.wikipedia.org/wiki/Style_sheet_(web_development)" target="en.wikipedia.org">style sheet</a> in this way.</p><p>
            </p><div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load <a href="http://localhost:8383/TextBook/examples/innerHTMLExample2.html" target="examples" title="innerHTMLExample2.html">innerHTMLExample2.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, and press OK when prompted. Note that the <code>&lt;div&gt;</code> element is red with a border. 
                <br><br>Now hit F12 to open the console and type the following:
                <code class="first">var e = document.getElementById("target"); 
                    <br>e.style.color;
                    <br>e.style.border;
                </code>
                Why does one of the above lines give you a <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> but not the other? View the original page source and see if you can figure it out.
            </p></div>
            <p>The only wrinkle in accessing the style object above is that you can get into problems with the dot notation for hyphenated style properties like <code>background-color</code>. The problem is that the JavaScript expression <code>e.style.background-color</code> looks like we are subtracting the <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variable</a> color from the field <code>e.style.background</code>. The solution implemented in most browsers is to convert hyphenated-property-names to <a href="http://en.wikipedia.org/wiki/Camel_case" title="http://en.wikipedia.org/wiki/Camel_case" target="en.wikipedia.org">camelCasePropertyNames</a> (e.g. <code>border-radius-top-left</code> becomes <code>borderRadiusTopLeft</code>).</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Load <a href="http://localhost:8383/TextBook/examples/innerHTMLExample1.html" target="examples" title="innerHTMLExample1.html">innerHTMLExample1.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, and press OK when prompted. Now hit F12 to open the console and type the following:
                <code class="first">var e = document.getElementById("heading"); 
                    <br>e.style.backgroundColor = "red";
                </code>
                Now change some other hyphenated properties, like <code>font-size</code>, <code>border-radius</code>, etc.
            </p></div>
            <h4>Note: Use of Square Brackets</h4>
            <p>Don't forget that you can access an objects' fields using the dot notation or <a href="http://en.wikipedia.org/wiki/Associative_array" title="http://en.wikipedia.org/wiki/Associative_array" target="en.wikipedia.org">associative array</a> notation (see the section on JavaScript objects above). Many JavaScript programmers choose to use this notation for style properties. So in the most recent DIY box above, instead of <code>e.style.backgroundColor</code> many JavaScript programmers would prefer <code>e.style["backgroundColor"]</code>. It's up to you which method you use to access the <code>style</code> object's fields (or any object's fields for that matter) but you need to know about the two alternatives in order to read other people's code effectively.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Go back and redo all the other DIY boxes in this section, changing the dot notation to <a href="http://en.wikipedia.org/wiki/Associative_array" title="http://en.wikipedia.org/wiki/Associative_array" target="en.wikipedia.org">associative array</a> notation for all style properties. Every example should behave in exactly the same way as before.</p></div>
            <a name="e2.3.2"></a><div class="exercises"><h5>&lt;exercises section='2.3.2'&gt;</h5>
                <ol>
                    <li>Create a web page with a single "hello world" paragraph. Create a script on the page after this <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> that prompts the user for a color, and then sets the color of the "hello world" element according to what they typed. Why do you have to create the script after the <code>&lt;p&gt;</code> element? What happens if you place it earlier in the file?</li>
                    <li>Modify the script from question 1 so that the user can specify both the style <a href="https://en.wikipedia.org/wiki/Property_(computer_science)" title="https://en.wikipedia.org/wiki/Property_(computer_science)" target="en.wikipedia.org">property</a> to change and the <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> (note that you will have to use square bracket notation to access the style property the user chooses).</li>
                    <li>Go back to the <a href="http://localhost:8383/TextBook/examples/addition.html" target="examples" title="addition.html">addition.html</a> exercise from the previous section. Change the file so that the result <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> changes to Green if the user gets your question right, otherwise it should be Red.</li>
                    <li>Modify <a href="http://localhost:8383/TextBook/examples/addition.html" target="examples" title="addition.html">addition.html</a> again so that if the user fails to enter a valid number, the <code>&lt;h1&gt;</code> element turns into a solid red box with a thick black border around it.</li>
                    <li>Get the <a href="http://localhost:8383/TextBook/examples/moveme.html" target="examples" title="moveme.html">moveme.html</a> file from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>. When you run it you will see a circle (actually a <code>&lt;div&gt;</code> element) inside a box (another <code>&lt;div&gt;</code> element). Both of these <code>&lt;div&gt;</code> elements have their CSS <code>position</code> property set to <code>absolute</code>. If you are not familiar with how <a href="http://www.w3schools.com/css/css_positioning.asp" title="http://www.w3schools.com/css/css_positioning.asp" target="www.w3schools.com">absolute positioning</a> works, you can read about it in the comments of the moveme.html file or in the <a href="http://www.w3schools.com/css/css_positioning.asp" title="http://www.w3schools.com/css/css_positioning.asp" target="www.w3schools.com">W3Schools CSS Positioning</a> page.
                        <ol type="a">
                            <li>Your first task is to add a <code>&lt;script&gt;</code> element that will repeatedly use a <code>confirm</code> dialog to ask the user if they want to move the box. If they click OK, move the circle to a <a href="http://en.wikipedia.org/wiki/Random_number_generation" title="http://en.wikipedia.org/wiki/Random_number_generation" target="en.wikipedia.org">random</a> position within the box and then ask again. if they click CANCEL, exit the program.</li>
                            <li>Your second task is to change the program so it uses a <code>prompt</code> dialog to ask the user to enter U, D, L, R or Q (for up, down, left, right and quit) and then move the circle 20 pixels in the desired direction.</li>
                            <li>Finally, modify your solution so that the user cannot move the circle out of bounds.</li>
                        </ol>
                    </li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="2.3.3"></a><h3 id="sec2-3-3">2.3.3 Changing an Element's <code>class</code> Name</h3><p>Sometimes you may want to change a large number of property/<a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> pairs at once. In this case, a good option might be to define styles for two different classes, and then change the <code>className</code> field of the element. This will automatically update the style of the element to match its new class, effectively changing many styles at once.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Load <a href="http://localhost:8383/TextBook/examples/classNameChangeExample.html" target="examples" title="classNameChangeExample.html">classNameChangeExample.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>. Now hit F12 to open the console and type the following:
                <code class="first">document.getElementById("maindiv").className="classtwo"</code>
                You should see a big change. Take a look at the source code for this file to see how this change happened. Can you use a single command to change it back to the way it was originally?
            </p></div>
            <p>(Advanced Programming Note: If you need an object to have multiple classes associated with it, you can use the <code>classList</code> <a href="http://en.wikipedia.org/wiki/Application_programming_interface" title="http://en.wikipedia.org/wiki/Application_programming_interface" target="en.wikipedia.org">api</a> for that object. You won't find this on w3schools, so here's a link to the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element.classList" title="https://developer.mozilla.org/en-US/docs/Web/API/Element.classList" target="developer.mozilla.org">Mozilla Developer Network ClassList<span class="printonly"> [https://developer.mozilla.org/en-US/docs/Web/API/Element.classList]</span></a> page.)
            </p>
            <a name="e2.3.3"></a><div class="exercises"><h5>&lt;exercises section='2.3.3'&gt;</h5>
                <ol><li>Go back to the <a href="http://localhost:8383/TextBook/examples/addition.html" target="examples" title="addition.html">addition.html</a> exercises from the previous sections and create <a href="http://www.w3schools.com/css/css_syntax.asp" title="http://www.w3schools.com/css/css_syntax.asp" target="www.w3schools.com">CSS rules</a> for two <a href="http://www.w3schools.com/css/css_selectors.asp" title="http://www.w3schools.com/css/css_selectors.asp" target="www.w3schools.com">classes</a> named <code>correct</code> and <code>incorrect</code>. The <code>correct</code> class should make an <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> big, centered in the middle of the screen, with a border and a happy background color. The <code>incorrect</code> class should make an element small, positioned in the lower right, with sad colors. Then modify the script to change the class of the result element appropriately depending on whether the user gets your question right or wrong.</li></ol>
            <h5>&lt;/exercises&gt;</h5></div>
            <div class="sectionStart"><a name="2.3.4"></a><h3 id="sec2-3-4">2.3.4 Changing Other Attributes</h3><p>You can also access, change or add any other attributes of an element by accessing the fields for those attributes. For example, if you want to change an image, you can modify its <code>src</code> attribute by accessing the <code>src</code> field of the corresponding node. Or if you want to change a link, you can modify the <code>href</code> attribute of the corresponding node.</p></div>
            
            <div id="testDIY" class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Open the chrome console for this page and execute the following command to retrieve the node corresponding to this DIY box:
                <code class="first">
                    node = document.getElementById("testDIY");
                </code>
                Now add a <code>title</code> attribute:
                <code class="first">
                    node.title="Read Me!";
                </code>
                Now hover the mouse over this DIY box to see the effect of this <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statement</a>. Then right-click and choose "Inspect <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">Element</a>" to see the <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> you added to the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a>. 
                <br><br><a href="http://www.google.ca" id="testLink" target="testLink">This link</a> goes to <span>Google</span>. It has an <code>id</code> of "testLink". Can you enter commands in the browser console to redirect the link to <a href="http://www.facebook.com" title="http://www.facebook.com" target="www.facebook.com">facebook<span class="printonly"> [http://www.facebook.com]</span></a> instead?
            </p></div>
            <a name="e2.3.4"></a><div class="exercises"><h5>&lt;exercises section='2.3.4'&gt;</h5>
                <ol>
                    <li>Get the file <a href="http://localhost:8383/TextBook/examples/mood.html" target="examples" title="mood.html">mood.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and follow the instructions in the comments at the top. Here are the image files you will need (right click and save them to an appropriate folder):<br>
                        <img src="examples/images/happy.png" alt="happy" style="width:50px">
                        <img src="examples/images/neutral.png" alt="neutral" style="width:50px">
                        <img src="examples/images/sad.png" alt="sad" style="width:50px"></li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>
            <div class="sectionStart"><a name="2.4"></a><h2 id="sec2-4-0">2.4 Retrieving and Manipulating a List of Nodes</h2><p>If you are <span>comfortable</span> with indexed structures such as <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">arrays</a>, you can use several other powerful <code>document</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a>, including <code>querySelectorAll</code>. This method behaves just like <code>getElementById</code>, except that instead of passing it an <code>id</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a>, you pass it a <a href="http://www.w3schools.com/cssref/css_selectors.asp" title="http://www.w3schools.com/cssref/css_selectors.asp" target="www.w3schools.com">CSS Selector</a> and it returns a <a href="http://www.w3schools.com/dom/dom_nodelist.asp" title="http://www.w3schools.com/dom/dom_nodelist.asp" target="www.w3schools.com">NodeList</a> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> (an array-like structure) containing every <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> that matched the selector.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Go to the Sheridan College Wikipedia page, open the JavaScript console of your browser, and execute the following:
                <code class="first">document.querySelectorAll("p");</code>
                You should get a <a href="http://www.w3schools.com/dom/dom_nodelist.asp" title="http://www.w3schools.com/dom/dom_nodelist.asp" target="www.w3schools.com">NodeList</a> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> returned that contains all the <code>&lt;p&gt;</code> elements in the document. To get a particular one, use square brackets like this:
                <code class="first">document.querySelectorAll("p")[2];</code>
                Or like this:
                <code class="first">
                    var paragraphs = document.querySelectorAll("p");
                    <br>paragraphs[2];
                </code>
                Now try to get all the elements with the class name "body":
                <code class="first">document.querySelectorAll("p.body");</code>
            </p></div>
            <p>These methods can be handy if you want to make a change to a bunch of elements at once. Once you have them in a NodeList you can use a <a href="http://en.wikipedia.org/wiki/Control_flow#Loops" title="http://en.wikipedia.org/wiki/Control_flow#Loops" target="en.wikipedia.org">loop</a> to change them all.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">If you are reading on line, open the JavaScript console. Or you could go to a Wikipedia page and open the console there. Execute the following code:
                <code class="first">
                    var a = document.querySelectorAll("p");
                    <br>for (var i=0; i&lt;a.length; i++) 
                    <code class="new">
                        a[i].innerHTML="JavaScript Rules!";
                    </code>
                </code>
                Did the code do what you expected? Can you figure out how to select all the Do It Yourself boxes on this page and change their background color to red?
            </p></div>
            <a name="e2.4"></a><div class="exercises"><h5>&lt;exercises section='2.4'&gt;</h5>
                <ol>
                    <li>Go back to your solution to the multiple paragraphs exercise from section 2.3.1 and modify it so that after the paragraphs have been created, the user is asked for a CSS <a href="https://en.wikipedia.org/wiki/Property_(computer_science)" title="https://en.wikipedia.org/wiki/Property_(computer_science)" target="en.wikipedia.org">property</a> and a <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> in two separate prompts, and then the given property and value get set for all the paragraphs. For example if the user types "color" at the first prompt and "red" at the second, all the paragraphs should turn red. Repeat this until the user enters "quit" instead of a property name.
                        <br><br>If you don't yet have a working solution the the multiple paragraphs exercise, you can get <a href="http://localhost:8383/TextBook/examples/paragraphs.html" target="examples" title="paragraphs.html">paragraphs.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> - then you can at least complete the work in this question for a fixed number of paragraphs.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <!-- CHAPTER 3 -->
            <div class="sectionStart pageBreak"><a name="3."></a><h1 id="sec3-0-0">3. Functions and Events</h1><p>In the previous chapter you learned how to manipulate the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> to produce different kinds of output from a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> program. But you are still very limited in the kinds of input you can get from the user. This chapter will begin to change that.</p></div>
            

            <div class="sectionStart"><a name="3.1"></a><h2 id="sec3-1-0">3.1 The Basics</h2><p>Up to this point, you have only been using <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> on your web pages in an <a href="http://en.wikipedia.org/wiki/Imperative_programming" title="http://en.wikipedia.org/wiki/Imperative_programming" target="en.wikipedia.org">imperative programming</a> style, running scripts within a <code>&lt;script&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> as the page is loading. This is pretty limiting. Usually you want to make changes or interact with the user after the document is loaded, not while itâs loading. To do this, you need to <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declare</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> while the page loads and then execute them later in response to specific <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a>. </p></div>
            
            <div class="sectionStart"><a name="3.1.1"></a><h3 id="sec3-1-1">3.1.1 Declaring a Function</h3><div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Methods.</span> <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> are very similar to <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> although, as we shall see, there are also some very important differences.</p></div></div>
            
            <p>JavaScript functions are a lot like the methods, procedures, and functions found in most other languages. Here's an example of a JavaScript function declaration. 
                <code class="first">function hello() {
                    <code class="new">alert("Hello, world!");</code>
                    }
                </code>
            </p>
            <p>The above function has no parameters and no <a href="http://en.wikipedia.org/wiki/Return_statement" title="http://en.wikipedia.org/wiki/Return_statement" target="en.wikipedia.org">return value</a>. Note that the <a href="https://en.wikipedia.org/wiki/Syntax_(logic)" title="https://en.wikipedia.org/wiki/Syntax_(logic)" target="en.wikipedia.org">syntax</a> is almost identical to <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a> <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declaration</a> except that you use the keyword <code>function</code>, and you donât have to specify a return type. You also donât need to specify an <a href="http://en.wikipedia.org/wiki/Visibility_(computer_science)" title="http://en.wikipedia.org/wiki/Visibility_(computer_science)" target="en.wikipedia.org">access level</a> (public, private, etc.) or whether the function is <a href="http://en.wikipedia.org/wiki/Static_variable" title="http://en.wikipedia.org/wiki/Static_variable" target="en.wikipedia.org">static</a> or not â none of these things apply in JavaScript. </p>
            <p>Functions can be defined anywhere on the page, as long as they are inside a <code>&lt;script&gt;</code> element, but itâs good practice to define your functions in a <code>&lt;script&gt;</code> element at the top of the document, inside the <code>&lt;head&gt;</code> element. Itâs even better practice to define your functions (and the rest of your code) in a separate file or multiple separate files with a <code>.js</code> extension. Then you can load these files using the <code>src</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> of an empty <code>&lt;script&gt;</code> element, like this:
                <code class="first"><code>&lt;script type="text/javascript" src="js/hello.js"&gt;</code><code>&lt;/script&gt;</code></code>
            </p>
            <p>Note that a <code>&lt;script&gt;</code> element can be used in two ways - either you can put JavaScript code between the opening and closing tags, or you can leave the element empty and use a <code>src</code> attribute to load JavaScript code from an external file. But you cannot do both in the same <code>&lt;script&gt;</code> element. If you want to load some code from a file and put some directly on the page you will need two <code>&lt;script&gt;</code> elements.</p>
            <div class="sectionStart"><a name="3.1.2"></a><h3 id="sec3-1-2">3.1.2 Responding to an Event</h3><p>No matter where you define a function, it wonât execute unless you call it. Most JavaScript function calls are triggered in response to browser events. An event is an important milestone in the life of a page. Events are triggered whenever an element has finished loading, the user has resized the browser, an element has been clicked, the mouse has entered or left the page, a key has been pressed and so on. </p></div>
            
            <p>Any <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">HTML element</a> can be the source of an event. By default most events are ignored, but for any particular event that might occur to any particular element, you can give the browser a block of JavaScript <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statements</a> to execute when the event occurs. These statements can include a call to the function you defined.</p>
            <p>Hereâs an example:
                <code class="first"><code>&lt;p onclick="alert('You clicked me!');"&gt;</code> Click Me <code>&lt;/p&gt;</code></code>
            </p>
            <div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Events.</span> In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> GUI programming, you define listener <a href="http://www.w3schools.com/css/css_selectors.asp" title="http://www.w3schools.com/css/css_selectors.asp" target="www.w3schools.com">classes</a> which contain <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handlers (i.e. <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a>). In <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>, you just define the handlers (i.e. <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a>). </p></div>
            <p>The HTML code above creates a paragraph element with the text "Click Me". The <code>onclick</code> attribute contains a single JavaScript statement that should be executed when a click event happens (i.e. when the user clicks on the paragraph).  </p>
            <p>Note that the JavaScript statement has to be enclosed in quotation marks, like any attribute <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a>, and that because of this, the alert command has to use single quotes around the text in order to be <a href="https://en.wikipedia.org/wiki/Syntax_(logic)" title="https://en.wikipedia.org/wiki/Syntax_(logic)" target="en.wikipedia.org">syntactically</a> correct. Alternatively, since HTML and JavaScript both treat double and single quotes interchangeably, you could have written this:
                <code class="first"><code>&lt;p onclick='alert("You clicked me!");'&gt;</code> Click Me <code>&lt;/p&gt;</code></code>            
            </p>
            <p>You can put as many JavaScript statements as you want into the <code>onclick</code> attribute, as long as theyâre separated with semicolons. But if you need a lot of code there, you should probably define a function and put a call to it into the <code>onclick</code> attribute instead. The example below executes the <code>hello</code> function defined in the previous section when the heading is clicked. 
                <code class="first">&lt;h1 onclick="hello();"&gt;Click Me&lt;/h1&gt;</code>
            </p>
            <p>Other JavaScript mouse events are listed below.</p>
            <div class="table">
                <table>
                    <tbody><tr><td><code>ondblclick</code>:</td><td>Triggered when element is double-clicked</td></tr>
                    <tr><td><code>onmousedown, onmouseup</code>:</td><td>Triggered when a mouse button is pressed or released over the element</td></tr>
                    <tr><td><code>onmouseover, onmouseout</code>:</td><td>Triggered when mouse is moved into / out of the bounding box of an element</td></tr>
                    <tr><td><code>onmousemove</code>:</td><td>Triggered every time the mouse moves (even one pixel) while it is over the bounding box of an element. Watch out, this generates a lot of events!</td></tr>
                </tbody></table>
            </div>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Load <a href="http://localhost:8383/TextBook/examples/functions1.html" target="examples" title="functions1.html">functions1.html</a> and <a href="http://localhost:8383/TextBook/examples/functions2.html" target="examples" title="functions2.html">functions2.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> to see the above examples in action. The two pages have the same behavior but differ in where the <code>hello</code> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> is defined. One has it in a <code>&lt;script&gt;</code> tag, while the other has the function loaded from a separate file.
            </p></div>
            <a name="e3.1.2"></a><div class="exercises"><h5>&lt;exercises section='3.1.2'&gt;</h5>
                <ol>
                    <li>Edit <a href="http://localhost:8383/TextBook/examples/functions1.html" target="examples" title="functions1.html">functions1.html</a> (or <a href="http://localhost:8383/TextBook/examples/functions2.html" target="examples" title="functions2.html">functions2.html</a>) and alter it so that instead of popping up an alert when the heading is clicked, the user is asked for their name and then the message "Hello name" is displayed in the <code>&lt;p&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>. Make it so that each time a new name is entered, a new message appears without erasing the old one.</li>
                    <li>Try making the element respond to a different <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a>, such as <code>onmouseover</code> or <code>ondblclick</code>.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="3.1.3"></a><h3 id="sec3-1-3">3.1.3 Clicking on Buttons</h3><p>Clicking on text is all very well, but we should really be clicking on buttons. Clicking on buttons can be more intuitive to users, and the default style of buttons (color, text, size) changes on on mouse-overs or mouse-clicks to make them appear more active. </p></div>
            
            <p>You can define a button like this, where the <code>value</code> attribute holds the button text:
                <code class="first">
                    <code>&lt;input type="button" value="Press me"&gt;</code>
                </code>
            </p>
            <p>To make it respond to clicks, just add an <code>onclick</code> attribute, like this:
                <code class="first">
                    <code>&lt;input type="button" value="Press me" onclick="hello();"&gt;</code>
                </code>
            </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load <a href="http://localhost:8383/TextBook/examples/functions3.html" target="examples" title="functions3.html">functions3.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> to see the above example in action. Can you change the code so that the button text changes when it is clicked?</p></div>
            <a name="e3.1.3"></a><div class="exercises"><h5>&lt;exercises section='3.1.3'&gt;</h5>
                <ol>
                    <li>Create a web page that asks the user a true or false question and give them a button to click for each option. Display a success or fail message somewhere on the page in response to their click.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>
            <div class="sectionStart"><a name="3.1.4"></a><h3 id="sec3-1-4">3.1.4 Clicking on Text</h3><p>Another option to give the user a better <code>onclick</code> experience is to use a <code>&lt;span&gt;</code> element with the CSS <code>cursor</code> <a href="https://en.wikipedia.org/wiki/Property_(computer_science)" title="https://en.wikipedia.org/wiki/Property_(computer_science)" target="en.wikipedia.org">property</a> defined (and also possibly some <code>:hover</code> styles). This will style the click-able area like a link and make it more obvious that it can be clicked.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load <a href="http://localhost:8383/TextBook/examples/functions4.html" target="examples" title="functions4.html">functions4.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and click where it says "click me". Here is the relevant HTML code:
                <code class="first"><code>&lt;h1 id="heading"&gt;</code><br>
                    You can
                    <code class="new"><code>&lt;span class="clickable" onclick="changeSize()"&gt;</code>
                        <code class="new">click here</code>
                        <code>&lt;/span&gt;</code><br>
                        if you want.</code>
                    <code>&lt;/h1&gt;</code></code>
                The <code>clickable</code> <a href="http://www.w3schools.com/css/css_selectors.asp" title="http://www.w3schools.com/css/css_selectors.asp" target="www.w3schools.com">class</a> has <a href="http://www.w3schools.com/css/css_syntax.asp" title="http://www.w3schools.com/css/css_syntax.asp" target="www.w3schools.com">CSS style rules</a> that change the cursor and add other hover effects. 
                <br><br>
                See the <a href="http://www.w3schools.com/cssref/pr_class_cursor.asp" title="http://www.w3schools.com/cssref/pr_class_cursor.asp" target="www.w3schools.com">W3Schools CSS cursor Property</a> page and the <a href="http://www.w3schools.com/cssref/sel_hover.asp" title="http://www.w3schools.com/cssref/sel_hover.asp" target="www.w3schools.com">W3Schools CSS :hover Selector</a> pages for more info.
            </p></div>
            <div class="sectionStart"><a name="3.2"></a><h2 id="sec3-2-0">3.2 Parameters, Global Variables and Return Values</h2><div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Parameters and Return Values.</span> <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> can have parameters and <a href="http://en.wikipedia.org/wiki/Return_statement" title="http://en.wikipedia.org/wiki/Return_statement" target="en.wikipedia.org">return values</a>, just like <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a>. But because the language is weakly typed, you donât have to define parameter or return types ahead of time. A function can also be inconsistent about what type it returns for different calls, or even whether it returns something or not. </p></div></div>
            
            <p>Just like Java methods, functions can have parameters and return values. But in JavaScript, there is no need to declare any types for anything. Hereâs an example:
                <code class="first">function foo(x, y, z) {
                    <code class="new">return x+y+z;</code>
                    }</code>
            </p>
            <p>The <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> above takes three parameters and returns the result of "adding" them together. What gets returned depends on the type of what was passed in. </p>
            <p>If a function finishes without encoutering a return <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statement</a>, it will return the special <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> <code>undefined</code> by default.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Open a browser and go to the console. Enter the foo function above (use shift-enter for multiple-line commands like this). Now try the following calls to the function foo.
                <code class="first">foo(1,2,3) 	
                    <br>foo(1,"2",3) 	
                    <br>foo(1,2,"3") 	
                </code>
                Can you explain why the <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> returns different results for each call?
            </p></div>


            <div class="sectionStart"><a name="3.2.1"></a><h3 id="sec3-2-1">3.2.1 Variable Scope</h3><div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Scope.</span> <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> has block-level <a href="http://en.wikipedia.org/wiki/Scope_(computer_science)" title="http://en.wikipedia.org/wiki/Scope_(computer_science)" target="en.wikipedia.org">scope</a>, meaning that any <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variable</a> is <a href="http://en.wikipedia.org/wiki/Local_variable" title="http://en.wikipedia.org/wiki/Local_variable" target="en.wikipedia.org">local</a> to the code block in which it was declared. If you <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declare</a> a variable in a while <a href="http://en.wikipedia.org/wiki/Control_flow#Loops" title="http://en.wikipedia.org/wiki/Control_flow#Loops" target="en.wikipedia.org">loop</a>, that variable is local to the while loop. <br><br><a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> has <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global</a> and <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> level scope, but not block-level scope. This means that if you declare a variable in a while loop inside a function, that variable can still be accessed anywhere within the function.</p></div></div>
            

            <p><a href="http://en.wikipedia.org/wiki/Scope_(computer_science)" title="http://en.wikipedia.org/wiki/Scope_(computer_science)" target="en.wikipedia.org">Variable scope</a> refers to the parts of a program that can see a given <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variable</a>. If a variable can only be accessed within a give code block, the variable is <a href="http://en.wikipedia.org/wiki/Local_variable" title="http://en.wikipedia.org/wiki/Local_variable" target="en.wikipedia.org">local</a> to that code block. If it can be accessed anywhere in the program it is <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global</a>.</p>
            <p>Variables declared inside functions or listed as parameters are local to the function. These variables are created when the function is called and destroyed when it finishes. Variables declared outside of functions are always global, which means they are accessible to all functions on the page.</p>
            <p>If a function contains a variable name that is the same as a <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global variable</a> name, <a href="http://en.wikipedia.org/wiki/Reference_(computer_science)" title="http://en.wikipedia.org/wiki/Reference_(computer_science)" target="en.wikipedia.org">references</a> to that name within the function will always be to the <a href="http://en.wikipedia.org/wiki/Local_variable" title="http://en.wikipedia.org/wiki/Local_variable" target="en.wikipedia.org">local variable</a>.</p>
            <div class="JC" style="float: right; width: auto;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Hoisting.</span> JavaScript also has a strange process called <a href="http://www.sitepoint.com/back-to-basics-javascript-hoisting/" title="http://www.sitepoint.com/back-to-basics-javascript-hoisting/" target="www.sitepoint.com">hoisting<span class="printonly"> [http://www.sitepoint.com/back-to-basics-javascript-hoisting/]</span></a> which is unlike anything in <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>. In a nutshell, it doesn't matter where in the <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> you <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declare</a> a <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variable</a>, <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> always acts as if the <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declaration</a> was at the top (i.e. it "hoists" the declaration to the top of the function). This means that you can use a <a href="http://en.wikipedia.org/wiki/Local_variable" title="http://en.wikipedia.org/wiki/Local_variable" target="en.wikipedia.org">local variable</a> even before you've declared it.</p></div>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Load <a href="http://localhost:8383/TextBook/examples/functions5.html" target="examples" title="functions5.html">functions5.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> into a browser and press the buttons to see what they do. Take a look at the code. The buttons are all linked to a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> in their <code>onclick</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a>, but they each pass a different parameter to the function. The function accesses a <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global variable</a> to keep track of the current count.</p></div>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Here is an example from <a href="http://localhost:8383/TextBook/examples/functions5.html" target="examples" title="functions5.html">functions5.html</a> showing global and local variables.
                </p><table><tbody><tr>
                        <td>
                            <code class="first">
                                var current = 0; 			
                                <br>function add(inc) { 				
                                <code class="new">
                                    var newVal = current + inc; 	
                                    <br>current = newVal;
                                    <br>alert(current); 
                                </code>
                                }
                            </code>
                        </td>
                        <td>
                            <code class="first">
                                â current is global<br>
                                â inc is local<br>
                                â newVal local<br>
                            </code>
                        </td>
                    </tr>
                </tbody></table>
                <p class="break">Load <a href="http://localhost:8383/TextBook/examples/functions5.html" target="examples" title="functions5.html">functions5.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and press a button. Now open a console window (F12) and type the following expressions followed by enter:
                    <code class="first">current
                        <br>newVal
                        <br>inc
                    </code>
                    Explain the result returned from each expression.
                </p>
            <p></p></div>

            <div class="sectionStart"><a name="3.2.2"></a><h3 id="sec3-2-2">3.2.2 Watch Out!!!</h3><p>There is a big gotcha with variable <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declaration</a> which we have been able to ignore until now, but it's time to point it out. The issue concerns the fact that you donât actually have to <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declare</a> variables at all in JavaScript. Variables will automatically be declared for you the first time you assign something to them. But it is very bad practice to not declare a variable because if you donât, the variable will be created with global <a href="http://en.wikipedia.org/wiki/Scope_(computer_science)" title="http://en.wikipedia.org/wiki/Scope_(computer_science)" target="en.wikipedia.org">scope</a>.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Change the code for <a href="http://localhost:8383/TextBook/examples/functions5.html" target="examples" title="functions5.html">functions5.html</a> so that the two occurrences of the keyword <code>var</code> are removed. Now load the page in a browser and press a button. Then open a console window (F12) and type the following expressions followed by enter (try to predict the result in each case before you do):
                <code class="first">current
                    <br>newVal
                    <br>inc
                </code>
                Explain why the results are different from the results in the last DIY box.
            </p></div>
            <p>Automatic variable declaration can cause confusion, not to mention hard-to-find bugs (see the Java connection box below). But some of the problems go away if you make it standard practice to <span class="bold">always declare all variables using the <code>var</code> keyword</span>. </p>
            <div class="JC" style="width: auto;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Undeclared Variables.</span> Java requires that every variable must be declared before it is used. JavaScript, on the other hand, will automatically declare a new global variable for you if you forget to declare it yourself. 
                <br><br>Because of this, some things that would be syntax errors in Java are legal in JavaScript:
                <code class="first">int myvar = 0; // Java variable declaration.
                    <br>myvsr = 10;   // Error stops compilation.
                    <br>
                    <br>var myvar = 0;	// JavaScript variable declaration
                    <br>myvsr = 10;	// Creates new global variable. No error.
                </code>
                <br><span class="bold">Comments.</span> As shown above, you can add comments to <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> in the same way as you would in <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> (<code>// ...</code> for single line comments, or <code>/* ... */</code> for multi-line comments.)</p></div>
            <a name="e3.2.2"></a><div class="exercises"><h5>&lt;exercises section='3.2.2'&gt;</h5>
                <ol>
                    <li>Open <a href="http://localhost:8383/TextBook/examples/messaging.html" target="examples" title="messaging.html">messaging.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>. Read the instructions in the comments that appear at the top of the page source and finish the <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web app</a> according to these instructions.</li>
                    <li>Create a page with a single <code>&lt;div&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> with a fixed width and height and a border around it. Include a <code>&lt;p&gt;</code> element underneath it with an <code>id</code> so you can use it as output. Use the <code>onmousemove</code> <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> on the <code>&lt;div&gt;</code> element to count the number of times the event is triggered and display the count in the <code>&lt;p&gt;</code> element.</li>
                    <li>Open <a href="http://localhost:8383/TextBook/examples/catchTheRabbit.html" target="examples" title="catchTheRabbit.html">catchTheRabbit.html</a> from the example pack. Read the instructions in the comments that appear at the top of the page source and finish the web app according to these instructions. (Note that this web app has an accompanying image and CSS file which you must also download - you can get to these files by clicking on them in through "page source" on most browsers.)</li>
                    <li>Go back to the <a href="http://localhost:8383/TextBook/examples/moveme.html" target="examples" title="moveme.html">moveme.html</a> file from the sample pack. In previous exercises, you used <code>prompt</code> dialogues to get the user to move the ball around in response to U, D, L and R. Now you should add buttons to the page for up, down, left and right and move the ball in response.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="3.3"></a><h2 id="sec3-3-0">3.3 Application: Drop-down Menus</h2><p>You see drop-down menus all over the web, on sites designed for both desktop and mobile viewing. Modern desktop sites often contain "mega-menus" that are rich with structured information and links, as shown below:</p></div>
            
            <div style="text-align:center;"><img class="fullsize" alt="drop down menu" src="images/dropdownmenu.jpg" style="margin: auto; width: 243px;"></div>
            <p>These mega-menus sometimes pop up when you click a button or tab, and sometimes when you mouse over a tab. To see how this is done, go to a site with a menu like this (e.g. <a href="http://www.bostonglobe.com" title="http://www.bostonglobe.com" target="www.bostonglobe.com">The Boston Globe<span class="printonly"> [http://www.bostonglobe.com]</span></a> or <a href="http://www.ctv.ca" title="http://www.ctv.ca" target="www.ctv.ca">CTV<span class="printonly"> [http://www.ctv.ca]</span></a>), right click the menu once itâs popped up and "inspect <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>". You'll find it's just a <code>&lt;div&gt;</code> element (or similar) positioned cleverly, and then shown and hidden by a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> using either the CSS <code>visibility</code> or <code>display</code> <a href="https://en.wikipedia.org/wiki/Property_(computer_science)" title="https://en.wikipedia.org/wiki/Property_(computer_science)" target="en.wikipedia.org">property</a>. Sometimes the JavaScript function also changes the style of the button to match the drop down menu style and indicate which menu is being displayed.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">The file <a href="http://localhost:8383/TextBook/examples/dropDownMenu.html" target="examples" title="dropDownMenu.html">dropDownMenu.html</a> in the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> shows an example of drop down menus in action, but on a smaller page with source code that should be easier to read.  Note that the "catch the rabbit" menu won't actually play the game unless you include a working <code>catchTheRabbit.js</code> file (the solution to a previous exercise).
                <br><br>Explore this file to see how the design works. Take note of the CSS styling used on the menus and buttons (in particular, the <code>cursor</code> <a href="https://en.wikipedia.org/wiki/Property_(computer_science)" title="https://en.wikipedia.org/wiki/Property_(computer_science)" target="en.wikipedia.org">property</a>). 
            </p></div>
            <a name="e3.3"></a><div class="exercises"><h5>&lt;exercises section='3.3'&gt;</h5>
                <ol>
                    <li>The file <a href="http://localhost:8383/TextBook/examples/sideMenus.html" target="examples" title="sideMenus.html">sideMenus.html</a> in the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> contains some starter code. When you view this file you will see what the page is supposed to look like when the user clicks menu 1. See if you can add <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> and make other changes so that when the page starts, the menus are not highlighted, but menu 1 pops up when the user clicks the button and hides itself again when the user clicks again. Now add the other two menus to <a href="http://localhost:8383/TextBook/examples/sideMenus.html" target="examples" title="sideMenus.html">sideMenus.html</a>. The content of these menus is not important. </li>
                    <li>Now try to get the menus in <a href="http://localhost:8383/TextBook/examples/sideMenus.html" target="examples" title="sideMenus.html">sideMenus.html</a> to respond to mousing over and mousing away from the buttons and/or menus. This is actually a little trickier to get right than the first version.</li>
                    <li>The file <a href="http://localhost:8383/TextBook/examples/dropdownMobileExercise.html" target="examples" title="dropdownMobileExercise.html">dropdownMobileExercise.html</a> in the example pack (with its companion CSS file) contains some starter code for a simple mobile web site (view it in a narrow browser to see what it would look like on a phone). Add code to this site so that when it is loaded, the paragraphs and the list of links do not appear at first. When the user clicks on a heading, it should open the corresponding content. As a bonus see if you can get it to close the other paragraphs before opening the new one.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>
            <!-- CHAPTER 8-->
            <div class="sectionStart"><a name="3.4"></a><h2 id="sec3-4-0">3.4 Forms and Functions</h2><div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Graphical User Interface (GUI).</span> <a href="http://www.w3schools.com/html/html_forms.asp" title="http://www.w3schools.com/html/html_forms.asp" target="www.w3schools.com">HTML Forms</a> provide a set of GUI input components simlar to any other system you may have used in <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>. For example, many <code>javax.swing</code> input components (check boxes, radio buttons, drop down lists, text input <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a>, etc.) have counterparts in HTML/<a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>. And Java Android apps use <a href="https://en.wikipedia.org/wiki/Xml" title="https://en.wikipedia.org/wiki/Xml" target="en.wikipedia.org">XML</a>, a <a href="https://en.wikipedia.org/wiki/Markup_language" title="https://en.wikipedia.org/wiki/Markup_language" target="en.wikipedia.org">Markup Language</a> similar to like HTML, to configure their GUI interfaces.</p></div></div>
            
            <p>A <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web app</a>, whatever job it is designed to do, needs to be able to have a dialog with the user. In previous chapters you learned several simple ways of interacting with the user on the client side using <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> popups, HTML buttons, and <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a> like <code>onclick</code>. <a href="http://www.w3schools.com/html/html_forms.asp" title="http://www.w3schools.com/html/html_forms.asp" target="www.w3schools.com">HTML forms</a> provide a richer set of tools for getting user input.</p>

            <p>You were introduced to the basic HTML form <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> in your previous web design courses, but you may need a review. Try the activities below, and if you need any help brushing up on this stuff, read the <a href="http://www.w3schools.com/html/html_forms.asp" title="http://www.w3schools.com/html/html_forms.asp" target="www.w3schools.com">w3Schools HTML Forms</a> section. You might also want to look at the Forms section of the <a href="http://www.w3schools.com/tags/ref_eventattributes.asp" title="http://www.w3schools.com/tags/ref_eventattributes.asp" target="www.w3schools.com">w3schools HTML Events</a> page.</p>
            <a name="e3.4"></a><div class="exercises"><h5>&lt;exercises section='3.4'&gt;</h5>
                <img class="halfsize" src="images/basicform.png" alt="basic form" style="float: right; width: 102.545px;">
                <ol>
                    <li>Create an HTML page to display the "registration form" shown at right. A solution is given in <a href="http://localhost:8383/TextBook/examples/basicForm.html" target="examples" title="basicForm.html">basicForm.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>.</li>
                    <li>Create a simple form that (when scripted with <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>) would allow the user to convert Canadian dollars to another currency of your choice. Try to make good use of the number type and <code>&lt;output&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> from <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a>.</li>
                    <li>Create a shopping cart confirmation page, according to the specifications given below. (In a later exercise, you will add JavaScript code to implement the "recalculate" button.)
                        <ol class="sublist">
                            <li>Present 2 items along with their prices, with text input elements to show the current quantities.</li>
                            <li>Allow users to enter a promotional code in a text input element.</li>
                            <li>Allow users to choose standard delivery ($4.99) or expedited delivery ($19.99)</li>
                            <li>Allow users to separately select gift wrapping ($9.99), insurance (10% of the purchase price before tax and discounts), and rewards membership (free).</li>
                            <li>Present the tax (13%) and total at the bottom.</li>
                            <li>Give them 3 buttons: reset, recalculate, and submit</li>
                        </ol>
                </li></ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="3.4.1"></a><h3 id="sec3-4-1">3.4.1 Responding to Form Events</h3><p>Just like any other <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">HTML element</a>, a form element can be configured to execute JavaScript <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statements</a> in response to various events.</p></div>
            
            <p>Here is a partial list of events that form elements can respond to.</p>
            <div class="table"> 
                <table>
                    <tbody><tr><td><code>onclick </code>:</td><td>Triggered when the user clicks the element</td></tr>
                    <tr><td><code>onchange</code>:</td><td>Triggered when the value of the element changes (e.g. when the user presses enter or tabs away from the element)</td></tr>
                    <tr><td><code>oninput</code>:</td><td>Triggered on every act of input (e.g. every key stroke)</td></tr>
                    <tr><td><code>onmouseover</code>:</td><td>Triggered when the mouse pointer moves over the element</td></tr>
                    <tr><td><code>onmouseout</code>:</td><td>Triggered when the mouse pointer leaves the element</td></tr>
                    <tr><td><code>onfocus</code>:</td><td>Triggered when the user clicks or tabs to an element. When an element is selected, that element is said to have focus. Typically only form elements and hyperlinks can have the focus, and only one element at a time can have it.</td></tr>
                    <tr><td><code>onblur</code>:</td><td>Triggered when the element loses focus. </td></tr>
                </tbody></table>
            </div>
            <p>You can process a form element event in much the same way as you process any other event, by including some JavaScript code in the attribute for that event, as shown below.
                <code class="first"><code>&lt;input type="radio" onclick="<span class="bold">alert('clicked!');</span>"&gt;</code></code>
            </p>
            <p>The JavaScript code in bold above will be executed when the radio button is clicked. </p>
            <p>Notice that the <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a> passed to the alert <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> is written with single quotes instead of double quotes. This is so it can be placed within the double quotes required by the <code>onclick</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> without causing a <a href="http://en.wikipedia.org/wiki/Syntax_error" title="http://en.wikipedia.org/wiki/Syntax_error" target="en.wikipedia.org">syntax error</a>. </p>
            <h4>Aside: The Submit Event</h4>
            <p>One final event you may need to know about is <code>onsubmit</code>. This event applies to <code>&lt;form&gt;</code> elements, rather individual <code>&lt;input&gt;</code> elements, and it is triggered whenever a form is submitted. A form is submitted either when the user presses a <code>submit</code> button (if you have one) or when they press <code>enter</code> inside a text input element.  </p>
            <p>If the form's purpose is to send data to a server, you can use this event to do some JavaScript processing to make sure the data they entered is ok, then return <code>true</code> if you want to allow the user to submit the form, or <code>false</code> if you want to prevent it.</p>
            <p>For client side web apps, you usually don't want the form to be submitted anywhere, which is why you don't specify an <code>action</code> attribute on the <code>&lt;form&gt;</code> element, and why you don't usually have a submit button. But with no <code>action</code> attribute, if the form gets submitted somehow, it will trigger a page reload which will reset the page and mess up the running of your app. To prevent this, you could just not bother with the <code>&lt;form&gt;</code> tags, or you could add <code>return false;</code> to the <code>onsubmit</code> event:
                <code class="first">&lt;form onsubmit="return false;"&gt;</code>
            </p>
            <div class="sectionStart"><a name="3.4.2"></a><h3 id="sec3-4-2">3.4.2 Retrieving Form Elements</h3><p>In order to properly respond to many form events, you need to be able to get the form elements from the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a>. You can do this by assigning an <code>id</code> attribute to each one and using <code>document.getElementById</code>. This is the best choice if you have elected not to use <code>&lt;form&gt;</code> tags (see previous section). But the <code>document</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> also contains a <code>forms</code> <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> that lets you access forms and their elements using their <code>name</code> attributes. This is the standard <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a> of form access in JavaScript.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load <a href="http://localhost:8383/TextBook/examples/basicForm.html" target="examples" title="basicForm.html">basicForm.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> into Chrome and take a look at the code. Notice that the <code>&lt;form&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> has the name <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> set to <code>form1</code>. Try the following in the Chrome JavaScript console:
                <code class="first">
                    document.forms
                    <br>document.forms["form1"]
                    <br>document.forms["form1"]["name"]
                    <br>document.forms["form1"][0]
                </code>
                Make sure you understand the results before you move on.  What is the difference between the result of the first and second expressions? What is the difference between the third and fourth expressions?<br><br>

                The third and fourth expressions above get you a particular <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">node</a> from the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> (itâs as if you had used <code>getElementById</code>). So you can manipulate it like this:
                <code class="first">
                    document.forms["form1"]["name"].style.backgroundColor="red"
                </code>
                Or like this
                <code class="first">
                    var node = document.forms["form1"]["name"];
                    node.style.backgroundColor="red";
                </code>
            </p></div>
            <div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Object Syntax.</span> You can access the <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a> of a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> using dot notation just like in <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, but itâs often considered best practice to use <a href="http://en.wikipedia.org/wiki/Associative_array" title="http://en.wikipedia.org/wiki/Associative_array" target="en.wikipedia.org">associative array</a> notation.</p></div>
            <p>Recall that when you access an objectâs fields, you can use either the dot operator or square brackets (i.e. <code>object.field</code> or <code>object["field"]</code>). It is considered good practice by many JavaScript programmers to use the square bracket (<a href="http://en.wikipedia.org/wiki/Associative_array" title="http://en.wikipedia.org/wiki/Associative_array" target="en.wikipedia.org">associative array</a>) notation to access named elements from the DOM. This is because sometimes the names can contain characters that would cause problems when using the dot operator. </p>
            <p>So to access a named input element from a named form, use the following  formula, where <code>formName</code> and <code>elementName</code> match the <code>name</code> attributes of the form and element respectively: 
                <code class="first">document.forms["formName"]["elementName"] </code>
                To access an input element that is not part of a form, just give it an id and retrieve it using <code>document.getElementById</code>.</p>

            <a name="e3.4.2"></a><div class="exercises"><h5>&lt;exercises section='3.4.2'&gt;</h5>
                <ol>
                    <li>Create a simple form with 3 text input <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a>. Use the <code>onmouseover</code> and <code>onmouseout</code> <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a> to temporarily change the background color of each text input element as the mouse glides over them. </li>
                    <li>Create a text input element with a light gray background. When the user clicks in the text input element to enter text, the background should change to white. When they leave the text input element, it should revert to light gray again. </li>
                    <li>Add to exercise 2 so that when the user changes the text input element, a thank you message appears either in a dialog box or somewhere in the HTML document.</li>
                    <li>Add a night/day button to <a href="http://localhost:8383/TextBook/examples/basicForm.html" target="examples" title="basicForm.html">basicForm.html</a>. When clicked it should toggle between two different color schemes for the page â one dark and one light. Be sure to change form colors as well as.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="3.4.3"></a><h3 id="sec3-4-3">3.4.3 Accessing Form Contents</h3><p>To create a <a href="http://en.wikipedia.org/wiki/Client-side" title="http://en.wikipedia.org/wiki/Client-side" target="en.wikipedia.org">client-side</a> <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web application</a>, you need to be able to access and process the user input that is stored in the form. For almost all input elements (text boxes, numbers, dates, etc.) you can access the <code>value</code> attribute to find out what content the user has entered. This attribute always contains a string representing the data the user entered. </p></div>
            

            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load <a href="http://localhost:8383/TextBook/examples/basicForm.html" target="examples" title="basicForm.html">basicForm.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> into Chrome, type something into the password field, then open a Javascript console and try this: 
                <code class="first">document.forms["form1"]["password"].<span>value</span></code>
                Congratulations, you are now accessing user input. You can also change form contents like this:
                <code class="first">document.forms["form1"]["name"].<span>value</span> = "Type Here"</code>
            </p></div>
            <p>If the form element is of type <code>radio</code> or <code>checkbox</code>, itâs a little more complicated because what you get back from <code>document.forms["formID"]["elementName"]</code> is an <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">array</a> of elements. You have to specify the index number of the particular element in the group.  The first radio button in the group will be index 0, then 1, etc. You can access the <code>checked</code> field to get a <a href="http://en.wikipedia.org/wiki/Boolean_data_type" title="http://en.wikipedia.org/wiki/Boolean_data_type" target="en.wikipedia.org">Boolean</a> <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> (<code>true</code> if the button is checked, <code>false</code> otherwise).</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load <a href="http://localhost:8383/TextBook/examples/basicForm.html" target="examples" title="basicForm.html">basicForm.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> into Chrome. Then try this in the JavaScript console:
                <code class="first">document.forms["form1"]["interests"]</code>
                You should get an array of checkboxes back. Now try this to get the second checkbox.
                <code class="first">document.forms["form1"]["interests"][1]</code>
                Finally, try this:
                <code class="first">
                    if (document.forms["form1"]["interests"][0].checked)    
                    <code class="new">
                        alert("I knew you liked gardening!");
                    </code>
                </code>
                What happened? Probably nothing. Why? What do you have to do to make the alert box pop up?
            </p></div>
            <a name="e3.4.3"></a><div class="exercises"><h5>&lt;exercises section='3.4.3'&gt;</h5>
                <ol>
                    <li>Change <a href="http://localhost:8383/TextBook/examples/basicForm.html" target="examples" title="basicForm.html">basicForm.html</a> so that when the form is first loaded, the text "Choose a User Name" appears in the text <span>field</span>. When the user clicks in the text <span>field</span>, this text should disappear. When they leave the text <span>field</span>, if they have typed something, it should stay. If they have not typed anything, the text"Choose a User Name" should be put back in the box. (Note that this is a good exercise for a beginning <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> programmer, but if you really want to implement this behavior in a text box, you're better off using the new <span>HTML5 <code>placeholder</code> attribute</span>.)</li>
                    <li>Change <a href="http://localhost:8383/TextBook/examples/basicForm.html" target="examples" title="basicForm.html">basicForm.html</a> so that if the user tries to uncheck the "skiing" box, it pops up a confirmation dialog that asks "are you sure you donât like skiing?". If the user presses OK, the box should stay unchecked. If the user presses "cancel" to box should remain checked. Note that if the user unchecks the box, then re-checks it, no confirmation dialog should appear.</li>
                    <li>Change <a href="http://localhost:8383/TextBook/examples/basicForm.html" target="examples" title="basicForm.html">basicForm.html</a> to add "check all" and "uncheck all" buttons to the interests section.</li>
                    <li>Replace the "check all" and "uncheck all" buttons from the last exercise with a new "all" checkbox. When selected, this checkbox should check or uncheck all the other boxes. When all interests are manually selected, the "all" checkbox should automatically check itself. If even one interest is deselected, the "all" checkbox should automatically uncheck itself.</li>
                    <li>One of the main uses for JavaScript used to be validating forms before they were submitted to the server (i.e. making sure all <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a> were filled in, checking that numeric fields contained numbers, etc.) These days most of this validation can be done by using the new <a href="http://www.w3schools.com/html/html5_form_input_types.asp" title="http://www.w3schools.com/html/html5_form_input_types.asp" target="www.w3schools.com">HTML5 input types</a> and <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attributes</a>. But there is still a role for JavaScript. For example, suppose that the user of <a href="http://localhost:8383/TextBook/examples/basicForm.html" target="examples" title="basicForm.html">basicForm.html</a> is only allowed to check up to 2 interests. Write a JavaScript <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> to check this condition and call it from the <code>onsubmit</code> <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> of the <code>&lt;form&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> (<code>onsubmit="return yourFunction()"</code>). The function should pop up an error alert and return <code>false</code> if more than 2 interests are checked. </li>
                    <li>Now fix the form so that the user is alerted and prevented from checking more than 2 boxes.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="3.4.4"></a><h3 id="sec3-4-4">3.4.4 Form-based Client-side Web Apps</h3><p>When you harness the power of forms, you can create client-side web apps with almost the same input capabilities as any desktop GUI app.</p></div>
            
            <p>An example of a very simple client-side web app is shown in the <a href="http://localhost:8383/TextBook/examples/additionQuiz.html" target="examples" title="additionQuiz.html">additionQuiz.html</a> file from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>. This program contains two JavaScript functions. The first function creates and presents a new question to the user and clears out any old answers or feedback, while the second checks the userâs answer and gives feedback. Each of these functions is called by a different button press.
            </p><p>Notice the use of the <code>&lt;span&gt;</code> elements with unique <code>id</code>s. They allow the values for the two operands to be set in a JavaScript function without rewriting the entire paragraph element that contains them.</p>
            <p>Notice also the use of the <code>onload</code> event in the <code>&lt;body&gt;</code> element. This event is triggered after the <code>&lt;body&gt;</code> is finished loading, and calls the function to set the first question. </p>
            <a name="e3.4.4"></a><div class="exercises"><h5>&lt;exercises section='3.4.4'&gt;</h5>
                <ol>
                    <li>Get the <a href="http://localhost:8383/TextBook/examples/arithmetic.html" target="examples" title="arithmetic.html">arithmetic.html</a> file from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>. This file is the interface for a very simple calculator with five <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a>. Add <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> code (as well as any necessary <a href="http://en.wikipedia.org/wiki/HTML_element" title="http://en.wikipedia.org/wiki/HTML_element" target="en.wikipedia.org">HTML tags</a> or <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attributes</a>) so that when the user presses the "Do It" button, the selected arithmetic is performed and the result is placed in the read only text box to the right of the equals sign.</li>
                    <li>Modify your solution from the last question so that any time the use changes any of the form <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a>, the result updates. You will need to use the <code>onchange</code> and/or <code>oninput</code> <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a> for this. Now that the answer is automatically refreshing, you don't need the "Do It" button any more, so you can remove it.</li>
                    <li>Get the currency converter from the Section 3.4 Exercises working. When the user clicks "convert" it should display on the page the result of the conversion (you can look up the rate on line or just make something up if you like).</li>
                    <li>Get the shopping cart from the Section 3.4 Exercises working. When the user clicks "reset", they should be warned that the form is about to clear and get a chance to stop it. When the user clicks "recalculate", a function should be called that checks the quantities of the products and the various options the user has chosen, then displays the new total price with tax. Donât forget to use Math <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> to round to two decimal places.
                    </li>
                    <li><img src="images/shoppinglist.jpg" alt="shopping list app" class="halfsize" style="float: right; width: 84.5px;">Make a simple shopping list creation app. It should give the user a text box and a button to press. When they press the button, it should add the text they entered to a <code>&lt;table&gt;</code> element somewhere on the page. It should be a numbered list with numbers added automatically. The first column of the <a href="http://www.w3schools.com/html/html_tables.asp" title="http://www.w3schools.com/html/html_tables.asp" target="www.w3schools.com">table</a> should contain item numbers and the second column should contain the items the user entered. Try to make it so that the user can also hit Enter to create a new list item.</li>
                    <li>Now make the currency converter from Exercise 3 better: Use fieldsets, styling, and images to improve the look of the currency converter; Add drop down lists to allow the user to pick the "from" and "to" currency, then perform different calculations depending on what they choose; Make the converter robust so that if the user enter a non-numeric <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> it recovers gracefully, and make sure it always shows two digits for the cents <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> (e.g. it shows "01" instead of "1").</li>
                    <li>Make the shopping cart from Exercise 4 better: Use fieldsets, labels, images and/or drop down menus to improve the look and feel of the shopping cart confirmation page; Add a text area for shipping instructions; Make it robust so that if they enter non-numeric values in number fields it recovers gracefully.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>


            <!-- CHAPTER 4 -->
            <div class="sectionStart pageBreak"><a name="4."></a><h1 id="sec4-0-0">4. Graphics on the HTML5 Canvas</h1><p><a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> brings with it a number of new <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://en.wikipedia.org/wiki/Application_programming_interface" title="http://en.wikipedia.org/wiki/Application_programming_interface" target="en.wikipedia.org">APIs</a> that greatly increase the capabilities of JavaScript <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web apps</a>. For example it is now possible to access a user's location, store data locally and respond to drag-and-drop <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a>. One of the most important new JavaScript APIs is the new drawing API for the HTML5 <code>&lt;canvas&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>. This API allows JavaScript programmers to create interactive graphics and games that can execute on any browser (functionality that previously required a bulky plugin like Flash).</p></div>
            
            <p>The goal of this chapter is to give you all the raw materials you would need to implement a simple 2D game such as <a href="http://en.wikipedia.org/wiki/Pong" title="http://en.wikipedia.org/wiki/Pong" target="en.wikipedia.org">Pong</a>. The chapter <a href="http://en.wikipedia.org/wiki/Focus_(computing)" title="http://en.wikipedia.org/wiki/Focus_(computing)" target="en.wikipedia.org">focuses</a> on the basics, not the details. For full details, see the <a href="http://www.w3schools.com/tags/ref_canvas.asp" title="http://www.w3schools.com/tags/ref_canvas.asp" target="www.w3schools.com">w3schools Canvas Reference</a>.</p>

            <div class="sectionStart"><a name="4.1"></a><h2 id="sec4-1-0">4.1 Canvas Basics</h2><p>To access the 2D drawing <a href="http://en.wikipedia.org/wiki/Application_programming_interface" title="http://en.wikipedia.org/wiki/Application_programming_interface" target="en.wikipedia.org">API</a>, you need a <code>&lt;canvas&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> somewhere on your HTML page. This element should have an <code>id</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> as well as <code>height</code> and <code>width</code> attributes to specify its size in pixels, like this:
                <code class="first">
                    &lt;canvas id='myCanvas' height='500' width='250'&gt;&lt;/canvas&gt;
                </code>
            </p></div>
            
            <p>Note that <code>&lt;canvas&gt;</code> is not an empty element. You do need a closing tag. There is no need to include any content between the tags, though some developers put a message there which will display on older browsers, saying something like, "Sorry, your browser does not support the <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a>."</p>
            <p>By default a canvas just appears as a blank space on your page. But if you style it with CSS to give it a border and background color, you will be able to see it.</p>
            <p>There are two steps to drawing on a <code>&lt;canvas&gt;</code> element. First you have to retrieve the element from the DOM:
                <code class="first">
                    var c=document.getElementById("testCanvas");
                </code>
                Once you have it, you can change its style and attributes like any other element. But if you want to draw on it, you need to retrieve a drawing "context". The simplest context available is the "2d" context:
                <code class="first">
                    var ctx=c.getContext("2d");
                </code>
                The above line retrieves a special "drawing context" <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> that implements the 2D drawing API for your canvas.
            </p>

            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Here's an example <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a>, with a width of 400 pixels and a height of 100 pixels. It's CSS <code>width</code> <a href="https://en.wikipedia.org/wiki/Property_(computer_science)" title="https://en.wikipedia.org/wiki/Property_(computer_science)" target="en.wikipedia.org">property</a> has been set to <code>100%</code> so that it will stretch to fit the available space. It also has a border and a background color of white specified in CSS, and it has an <code>id</code> of "testCanvas" so we can easily retrieve it from a JavaScript program.
                <canvas id="testCanvas" width="400" height="100" style="width:100%;background-color:white;border:1px solid black;"></canvas>
                In the JavaScript console of your browser, try the following commands:
                <code class="first">
                    var c=document.getElementById("testCanvas");
                    <br>var ctx=c.getContext("2d");
                    <br>ctx.fillStyle="red";
                    <br>ctx.fillRect(125,25,150,50);
                </code>
                The first two lines retrieve the canvas and drawing context to <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> named <code>c</code> and <code>ctx</code> respectively. The third line sets a drawing color. Colors can be specified using any CSS color <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a>. The final line places a red rectangle in the middle of the canvas. The top left corner is at an <code>(x,y)</code> position of (125,25), the width is 150 and the height is 50 pixels. 
                <br><br>
                Following the above example, enter two more lines in the <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> console to create a black rectangle that fills the entire canvas.
                <br><br>
                Draw two overlapping rectangles in different colors, but with their alpha values set so that you can see the first rectangle through the second.
                <br><br>
                Draw the red rectangle again, but use <code>(-40,-40)</code> as its <code>(x,y)</code> location. Can you explain the result?
            </p></div>

            <a name="e4.1"></a><div class="exercises"><h5>&lt;exercises section='4.1'&gt;</h5>
                <ol>
                    <li>Set up an HTML page for a <a href="http://en.wikipedia.org/wiki/Pong" title="http://en.wikipedia.org/wiki/Pong" target="en.wikipedia.org">pong</a> game. Include a <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a> with a black background, a heading and some instructional information.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="4.2"></a><h2 id="sec4-2-0">4.2 Drawing Commands</h2><p>There are two basic kinds of drawing supported on the 2D drawing context (hereafter abbreviated <code>ctx</code>): "stroke" draws outlines and "fill" fills them in.</p></div>
            

            <div class="sectionStart"><a name="4.2.1"></a><h3 id="sec4-2-1">4.2.1 Rectangles and Text</h3><p>You have already seen the <code>ctx.fillRect()</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a>, but there is also a <code>ctx.strokeRect()</code> method that uses the same parameters to draw the outline of a rectangle instead of filling it in. There is also a <code>ctx.clearRect()</code> method that clears a rectangle to the CSS background color.</p></div>
            
            <p>When you do "fill" drawing, the <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a> uses the current contents of the <code>ctx.fillStyle</code> <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> to decide how to do the drawing. The <code>ctx.fillStyle</code> field can hold a color <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a> (any legal CSS color <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> is supported) or a special <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> representing a gradient or a pattern (for more information on <a href="http://www.w3schools.com/tags/canvas_createlineargradient.asp" title="http://www.w3schools.com/tags/canvas_createlineargradient.asp" target="www.w3schools.com">gradients</a> and <a href="http://www.w3schools.com/tags/canvas_createpattern.asp" title="http://www.w3schools.com/tags/canvas_createpattern.asp" target="www.w3schools.com">patterns</a> see the <a href="http://www.w3schools.com/tags/ref_canvas.asp" title="http://www.w3schools.com/tags/ref_canvas.asp" target="www.w3schools.com">w3Schools Canvas Reference</a>).When you do "stroke" drawing, the canvas uses the current contents of <code>ctx.strokeStyle</code>, which can take the same values as <code>ctx.fillStyle</code>. Another relevant field for stroke drawing is <code>ctx.lineWidth</code> which holds a number representing the thickness of the line to draw in pixels.</p>
            <p>If you want to draw text, there are <code>ctx.fillText()</code> and <code>ctx.strokeText()</code> methods. You can set the font by assigning a string representing a CSS font to the <code>ctx.font</code> field.</p>

            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Here's another <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a> with a <code>width</code> of 400 pixels, a <code>height</code> of 100 pixels and an <code>id</code> of "testCanvas2".
                <canvas id="testCanvas2" width="400" height="100" style="width:100%;background-color:white;border:1px solid black;"></canvas>
                In the JavaScript console of your browser, try the following:
                <code class="first">
                    var c=document.getElementById("testCanvas2");
                    <br>var ctx=c.getContext("2d");
                    <br>ctx.strokeStyle="#FF0000";
                    <br>ctx.lineWidth=10;
                    <br>ctx.strokeRect(125,25,150,50);	
                </code>
                Now add some text to the canvas:
                <code class="first">
                    <br>ctx.fillStyle="#0000FF"
                    <br>ctx.font="22px Arial";
                    <br>ctx.fillText("Hello, world!",135,55);
                </code>	
                Now try the following to clear part of the drawing:
                <code class="first">
                    ctx.clearRect(0,0,200,50);
                </code>
            </p></div>

            <div class="sectionStart"><a name="4.2.2"></a><h3 id="sec4-2-2">4.2.2 Where and When to Draw</h3><p>Drawing code should be placed in a <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> so that it can be called in response to an <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a>. Then you can, for example, draw in response to a button click or when someone mouses over the canvas.</p></div>
            
            <p>Often, though, you will want to draw on the canvas as soon as the page loads. You might think the right approach in this case is to not use a function, but simply  include the drawing commands inside a script <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>. The problem is that your code might execute before the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> is completely constructed. If that happens, the DOM <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">node</a> for the canvas might not be available at the time your code runs.</p>
            <p>The solution is to put the drawing code in a function and then call it in response to the <code>onload</code> event of the <code>&lt;body&gt;</code> element, like this:
                <code class="first">
                    &lt;body onload='draw()'&gt;
                </code>
                The <code>onload</code> event is fired once, just after the browser has finished constructing the DOM. You should use this event to execute any kind of initialization code, including canvas drawing.
            </p>
            <a name="e4.2.2"></a><div class="exercises"><h5>&lt;exercises section='4.2.2'&gt;</h5>
                <ol>
                    <li>Continue your <a href="http://en.wikipedia.org/wiki/Pong" title="http://en.wikipedia.org/wiki/Pong" target="en.wikipedia.org">pong</a> game setup. Use the rectangle and text drawing commands to draw the player's paddles, a net, and a score at the top of the screen. Put the drawing commands inside a <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> that is called in response to the <code>onload</code> <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a>.</li>
                    <li>Get the <a href="http://localhost:8383/TextBook/examples/canvasTestBed.html" target="examples" title="canvasTestBed.html">canvasTestBed.html</a> file from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>. Write a function that creates an 8x8 checker board pattern in the <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a> when the button 1 is clicked.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>
            <div class="sectionStart"><a name="4.2.3"></a><h3 id="sec4-2-3">4.2.3 Polygons</h3><p>If you want to draw a polygon other than a rectangle, you have to first trace a path on the canvas and then either <code>fill()</code> or <code>stroke()</code> it.</p></div>
            
            <p>Drawing a polygon has five steps:</p>
            <ol>
                <li>Begin the path with <code>ctx.beginPath()</code></li>
                <li>Move to the starting position with <code>ctx.moveTo()</code></li>
                <li>Trace out the path with <code>ctx.lineTo()</code></li>
                <li>Close the path with <code>ctx.closePath()</code> (this adds a line that goes back to your starting position)</li>
                <li>Draw the shape with either <code>ctx.fill()</code> or <code>ctx.stroke()</code></li>
            </ol>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Here's another <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a>, with an <code>id</code> of "testCanvas3".
                <canvas id="testCanvas3" width="400" height="100" style="width:100%;background-color:white;border:1px solid black;"></canvas>
                In the JavaScript console of your browser, try the following commands to draw an orange triangle:
                <code class="first">
                    var c=document.getElementById("testCanvas3");
                    <br>var ctx=c.getContext("2d");
                    <br>ctx.fillStyle="rgb(255,128,0)";
                    <br>ctx.beginPath();
                    <br>ctx.moveTo(200,20);
                    <br>ctx.lineTo(260,80);
                    <br>ctx.lineTo(140,80);
                    <br>ctx.closePath();
                    <br>ctx.fill();
                </code>	
                The context still remembers the path even after you have used it to draw a shape. So if you want to put an outline around your triangle you can do so without retracing the path:
                <code class="first">
                    ctx.strokeStyle="rgba(0,128,255,0.5)";
                    <br>ctx.lineWidth=10;
                    <br>ctx.stroke();
                </code>
                To draw a new shape, just begin a new path:
                <code class="first">
                    ctx.beginPath();
                    <br>ctx.moveTo(140,20);
                    <br>ctx.lineTo(260,20);
                    <br>ctx.lineTo(200,80);
                    <br>ctx.closePath();
                    <br>ctx.fillStyle="black";
                    <br>ctx.fill();
                </code>	
            </p></div>

            <a name="e4.2.3"></a><div class="exercises"><h5>&lt;exercises section='4.2.3'&gt;</h5>
                <ol>
                    <li>Get the <a href="http://localhost:8383/TextBook/examples/canvasTestBed.html" target="examples" title="canvasTestBed.html">canvasTestBed.html</a> file from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>. Write a <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> that draws a simple line drawing of a house on the screen when button 2 is clicked.</li>
                    <li>Extend the code you wrote for question 1 so that each time button 2 is clicked, a new house appears to the right of the last one drawn. (Hint: use a <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global variable</a> to keep track of the starting x-coordinate of the next house.)</li>
                    <li>In the <a href="http://localhost:8383/TextBook/examples/canvasTestBed.html" target="examples" title="canvasTestBed.html">canvasTestBed.html</a> file, write a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">javascript</a> function to draw a star in the top left corner of the <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a>. Add an <code>onclick</code> <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> to button 3 so that when it is clicked, a star is drawn.</li>
                    <li>Extend the code you wrote for question 3 so that when button 3 is clicked, a star is drawn at a <a href="http://en.wikipedia.org/wiki/Random_number_generation" title="http://en.wikipedia.org/wiki/Random_number_generation" target="en.wikipedia.org">random</a> position in a random color. (Hint: Generate random x and y <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a> using <code>Math.random()</code> and then add these values to the coordinates you use in the drawing functions.)</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="4.2.4"></a><h3 id="sec4-2-4">4.2.4 Circles and Curves</h3><p>The <code>ctx</code> object also contains methods for drawing circles and arcs, to be used alongside <code>ctx.beginPath()</code>, <code>ctx.fill()</code>, <code>ctx.stroke()</code> and the other path drawing methods.</p></div>
            
            <canvas id="radiancanvas" height="230" width="250" style="float:right;"></canvas>
            <script type="text/javascript">
                window.addEventListener("load", function () {
                    var canvas = document.getElementById("radiancanvas");
                    var ctx = canvas.getContext("2d");
                    ctx.font = "bold 16px Arial";
                    ctx.textAlign = "left";
                    ctx.fillText("Arc Angle Quick Reference", 5, 210);

                    ctx.beginPath();
                    ctx.moveTo(130, 100);
                    ctx.lineTo(70, 100);
                    ctx.moveTo(100, 130);
                    ctx.lineTo(100, 70);
                    ctx.stroke();

                    ctx.lineWidth = "3";
                    ctx.strokeStyle = "rgb(255,0,0)";
                    ctx.beginPath();
                    ctx.arc(100, 100, 50, 0, 2 * Math.PI, true);
                    ctx.stroke();

                    ctx.strokeStyle = "black";
                    ctx.font = "10px Arial";

                    ctx.beginPath();
                    ctx.moveTo(145, 100);
                    ctx.lineTo(155, 100);
                    ctx.stroke();
                    ctx.textAlign = "left";
                    ctx.textBaseline = "middle";
                    ctx.fillText("0 or 2 * Math.PI", 160, 100);

                    ctx.beginPath();
                    ctx.moveTo(100, 145);
                    ctx.lineTo(100, 155);
                    ctx.stroke();
                    ctx.textBaseline = "top";
                    ctx.textAlign = "center";
                    ctx.fillText("0.5 * Math.PI", 100, 160);

                    ctx.beginPath();
                    ctx.moveTo(45, 100);
                    ctx.lineTo(55, 100);
                    ctx.stroke();
                    ctx.textBaseline = "middle";
                    ctx.textAlign = "right";
                    ctx.fillText("Math.PI", 40, 100);

                    ctx.beginPath();
                    ctx.moveTo(100, 45);
                    ctx.lineTo(100, 55);
                    ctx.stroke();
                    ctx.textBaseline = "bottom";
                    ctx.textAlign = "center";
                    ctx.fillText("1.5 * Math.PI", 100, 40);
                });
            </script>
            <p>You can use the <code>ctx.arc()</code> method to draw a circle or part of a circle. You specify the center of the circle, its radius and then the starting and ending angle for your curve. These angles are specified in radians, which is an alternative to using degrees (in the same way that inches are an alternative to centimetres). When you work with radians, Ï radians (that's the Greek letter Pi, where Ïâ3.14) is equivalent to 180 degrees. So Ï/2 is 90 degrees, Ï/4 is 45 degrees, and so on. You can use the built in <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> constant <code>Math.PI</code> for this.</p>
            <p>At right is a quick <a href="http://en.wikipedia.org/wiki/Reference_(computer_science)" title="http://en.wikipedia.org/wiki/Reference_(computer_science)" target="en.wikipedia.org">reference</a> for common radian values to use in arc drawing. (The picture itself is actually a <code>&lt;canvas&gt;</code> element and the diagram is drawn using JavaScript.)</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Here's yet another <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a> with an <code>id</code> of "testCanvas4".
                <canvas id="testCanvas4" width="400" height="100" style="width:100%;background-color:white;border:1px solid black;"></canvas>
                In the JavaScript console of your browser, try the following commands to draw a pink circle:
                <code class="first">
                    var c=document.getElementById("testCanvas4");
                    <br>var ctx=c.getContext("2d");
                    <br>ctx.fillStyle="pink";
                    <br>ctx.beginPath();
                    <br>ctx.arc(200,50,45,0,Math.PI*2);
                    <br>ctx.closePath();
                    <br>ctx.fill();
                </code>	
                If you want half a circle, you should draw from Ï/2 to 3Ï/2.
                <code class="first">
                    ctx.strokeStyle="black";
                    <br>ctx.beginPath();
                    <br>ctx.arc(200,50,45,Math.PI/2,3*Math.PI/2);
                    <br>ctx.closePath();
                    <br>ctx.stroke();
                </code>
                <img src="images/Pacman.png" alt="<a href='http://en.wikipedia.org/wiki/Pac-Man' title='http://en.wikipedia.org/wiki/Pac-Man' target='en.wikipedia.org'>pac-man</a>" style="float:right;">
                Arcs are always drawn clockwise by default. What would you need to change in the above commands to draw the other half of the circle?
                <br><br>
                Can you clear the canvas and use the <code>ctx.arc()</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a> to draw <a href="http://en.wikipedia.org/wiki/Pac-Man" title="http://en.wikipedia.org/wiki/Pac-Man" target="en.wikipedia.org">Pac-Man</a>?			
            </p></div>
            <p>There are also commands available to draw curves as part of the path (that is, continuing from wherever your path left off). They are <code>ctx.arcTo()</code>, <code>ctx.quadraticCurveTo()</code> and <code>ctx.bezierCurveTo()</code>. There are also other advanced drawing commands are all discussed in full in the <a href="http://www.w3schools.com" title="http://www.w3schools.com" target="www.w3schools.com">w3Schools</a> Canvas Reference. </p>
            <a name="e4.2.4"></a><div class="exercises"><h5>&lt;exercises section='4.2.4'&gt;</h5>
                <ol>
                    <li>Continue your <a href="http://en.wikipedia.org/wiki/Pong" title="http://en.wikipedia.org/wiki/Pong" target="en.wikipedia.org">Pong</a> game setup by adding a ball to the screen.</li>			
                    <li>Get the <a href="http://localhost:8383/TextBook/examples/canvasTestBed.html" target="examples" title="canvasTestBed.html">canvasTestBed.html</a> file from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>. Write a function that draws a simple line drawing of a car on the screen when button 4 is clicked. Have the car appear under the house from the previous section's exercises.</li>
                    <li>Extend the answer to question 1 so that each time button 4 is clicked, a new car appears to the right of the last one drawn. (Hint: use a global variable to keep track of the starting x-coordinate of the next car.)</li>
                    <li>(Courtesy of Ann Cadger) Write a function that uses the curve drawing methods to draw a turtle on the screen when the mouse moves over the canvas (<a href="https://www.google.ca/search?q=turtle+drawing" title="https://www.google.ca/search?q=turtle+drawing" target="www.google.ca">click here for turtle ideas<span class="printonly"> [https://www.google.ca/search?q=turtle+drawing]</span></a>).</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>
            <div class="sectionStart"><a name="4.3"></a><h2 id="sec4-3-0">4.3 Canvas Input Events</h2><p>If your  goal is to create a game or some kind of interactive display, you need to be able to react to user input on the <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a> from a keyboard or a mouse. (You also need to be able to produce animations, but that will be covered in Chapter 6).</p></div>
            

            <div class="sectionStart"><a name="4.3.1"></a><h3 id="sec4-3-1">4.3.1 Mouse Input</h3><p>You were introduced to all the relevant mouse <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attributes</a> in Chapter 5. As a reminder, they are <code>onclick</code>, <code>ondblclick</code>, <code>onmousedown</code>, <code>onmouseup</code>, <code>onmouseover</code>, <code>onmouseleave</code> and <code>onmousemove</code>. But to take full advantage of these events for a canvas, it is not enough to know that the canvas was clicked or that the mouse is moving on top of the canvas, we also need to know where the mouse is. For this, you can use the <code>event</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>.</p></div>
            
            <p>Whenever an event happens, an <code>event</code> object is created that contains information about the event. That event object is passed to the code you put inside the event attribute (this is done through a wrapper function that is created to contain the code you write there). You can access this event object and pass it on to the function you wrote to respond to the event, like this:
                <code class="first">&lt;canvas onclick='myFunction(event);' ... &gt;&lt;/canvas&gt;</code>
                Now you can get information out of it. For example, <code>event.target</code> will be a <a href="http://en.wikipedia.org/wiki/Reference_(computer_science)" title="http://en.wikipedia.org/wiki/Reference_(computer_science)" target="en.wikipedia.org">reference</a> to the <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> that was the target of the event, in this case the canvas. 
            </p>
            <p>Finding out where on the canvas the mouse event happened takes a little bit of math:
                <code class="first">
                    var x = event.pageX - c.offsetLeft
                    <br>var y = event.pageY - c.offsetTop
                </code>
                The <code>pageX</code> and <code>pageY</code> properties get you the x and y location of the exact pixel on the web page where the click happened, with <code>x==0</code> and <code>y==0</code> being the very left and top edges of the page. But you want to know where on the canvas the click happened, with <code>x==0</code> and <code>y==0</code> being the left and top edges of the canvas. To find out, you simply have to subtract the <code>offsetLeft</code> and <code>offsetTop</code> properties of the canvas (<code>c</code>), which tell you how many pixels the canvas is away from the left and top of the screen.
            </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load up <a href="http://localhost:8383/TextBook/examples/canvasTestBed2.html" target="examples" title="canvasTestBed2.html">canvasTestBed2.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and click on each canvas canvas. Each canvas calls a function when clicked that reports the location of the click using the equation above. The location is reported to the canvas and also in the console using <code>console.log()</code>
                <br><br>But the second canvas locations are all off by 30 pixels. This is because this canvas has a 30 pixel border that counts as part of the clickable area of the element. So to get the x and y calculation right for this canvas, the size of the border has to be subtracted.
                <br><br>Load <a href="http://localhost:8383/TextBook/examples/canvasTestBed2.html" target="examples" title="canvasTestBed2.html">canvasTestBed2.html</a> into <a href="https://netbeans.org/" title="https://netbeans.org/" target="netbeans.org">netbeans<span class="printonly"> [https://netbeans.org/]</span></a> and fix the <code>whereClicked</code> function so that it uses this calculation for the second canvas (but not the first):
                <code class="first">
                    var x = event.pageX - c.offsetLeft - 30;
                    <br>var y = event.pageX - c.offsetLeft - 30;
                </code>
                Now change <code>onclick</code> to <code>onmousemove</code> for one of the <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvases</a>. This could be the beginning of a painting app...
            </p></div>
            <p>There are a few other event <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a> that might also be useful for mouse input: <code>event.ctrlKey</code>, <code>event.altKey</code> and <code>event.shiftKey</code> will each be true if the <code>ctrl</code>, <code>alt</code> or <code>shift</code> keys (respectively) were held down when the mouse event happened. Otherwise they will be false.
            </p><a name="e4.3.1"></a><div class="exercises"><h5>&lt;exercises section='4.3.1'&gt;</h5>
                <ol>
                    <li>Change <a href="http://localhost:8383/TextBook/examples/canvasTestBed2.html" target="examples" title="canvasTestBed2.html">canvasTestBed2.html</a> so that it contains only one canvas and modify the code so that it draws a circle with a 5-pixel radius when the mouse moves over the canvas.</li>
                    <li>Now add a global variable to indicate whether the paintbrush is a large circle, small circle, large square, or small square. Have the four buttons call functions to switch between brushes. Make sure the square brushes are drawn centered around the x and y coordinates of the mouse.</li>
                    <li>Add an HTML color element to allow the user to choose the drawing color. In the drawing function, set the fillStyle using the value of this element.</li>
                    <li>Now change the app so that drawing only happens if the mouse button is pressed down. This is a little trickier than it sounds to get working exactly right. It will require the use of another global variable and a number of different events.</li>
                    <li>In your Pong game, get a paddle moving under mouse control (fix its x location and make its y location match the y coordinate of the mouse). This is a little different from paint because if you have been following the development of Pong in these exercises, then you already have the canvas redrawing every 16 milliseconds. So you now need a global variable for the y location of the paddle, then in the <code>onmousemove</code> event, all you need to do is change this global variable - the drawing will happen in the frame drawing method.</li>
                    <li>In the paint app, change things so that if the user is holding down the <code>ctrl</code> key, dragging the mouse will erase a square area (with <code>clearRect</code>).</li>
                    <li>In the paint app, change things so that if the user is holding down the <code>alt</code> key it doubles the size of the brush they are currently using.</li>
                    <li><span class="bold">Image Magnifier Project.</span> Use the mouse events to implement an <a href="http://mark-rolich.github.io/Magnifier.js/" title="http://mark-rolich.github.io/Magnifier.js/" target="mark-rolich.github.io">image magnifier like this one<span class="printonly"> [http://mark-rolich.github.io/Magnifier.js/]</span></a>. An image magnifier uses a large and small version of an image and displays the small version by default. Then when the user mouses over the image, it reveals a previously hidden <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> containing the large version of the image, but showing only the part of it that is centered around the current mouse location. There are a number of ways to accomplish this, but one way is to use a <code>&lt;div&gt;</code> element for the magnified image and set its <code>background-image</code> CSS <a href="https://en.wikipedia.org/wiki/Property_(computer_science)" title="https://en.wikipedia.org/wiki/Property_(computer_science)" target="en.wikipedia.org">property</a> to display the large version of the image. Then adjust the <code>background-position-x</code> and <code>background-position-y</code> properties in response to mouse movements over the target image so that the correct feature is shown.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="4.3.2"></a><h3 id="sec4-3-2">4.3.2 Keyboard Input</h3><p>There are two keyboard events that are guaranteed to work on all browsers. The <code>onkeydown</code> event will fire when a key is pressed down, and the <code>onkeyup</code> event will fire when the key is lifted. In theory these event attributes can be placed on most <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">HTML elements</a>, but keyboard events will only ever be fired for elements that have <a href="http://en.wikipedia.org/wiki/Focus_(computing)" title="http://en.wikipedia.org/wiki/Focus_(computing)" target="en.wikipedia.org">focus</a>.</p></div>
            
            <p>It is possible to give focus to a <code>&lt;canvas&gt;</code> element. To do this you need to give the <code>&lt;canvas&gt;</code> a <code>tabindex=1</code> attribute and then call the <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">javaScript</a> <code>focus()</code> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> on the element to give it the focus. But this is a little awkward and if there are other focusable elements on the page, they could steak focus away.</p>
            <p>A better solution is often to put the <code>onkeydown</code> and <code>onkeyup</code> events on the <code>&lt;body&gt;</code> element. This is the one element that always has focus.</p>
            <p>Just like with mouse events, you should pass the <code>event</code> object to the function you are calling:
                <code class="first">
                    &lt;body onkeydown='foo(event);'&gt;
                </code>
                Then you can access the integer code for the key that was pressed as follows:
                <code class="first">
                    function foo(event) {
                    <code>alert(event.keyCode)</code>
                    }
                </code>
                Just like with mouse events you can also use <code>event.ctrlKey</code>, <code>event.altKey</code> and <code>event.shiftKey</code> to find out if any of these keys were held down when the event happened. 
            </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load up <a href="http://localhost:8383/TextBook/examples/canvasTestBed3.html" target="examples" title="canvasTestBed3.html">canvasTestBed3.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and slowly press and release a key to see the keyboard events in action. 
                <br><br>You can use this little test app to figure out key codes or you can go to the <a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent" title="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent" target="developer.mozilla.org">Mozilla Developer Network keyCode page<span class="printonly"> [https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent]</span></a> for a full list of key codes.
            </p></div>
            <a name="e4.3.2"></a><div class="exercises"><h5>&lt;exercises section='4.3.2'&gt;</h5>
                <ol>
                    <li>Write code in <a href="http://localhost:8383/TextBook/examples/canvasTestBed3.html" target="examples" title="canvasTestBed3.html">canvasTestBed3.html</a> or create your own page with a <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a> on it. Have a square or circle in the middle of the screen and respond to the arrow keys by moving and redrawing the circle 10 pixels up, down, left, or right.</li>
                    <li>Modify your code from the last exercise so that the shape begins to move one pixel at a time when you press down an arrow key, and stops when you lift it up. This requires a very different architecture: treat it like an animation with 60 frames per second. When a key is down, record that fact in a <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global variable</a>. Then in each animation frame, if a key is down, move the shape one pixel in the appropriate direction.</li>
                    <li>Get the second paddle in your <a href="http://en.wikipedia.org/wiki/Pong" title="http://en.wikipedia.org/wiki/Pong" target="en.wikipedia.org">Pong</a> game moving under keyboard control. This is a little trickier than it sounds but one way to do it is to have a <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global</a> <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variable</a> for up and another for down. When the user presses down the up button, set the up variable to <code>true</code>. When they release it set it to <code>false</code>. Do the same for the down button. Then in the frame drawing <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> (the one that is controlling the ball) move the paddle up or down depending on which of these variables are currently <code>true</code>.</li>
                    <li>In the paint app, make the <code>backspace</code> and <code>delete</code> buttons clear the screen. (It might be nice to pop up a confirmation dialog before you do that.)</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>


            <!-- CHAPTER 5 -->
            <div class="sectionStart pageBreak"><a name="5."></a><h1 id="sec5-0-0">5. Functions as Values</h1><p>Up until now, you have been adding <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handlers to <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> by placing <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> code into the corresponding HTML <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attributes</a>, like this:
                <code class="first"><code>&lt;input type="button" onclick="myFunction()"&gt;</code></code>
            </p></div>
            
            <p>This is not considered best practice by most JavaScript programmers for at least three reasons. </p>
            <ol>
                <li>It spreads your JavaScript code throughout the HTML file, making the code harder to maintain. (i.e. It would be much better if you could add all your event handler code in a single place.) </li>
                <li>It violates the clean separation between the structure of the interface (the job of HTML), the style of the interface (the job of CSS) and the functionality of your app (the job of JavaScript). </li>
                <li>It causes the browser to create a new <a href="http://en.wikipedia.org/wiki/Anonymous_function" title="http://en.wikipedia.org/wiki/Anonymous_function" target="en.wikipedia.org">anonymous function</a> with the code you put in the attribute as its contents. This is unnecessary and wasteful. (the term "<span>anonymous function</span>" will be explained in a moment.)</li>
            </ol>
            <p>It is widely considered best practice to add event handlers using JavaScript <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statements</a> after the document has loaded. But to be able to do that, you need to understand how JavaScript <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> work in a little more depth.</p>

            <div class="sectionStart"><a name="5.1"></a><h2 id="sec5-1-0">5.1 The Truth About Functions</h2><p>The truth about <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> is that they are actually <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a>, just like <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">Strings</a>, Numbers,  <a href="http://en.wikipedia.org/wiki/Boolean_data_type" title="http://en.wikipedia.org/wiki/Boolean_data_type" target="en.wikipedia.org">Booleans</a>, and <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">Objects</a>. Like any other value, functions can be stored in <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a>, passed as parameters to other functions, and returned from function <a href="http://en.wikipedia.org/wiki/Callable_unit" title="http://en.wikipedia.org/wiki/Callable_unit" target="en.wikipedia.org">calls</a>. </p></div>
            
            <p>The technical term for this is that JavaScript functions are <a href="https://en.wikipedia.org/wiki/First-class_function" title="https://en.wikipedia.org/wiki/First-class_function" target="en.wikipedia.org">first-class functions</a>.</p>

            <p>When you use a function declaration like this:
                <code class="first">
                    function foo (a, b, c) {
                    <code class="new">alert(a+b+c);</code>
                    }
                </code>
            </p>
            <p>What you are really doing is creating a variable named foo, and assigning a function value to it. </p>
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Methods vs Functions.</span> In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> and <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> are completely different entities. (Question: how would you describe this difference?) In <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>, <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> names are actually variable names, and functions are data.</p></div>
            <p>The following shows the assignment of a function literal to a variable. It is legal JavaScript code, and is equivalent to the function declaration above:
                <code class="first">
                    var foo = function(a, b, c) {
                    <code class="new">alert(a+b+c);</code>
                    };
                </code>
            </p><p>The above <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statement</a> creates a variable named <code>foo</code>, and assigns to it an <a href="http://en.wikipedia.org/wiki/Anonymous_function" title="http://en.wikipedia.org/wiki/Anonymous_function" target="en.wikipedia.org">anonymous function</a> with 3 parameters. (Note that since the statement above is an assignment statement, we put a semicolon at the end of it.) The function being assigned is called an anonymous function because it is created without being given a name. The "name" used to call it comes from the assignment of the anonymous function to a variable.</p>
            <p>Anonymous functions are also referred to as "<a href="http://en.wikipedia.org/wiki/Function_literal" title="http://en.wikipedia.org/wiki/Function_literal" target="en.wikipedia.org">function literals</a>" because they are like Number, String or <span>Array</span> <a href="https://en.wikipedia.org/wiki/Literal_(computer_programming)" title="https://en.wikipedia.org/wiki/Literal_(computer_programming)" target="en.wikipedia.org">literals</a> - they are values that are hard-coded into the program. </p>
            <p>The main difference between the two notations is that you can only use function <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declaration</a> in certain contexts, but you can use variable declaration and function literals in any context. In fact, the function declaration notation is often avoided by JavaScript programmers on the grounds that it is limited in use and adds nothing to the language. These programmers always use the variable declaration / function literal notation instead.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                No matter whether you use function declaration or variable declaration with function literals, if you refer to foo in your program, you are referring to a variable. To see this, try the following in the JavaScript console of your browser:
                <code class="first">
                    function foo () {alert("hi");} â foo is a function
                    <br>foo;							
                    <br>foo();	
                </code>
                <span class="bold">Question:</span> What is the difference between the last two lines above?
                <code class="first">
                    <br>alert(foo);					
                    <br>alert(foo());	
                </code>
                <span class="bold">Question:</span> What is the difference between the above two lines?
                <br><br>Try the lines below to see that you can switch <code>foo</code> back and forth between a function and other data types.
                <code class="first">
                    foo = 5; â foo is now a number
                    <br>alert(foo);
                    <br>
                    <br>foo = function() {alert("hi");}; â foo is a function again
                    <br>alert(foo);
                    <br>
                    <br>foo = "hi"; â foo is now a string
                    <br>alert (foo);
                </code>
            </p></div>
            <p><span class="bold">Answers:</span> In the console window, <code>foo</code> returns the value of the variable. It's a function. But <code>foo()</code> calls the function so you will see the popup. On the other hand, <code>alert(foo)</code> will display a popup whose content is the value of the variable <code>foo</code> (if it's a function, it will show you something to that effect). Finally, <code>alert(foo())</code> will first call the <code>foo</code> function, displaying a popup. Then it will create another popup to display the <a href="http://en.wikipedia.org/wiki/Return_statement" title="http://en.wikipedia.org/wiki/Return_statement" target="en.wikipedia.org">return value</a> of <code>foo</code>. Since there is nothing explicitly returned, it will return the special value <code>undefined</code>. </p>

            <div class="sectionStart"><a name="5.2"></a><h2 id="sec5-2-0">5.2 Better Ways to Add Event Handlers</h2><p>If you want to add <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handlers to an <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> after it is created, you can do it by retrieving the element from the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> and assigning a <a href="http://en.wikipedia.org/wiki/Function_literal" title="http://en.wikipedia.org/wiki/Function_literal" target="en.wikipedia.org">function literal</a> to the <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> for the event handler.</p></div>
            
            <div class="DIY" id="test1"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try the following in the javaScript console for this textbook.
                <code class="first">
                    document.getElementById("test1").onclick = function(event) { 
                    <code class="new">
                        alert("hello!"); 
                    </code>
                    };
                </code>
                Since this DIY box has an id of <code>test1</code>, you should now be able to click it and see the result.
                <br><br>P.S. Don't worry about the <code>event</code> parameter above. It will be explained later.
            </p></div>
            <p>Or you can create the <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> (either through function <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declaration</a> or using a function <a href="https://en.wikipedia.org/wiki/Literal_(computer_programming)" title="https://en.wikipedia.org/wiki/Literal_(computer_programming)" target="en.wikipedia.org">literal</a>) first, and then assign it to the event handler.</p>
            <div class="DIY" id="test2"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try the following in the JavaScript console for this textbook.
                <code class="first">
                    var clickHandler = function clickHandler (event) {  
                    <code class="new">
                        alert("goodbye! "); 
                    </code>
                    }
                    <br>document.getElementById("test2").onclick = clickHandler;
                </code>
                Now you should be able to click this box for a message.
            </p></div>
            <p>Another option that some programmers prefer is to use the <code>addEventListener</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a> which takes two parameters. The first is the event name (without the "on" -- so use "click" instead of "onclick") and the second is the handler function.</p>
            <div class="DIY" id="test3"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try this in the JavaScript console for this textbook. Note that you will have to define clickhandler first. You can get it from the last DIY box.
                <code class="first">
                    function clickHandler (event) {  
                    <code class="new">
                        alert("goodbye! "); 
                    </code>
                    }
                    <br>document.getElementById("test3")
                    <code class="new">.addEventListener("click",clickHandler);</code>
                </code>
                Of course you can also add a handler using a function literal. Try this: 
                <code class="first">
                    document.getElementById("test3")
                    <code class="new">
                        .addEventListener("click", function(event) { 
                        <code class="new">
                            alert("hello!"); 
                        </code>
                        });
                    </code>
                </code>
                If you execute both code snippets above, then when you click this box you should get two popups, not one. This illustrates one crucial difference between assigning to <code>onclick</code> and using <code>addEventListener</code>. The latter allows you to add many <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handlers of the same type to the same <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>.
            </p></div>
            <div class="JC" style="width: auto;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">
                Event Listeners.</span> <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> and <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> both use <code>addListener</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> to register <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handlers. The difference is that in Java an <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event listener</a> is an <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>, while in JavaScript it's a <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a>.
            </p></div>
            <div class="sectionStart"><a name="5.2.1"></a><h3 id="sec5-2-1">5.2.1 The <code>event</code> Object and the <code>this</code> Keyword</h3><p>Note that the functions above all contain an <code>event</code> parameter. Any event handler is always passed a special event <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> that represents the event that caused this function <a href="http://en.wikipedia.org/wiki/Callable_unit" title="http://en.wikipedia.org/wiki/Callable_unit" target="en.wikipedia.org">call</a>. You can use it to access information about the event, such as which element triggered the event (<code>event.target</code>), which mouse button was pressed (<code>event.button</code>), the location of the mouse on the page (<code>event.pageX</code> and <code>event.pageY</code>), etc.</p></div>
            
            <div class="DIY" id="test4"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Here are two last things to try in the JavaScript console for this textbook.
                <code class="first">
                    document.getElementById("test4").onclick = function(event) {
                    <code class="new">
                        alert(event.pageX+","+event.pageY);
                    </code>
                    };
                </code>
                Now when you click on this box, you will get to see the exact X and Y location of your click, in pixels relative to top left corner of the page. If you change <code>pageX</code> and <code>pageY</code> to <code>clientX</code> and <code>clientY</code> you get the location relative to the top left corner of the browser window.
                <br><br>The <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> contains a number of useful <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a>, but probably the most useful is the <code>target</code> field which returns the DOM node that was the subject of the event.
                <br><br>Try this:
                <code class="first">
                    document.getElementById("test4").onclick = function(event) {
                    <code class="new">
                        alert(event.target.innerHTML);
                    </code>
                    };
                </code>
                Now clicking this box should get you the <code>innerHTML</code> of the <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> you clicked on. 
            </p></div>
            <p>But sometimes <code>event.target</code> won't get you exactly the element you wanted. in this case, you should use the <code>this</code> keyword.
            </p><div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                In the last example the contents of the alert will vary depending on where you click inside the DIY box. This is because the <code>target</code> is not necessarily the same as the <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> you added the listener to. Can you figure out by inspecting the DIY box what the <code>target</code> actually refers to?
                <br><br>If you want to make sure you access the element that the listener was added to, use the keyword <code>this</code> instead of <code>event.target</code>.<br><br>Try this:
                <code class="first">
                    document.getElementById("test4").onclick = function(event) {
                    <code class="new">
                        alert(this.innerHTML);
                    </code>
                    };
                </code>
                Now clicking the DIY box above this one should get you the <code>innerHTML</code> of the entire box, no matter where you click on it.
            </p></div>
            <p>For more information on the Event object, see the w3schools' <a href="http://www.w3schools.com/jsref/dom_obj_event.asp" title="http://www.w3schools.com/jsref/dom_obj_event.asp" target="www.w3schools.com">Dom Events</a> page.</p>
            <div class="sectionStart"><a name="5.2.2"></a><h3 id="sec5-2-2">5.2.2 The <code>window.onload</code> Event</h3><p>It is also considered best practice in <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>, to write all of your code inside a <code>window</code> load event handler, like this:
                <code class="first">
                    window.addEventListener("load", function() {
                    <code class="new">
                        // ALL YOUR CODE GOES HERE
                    </code>
                    });
                </code>
            </p></div>
            
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Functions within functions.</span> One consequence of the fact that <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> in <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> are <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a> stored in <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> is that you can <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declare</a> functions within functions. There is no way to do anything like this in <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>. </p></div>
            <p>When you put all your code inside the load event, the browser will wait until the page is ready before executing it. So you can put your code into the <code>&lt;head&gt;</code> of your document without having to worry about whether the DOM is ready at that point. This is a big advantage.</p>
            <p>Another advantage is that now all <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> you use (including function names) become <a href="http://en.wikipedia.org/wiki/Local_variable" title="http://en.wikipedia.org/wiki/Local_variable" target="en.wikipedia.org">local</a> to the <a href="http://en.wikipedia.org/wiki/Anonymous_function" title="http://en.wikipedia.org/wiki/Anonymous_function" target="en.wikipedia.org">anonymous function</a> you assign to the <code>load</code> event. This is good too because it minimizes potential name conflicts with other JavaScript code or libraries you might be using.</p>
            <p>Note that because function declarations are just variable declarations in JavaScript, even other helper functions can be defined inside the <code>window</code> load event.</p>
            <a name="e5.2.2"></a><div class="exercises"><h5>&lt;exercises section='5.2.2'&gt;</h5>
                <ol>
                    <li>Load <a href="http://localhost:8383/TextBook/examples/eventHandlerTest.html" target="examples" title="eventHandlerTest.html">eventHandlerTest.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>. Compare how the handlers have been added to the <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> with <code>id</code> <code>test1</code> and <code>test2</code>. 
                        <ol class="sublist">
                            <li>Consider the page as it is loading into the browser. At what point in time is each handler added? </li>
                            <li>Try commenting out the <code>window.onload</code> line and the <code>};</code> line that goes with it and reload the page. Describe how the page works (or not) now and explain why.</li>
                        </ol>
                    </li>
                    <li>Add two handler <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> to the element with <code>id="message"</code> using <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> (not HTML <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attributes</a>). These functions should respond to the <code>onmouseover</code> and <code>onmouseout</code> <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a>. When the mouse is inside the message box, one of the other boxes should be pink and the other should be white. When the mouse is outside the message box, the one that was white should become light blue and the one that was pink should become white. All your code should be inside a window load event handler.</li>
                    <li>Go back to the other exercises from this chapter (messages, catch the rabbit, etc.) and refactor them so that all of your code (including code in <code>onclick</code> or other HTML attributes) is tucked away inside a <code>window</code> load event handler.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="5.3"></a><h2 id="sec5-3-0">5.3 Functions, Timers and Animation</h2><p>Now that you know the truth about <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a>, we can also talk about how to use timers to create animation effects on a canvas</p></div>
            
            <p>Animation refers to any picture in which <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> of the picture seem to move or change over time. The basic technique in any form of animation is to present a series of animation frames (i.e. pictures) one after another very quickly, with each frame  slightly different from the last. For example, an <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> might move very slightly to the right or grow slightly from frame to frame while the rest of the picture remains unchanged. If this is done quickly enough, the eye will be fooled into seeing smooth motion.</p>
            <p>To animate an element using <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>, we need three things:</p>
            <ol>
                <li>A set of <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> that specify important details about the object being animated (e.g. x and y position, color, size, etc.)</li>
                <li>A function that updates these variables and then makes changes to the CSS for that object using the new <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a>.</li>
                <li>A way to trigger the update function repeatedly</li>
            </ol>
            <p>(If you want to animate drawings on a <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a>, use a very similar <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a>, but the update function will need to clear and redraw the entire contents of the canvas each time it is called rather than making changes to the CSS.)

            </p><div class="sectionStart"><a name="5.3.1"></a><h3 id="sec5-3-1">5.3.1 JavaScript Timers</h3><p>We'll start with item 3 from the list above: We need a way to trigger a function repeatedly. JavaScript timers are the answer to that problem.</p></div>
            
            <p>JavaScript functions are called in response to <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a> (e.g. the user presses the mouse button or the page loads). If you want a function to be called repeatedly, or just once but at some time in the future, you have to schedule a timer event. The <code>window</code> object in JavaScript contains a <code>setTimeout</code> function to trigger an event some time in the future, and a <code>setInterval</code> function to trigger an event repeatedly at set intervals.</p>
            <p>To trigger an event repeatedly, you can use the following command:
                <code class="first">
                    setInterval(<i>functionName</i>, <i>interval</i>);
                </code>
                In the above, <code>functionName</code> is the name of the function you want to <a href="http://en.wikipedia.org/wiki/Callable_unit" title="http://en.wikipedia.org/wiki/Callable_unit" target="en.wikipedia.org">call</a> when the timer events happen, and <code>interval</code> is the number of milliseconds between each event.</p>
            <p>For example, if you want to call a function named <code>tick</code> every half a second (500 milliseconds), the command would be:
                <code class="first">
                    setInterval(tick, 500);
                </code>
                Note that you must not use <code>tick()</code> with the brackets. This would call the <code>tick</code> function immediately. But we don't want to call it now, we want to pass it like a parameter to the <code>setInterval</code> function so that it can be called later, when the timer event happens.
            </p>
            <p>To call a function just once, but at some time in the future, use the following command to schedule a single timer event:
                <code class="first">
                    setTimeout(<i>functionName</i>, <i>interval</i>);
                </code>
                The parameters are the same as <code>setInterval</code>, but the function you specify will only be called once, after <code>interval</code> milliseconds.
            </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try the following in the <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> console of Chrome:
                <code class="first">
                    <span>function</span> hi() {
                    <code>
                        alert("Hello");
                    </code>
                    }
                    <br>setTimeout(hi,5000);
                </code>
                Now wait five seconds for your message to appear.
                <br><br>Try the same thing on a repeating timer:
                <code class="first">
                    setInterval(hi,5000);
                </code>
                Now you will get a popup every 5 seconds. You can reload the page to make it stop.
            </p></div>
            <p>Both <code>setTimeout</code> and <code>setInterval</code> return an integer id for the timer you have created. If you want to stop a timer, you can do so with the <code>clearTimeout</code> function. But you have to have saved the id of the timer in a variable:
                <code class="first">
                    var timerId = setInterval(myFunction, 1000);
                </code>
                With this variable you can stop the timer at any time:
                <code class="first">
                    clearTimeout(timerId);
                </code>
                This will also work for <code>setTimeout</code>.
            </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Go back to the previous DIY box and execute the repeating popup command again, but this time store its return value in a variable:
                <code class="first">
                    var timerId = setInterval(hi,5000);
                </code>
                Now you can stop the popups by clearing the timer:
                <code class="first">
                    clearTimeout(timerId);
                </code>
            </p></div>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load the <a href="http://localhost:8383/TextBook/examples/timerExample.html" target="examples" title="timerExample.html">timerExample.html</a> file from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and run it. You should see the word "tick" appear every 0.5 seconds, and after just over 5 seconds you should see the word "*** ALARM ***" appear. You can stop the ticking by pressing the "stop" button.
                <br><br>Examine the code for this file make sure you can answer these questions:
                </p><ol>
                    <li>Which <span>functions</span> stop and start the timers?</li>
                    <li>When does each of these <span>functions</span> get called?</li>
                    <li>What is the purpose of the <code>alarm</code> and <code>tick</code> <span>functions</span>?</li>
                    <li>How does the stop <span>function</span> know which timer to stop?</li>
                </ol>
                <p> Now add code to the file so that there is a "stop alarm" button that, when pressed, will prevent the alarm message from being displayed (if it hasn't already been displayed).</p>
            <p></p></div>

            <div class="sectionStart"><a name="5.3.2"></a><h3 id="sec5-3-2">5.3.2 Getting Things Moving</h3><p>Recall that we needed three things to get an animation going:</p></div>
            
            <ol>
                <li><a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">Global</a> animation variables,</li>
                <li>A function to update those variables and change CSS properties (or to redraw the canvas if you are using one), and</li>
                <li>A way to trigger that function repeatedly.</li>
            </ol>
            <p>We now have the last part: <code>setInterval</code> can be used to call a function every few milliseconds. All we need now is some <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global variables</a> and an <code>updateAnimation</code> function.</p>
            <p>The global variables should keep track of position and other information for the objects that are moving.</p>
            <p>The <code>updateAnimation</code> function should take the following actions:</p>
            <ol>
                <li>Update the animation variables (e.g. <code>x = x + 1</code>)</li>
                <li>Make the required changeSize
                    <ol type="a">
                        <li>If you are animating <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">HTML elements</a>, set the relevant CSS properties (e.g. <code>e.style.left = x + "px"</code>). Note that the CSS <a href="https://en.wikipedia.org/wiki/Property_(computer_science)" title="https://en.wikipedia.org/wiki/Property_(computer_science)" target="en.wikipedia.org">property</a> <code>position</code> must be set to <code>absolute</code> or <code>fixed</code> for this to work.</li>
                        <li>If you are animating a picture on a canvas, clear the canvas (e.g. <code>ctx.clearRect(0, 0, canvas.width, canvas.height)</code>) and then draw the new frame, using the animation variables (e.g. <code>ctx.fillRect(x, 100, 50, 50);</code>).</li>
                    </ol>
                </li>
            </ol>
            <p>For the appearnace of smooth motion, the <code>setInterval</code> function should be used to trigger a call to <code>drawFrame</code> about 60 times per second. That works out to an interval of 16 milliseconds.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                <b>HTML Animation:</b> Load the <a href="http://localhost:8383/TextBook/examples/sampleAnimation.html" target="examples" title="sampleAnimation.html">sampleAnimation.html</a> file from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and watch it run. <br><br>
                <b><a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">Canvas</a> Animation:</b> Load the <a href="http://localhost:8383/TextBook/examples/sampleCanvasAnimation.html" target="examples" title="sampleCanvasAnimation.html">sampleCanvasAnimation.html</a> file from the example pack and watch it run.
                <br><br>Whichever option you chose above, make sure you can answer the following questions:
                </p><ol>
                    <li>When and how does the animation start?</li>
                    <li>When and how does the animation stop?</li>
                    <li>For the canvas animation, what would happen if you skipped the clear canvas step?</li>
                </ol>
            <p></p></div>
            <a name="e5.3.2"></a><div class="exercises"><h5>&lt;exercises section='5.3.2'&gt;</h5>
                <ol>
                    <li>Fetch either <a href="http://localhost:8383/TextBook/examples/sampleAnimation.html" target="examples" title="sampleAnimation.html">sampleAnimation.html</a> or <a href="http://localhost:8383/TextBook/examples/sampleCanvasAnimation.html" target="examples" title="sampleCanvasAnimation.html">sampleCanvasAnimation.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>.
                        <ol type="a">
                            <li>Modify it so that the ball moves down and to the right.</li>
                            <li>Now modify it so that the ball shrinks as it moves.</li>
                            <li>Finally, modify it so that the ball starts off as black and ends as red (Hint: define a red variable to start at 0 and grow to 255. Then set the color using <code>rgb(___,0,0)</code> with the value of your variable in the blank.</li>
                        </ol>
                    </li>
                    <li>Modify <a href="http://localhost:8383/TextBook/examples/sampleAnimation.html" target="examples" title="sampleAnimation.html">sampleAnimation.html</a> or <a href="http://localhost:8383/TextBook/examples/sampleCanvasAnimation.html" target="examples" title="sampleCanvasAnimation.html">sampleCanvasAnimation.html</a> from the example pack so that the ball bounces back when it hits the edge of the screen. (Hint: instead of <code>x=x+1</code> use <code>x=x+xSpeed</code> where <code>xSpeed</code> is initially set to a positive number. Then when the ball reaches the edge of the screen, multiply <code>xSpeed</code> by <code>-1</code> to start moving the ball in the opposite direction.</li>
                    <li>Modify <a href="http://localhost:8383/TextBook/examples/sampleAnimation.html" target="examples" title="sampleAnimation.html">sampleAnimation.html</a> or <a href="http://localhost:8383/TextBook/examples/sampleCanvasAnimation.html" target="examples" title="sampleCanvasAnimation.html">sampleCanvasAnimation.html</a> or update <a href="http://localhost:8383/TextBook/examples/moveme.html" target="examples" title="moveme.html">moveme.html</a> from the example pack so that the ball moves diagonally and bounces off all four walls. (Hint: define an xSpeed and a ySpeed.)</li>
                    <li>Get <a href="http://localhost:8383/TextBook/examples/flyin.html" target="examples" title="flyin.html">flyin.html</a> from the example pack and add code to it to make the <code>&lt;h1&gt;</code> elements fly in from the side of the screen. Start with them all moving together, then see if you can extend it to make them fly in at different times.</li>
                    <li>Create your own animation from scratch with at least two elements moving or changing at once.</li>
                    <li>Go back to <a href="http://localhost:8383/TextBook/examples/catchTheRabbit.html" target="examples" title="catchTheRabbit.html">catchTheRabbit.html</a> from the example pack. Delete 3 of the rabbits and create a new version of the game where the rabbit runs to a different (randomly selected) location on the screen when you mouse over it. (Hints: Use <code>window.innerWidth</code> and <code>window.innerHeight</code> to get the height and width of the screen. For global variables, use <code>x</code>, <code>y</code> to represent the rabbit's position and <code>targetX</code>, <code>targetY</code> to represent where the rabbit is going. Each call to updateAnimation should just move <code>x</code> and <code>y</code> closer to the targets. When the user mouses over the rabbit, set a new target.)</li>
                    <li>More Canvas Exercises
                        <ol type="a">
                            <li>Now get the ball moving in the Pong game you are developing.</li>
                            <li>Get the <a href="http://localhost:8383/TextBook/examples/canvasTestBed.html" target="examples" title="canvasTestBed.html">canvasTestBed.html</a> file from the example pack. Write a function that creates an 8x8 checker board pattern in the canvas when the button 1 is clicked (if you haven't already done that). Now make the modifications necessary so that after button 1 is clicked the checkerboard reverses every 250 milliseconds.</li>
                            <li>Extend your solution to the previous exercise so that when you press button 1 again, it stops the animation.</li>
                            <li><span class="bold">The Greeting Card Project:</span><br><br>Create a web app to display custom greeting cards for a mobile phone user (with a screen size of 320px by 480px).<br><br>
                                When the user loads the page, they should see a heading and a form that lets them customize their card. The form should let them enter a date, the name of the event, the name of the recipient and other information as you see fit. There should be a "make card" button that, when they hit it, hides the form and reveals a canvas showing the "front" of the card, with a simple but elegant design that incorporates the text they entered. The card design should include some type of animated element (something moving, changing color, growing or shrinking, etc). <br><br><span class="bold">BONUS:</span> When the user clicks the card, make it "open" to show them a different design on the inside.</li>
                        </ol>
                    </li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>


            <div class="sectionStart"><a name="5.4"></a><h2 id="sec5-4-0">5.4 Functions, Images and Sound</h2><p>To make a nicer <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a> game, you might want to load images from a file and then draw them on the canvas. To make a better overall experience for the user, you also might want to play sounds in response to certain <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a>.</p></div>
            
            <div class="sectionStart"><a name="5.4.1"></a><h3 id="sec5-4-1">5.4.1 The Basics</h3><p>To draw an image, you have to create an 
                <code>Image</code> object, then load an image file into it and then draw it. Creating the image object and loading the image should be done once and stored in a global variable.
                <code class="first">
                    var myImage = new Image();
                    <br>myImage.src = "images/myImageFile.jpg";
                </code>
            </p></div>
            
            <p>Once the image is loaded, you can draw it on the canvas in response to an event.
                <code class="first">
                    ctx.drawImage(myImage, x, y);
                </code>
            </p>
            <p>To play a sound, you have to create an <code>Audio</code> object, then load an audio file into and then play it. Creating the Audio object and loading the audio file should be done once and stored in a global variable.
                <code class="first">
                    var myAudio = new Audio("sounds/myAudioFile.mp3");
                </code>
            </p>
            <p>Once the audio is loaded, you can play it any time. This is done in two steps.
                <code class="first">
                    myAudio.load(); // resets the sound so it can be played repeatedly
                    <br>myAudio.play(); // plays the sound
                </code>
            </p>
            <div class="sectionStart"><a name="5.4.2"></a><h3 id="sec5-4-2">5.4.2 Dealing with Lag</h3><p>There is one problem lurking in the above instructions. When your app is on line, the HTML page will load first and the sounds and images will only begin to be downloaded from your site when you create the <code>Audio</code> and <code>Image</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">objects</a>. What if you try to draw your images or play your sounds before they have loaded?</p></div>
            
            <p>To deal with this problem for images, you can set up an <code>onload</code> event like this:
                <code class="first">
                    myImage.onload = myImageReady;
                </code>
                Where <code>myImageReady</code> is the name of a <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> that will be called when the image is loaded. You can use it to set a <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global</a> flag to let the rest of the app know the image is ready</p>
            <p>The solution for audio is similar but uses a different event:
                <code class="first">
                    myAudio.oncanplaythrough = myAudioReady;
                </code>
                In this case, <code>myAudioReady</code> will be called when the sound can be played through from beginning to end.
            </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try out <a href="http://localhost:8383/TextBook/examples/soundAndVision.html" target="examples" title="soundAndVision.html">soundAndVision.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> to see images and audio in action.
            </p></div>
            <a name="e5.4.2"></a><div class="exercises"><h5>&lt;exercises section='5.4.2'&gt;</h5>
                <ol>
                    <li>Follow the instructions above to put sounds into your <a href="http://en.wikipedia.org/wiki/Pong" title="http://en.wikipedia.org/wiki/Pong" target="en.wikipedia.org">Pong</a> game and use images for the paddles and ball. For images you can legally use, search <a href="http://search.creativecommons.org/" title="http://search.creativecommons.org/" target="search.creativecommons.org">creative commons<span class="printonly"> [http://search.creativecommons.org/]</span></a>. For sound effects, try <a href="http://freesound.org" title="http://freesound.org" target="freesound.org">freesound.org<span class="printonly"> [http://freesound.org]</span></a> or <a href="http://soundjay.com" title="http://soundjay.com" target="soundjay.com">soundjay.com<span class="printonly"> [http://soundjay.com]</span></a>.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>
            <div class="sectionStart"><a name="5.5"></a><h2 id="sec5-5-0">5.5 Creating Your First Canvas Game</h2><p>Now you have everything you need to make a simple game in the <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">canvas</a>. Here's a list of basic components you can adapt to suit your needs:</p></div>
            
            <ol>
                <li>A set of <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global variables</a> to control position, speed, direction and other <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attributes</a> of the movable <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">objects</a>. You may also need <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> to control the state of the game (game on, paused, game over, etc.) and possibly the score.</li>
                <li>A set of <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> that are called in response to keyboard and mouse <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a>. These function should make changes to the <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global</a> variables that control the player objects in the game.</li>
                <li>A <code>computeFrame</code> function that is called once very 16 milliseconds. This function contains the main code for the game.</li> 
            </ol>
            <p>The primary job of <code>computeFrame</code> is to draw the current animation frame. But before it does that, it should update the positions of all the objects based on the relevant variables. It should also check for collisions between objects or between objects and the edges of the screen and make changes as a result (reverse speeds to simulate a bounce, increase the score, mark an alien as "dead", end the game, etc.) </p>
            <p>Here are a few extra tips to help you out:</p>
            <ol>
                <li>An object's direction and speed can be represented using two variables for xSpeed and ySpeed. In <code>computeFrame</code>, use <code>x += xSpeed</code> and <code>y += ySpeed</code> to move it one step.</li>
                <li>You don't have to use integers. If you set the x and y speeds to -0.5 and 0.25 you will get an object that moves slowly to the left and slightly down.</li>
                <li>To make an object bounce, you can reverse its speed with <code>xSpeed = xSpeed * -1</code> and <code>ySpeed = ySpeed * -1</code>. If you reverse both, it will bounce back the way it came. If you reverse only the x speed it will seem to bounce off a vertical surface. If you reverse the y speed it will seem to bounce off a horizontal surface.</li>
                <li>Gravity can be simulated by adding a small amount (e.g. 0.01) to the ySpeed of an object at every step.</li>
                <li>Collisions can be detected by measuring how close two objects are to one another. Use their x and y locations to compute the distance between them using the <a href="http://www.freemathhelp.com/length-line-segment.html" title="http://www.freemathhelp.com/length-line-segment.html" target="www.freemathhelp.com">length of a line segment formula<span class="printonly"> [http://www.freemathhelp.com/length-line-segment.html]</span></a>. If they are too close, it's a collision.</li>
            </ol>
            <p>That's it. The rest you will have to work out for yourself. Happy gaming!</p>
            <a name="e5.5"></a><div class="exercises"><h5>&lt;exercises section='5.5'&gt;</h5>
                <ol>
                    <li>Finish that <a href="http://en.wikipedia.org/wiki/Pong" title="http://en.wikipedia.org/wiki/Pong" target="en.wikipedia.org">pong</a> game!</li>
                    <li>For an extra challenge, try a brick-breaker game like breakout or arkanoid as well.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <!-- CHAPTER 6 -->
            <div class="sectionStart pageBreak"><a name="6."></a><h1 id="sec6-0-0">6. Custom Objects</h1><p>Throughout this course, you have been using <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">objects</a> in your programs (e.g. the <code>document</code> object) but you have not been programming in an <a href="http://en.wikipedia.org/wiki/Object-oriented_design" title="http://en.wikipedia.org/wiki/Object-oriented_design" target="en.wikipedia.org">object-oriented</a> manner.</p></div>
            
            <p><a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">Javascript</a> supports many <a href="https://en.wikipedia.org/wiki/Programming_paradigm" title="https://en.wikipedia.org/wiki/Programming_paradigm" target="en.wikipedia.org">programming paradigms</a>. It supports <a href="http://en.wikipedia.org/wiki/Imperative_programming" title="http://en.wikipedia.org/wiki/Imperative_programming" target="en.wikipedia.org">imperative programming</a> by letting you place JavaScript <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statements</a> anywhere you want on a page. These statements are executed in the order they are encountered (from top to bottom) when the page is first loaded. It also supports <a href="https://en.wikipedia.org/wiki/Procedural_programming" title="https://en.wikipedia.org/wiki/Procedural_programming" target="en.wikipedia.org">procedural programming</a> by letting you <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declare</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> that can be executed over and over again as necessary. And it supports functional programming through its support for <a href="https://en.wikipedia.org/wiki/First-class_function" title="https://en.wikipedia.org/wiki/First-class_function" target="en.wikipedia.org">first-class functions</a>.</p>
            <p>In this chapter, you will learn some of the ways in which JavaScript also supports object-oriented programming, allowing you to create your own objects with whatever instance <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> (<a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a>) or <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> you wish.</p>
            <p>One caveat before we begin: The JavaScript approach to object-oriented programming is quite different from Java and almost every other language. A full discussion is beyond the scope of this course, but you can read more in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Introduction_to_Object-Oriented_JavaScript" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Introduction_to_Object-Oriented_JavaScript" target="developer.mozilla.org">Introduction to Object-Oriented JavaScript<span class="printonly"> [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Introduction_to_Object-Oriented_JavaScript]</span></a> on the Mozilla Developer Network.</p>	

            <div class="sectionStart"><a name="6.1"></a><h2 id="sec6-1-0">6.1 Some Important Facts</h2><div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">
                Classes and Objects.</span> <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> lets you create <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">objects</a> but does not let you define any <a href="http://www.w3schools.com/css/css_selectors.asp" title="http://www.w3schools.com/css/css_selectors.asp" target="www.w3schools.com">classes</a>.
            </p></div></div>
            
            <p>In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, if you want to create an <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>, you define a <a href="http://www.w3schools.com/css/css_selectors.asp" title="http://www.w3schools.com/css/css_selectors.asp" target="www.w3schools.com">class</a> to use as a blueprint and then create objects using it. In <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> there is no such thing as a class, and there are many different ways to create a new object. We'll look at two simple ways in the next section, but first here are some important reminders about how JavaScript objects work.</p>
            <div class="sectionStart"><a name="6.1.1"></a><h3 id="sec6-1-1">6.1.1 Object Notation</h3><p>As you have already seen, in JavaScript, you can access an object using the dot operator or by using <a href="http://en.wikipedia.org/wiki/Associative_array" title="http://en.wikipedia.org/wiki/Associative_array" target="en.wikipedia.org">associative array</a> brackets. </p></div>
            
            <p>For example: <code>document.forms.["myForm"]</code> is the same as <code>document.forms.myForm</code>, and <code>document["getElementById"]("test1")</code> is the same as <code>document.getElementById("test1")</code></p>
            <p>This will be true for the objects you create as well. </p>
            <div class="sectionStart"><a name="6.1.2"></a><h3 id="sec6-1-2">6.1.2 Flexible Objects</h3><p>In Java, the class creates the blueprint for an object and it cannot be modified at run time. You cannot add or remove instance <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> or <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> after creating an object.</p></div>
            
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Flexible Objects.</span> In <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>, the structure of an <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> can be changed after it is created. In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, you can't do that.</p></div>
            <p>JavaScript objects are more flexible. You can add a <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> to an existing object simply by assigning something to a new field name. You can also add a new method simply by assigning a <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> to a new field name.</p>
            <p><span class="bold">Terminology Note:</span> A JavaScript object is an associative <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">array</a> linking key names to <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a>. Each key name is an instance variable of that object. As you learned in the previous chapter, functions can be used as values as well. When an Object's instance variable contains a function, we call it a method. Otherwise, we call it a field.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                In a JavaScript console, try the following:
                <code class="first">document.myVariable = 45;
                    <br>document.myMethod = function() {alert("hi");}
                </code>
                You have just added a new <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> and a new <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a> to the <code>document</code> object. You can access them like this:
                <code class="first">
                    alert(document.myVariable); // access the new field
                    <br>document.myMethod();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// call the new method
                </code>
            </p></div>
            <p>You can also delete a field from an object using the <code>delete</code> operator. This operator can be used to remove any variable from the current context. </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                In the same JavaScript console from the last Do it Yourself box, remove the new method and field like this:
                <code class="first">
                    delete(document.myVariable);
                    <br>delete(document.myMethod);
                </code>
                Now you should not be able to access this <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> and <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a> any more.
            </p></div>
            <div class="sectionStart"><a name="6.1.3"></a><h3 id="sec6-1-3">6.1.3 Silent Errors</h3><p>Now you are in a position to understand some of JavaScriptâs notorious silent errors. </p></div>
            
            <div class="DIY" id="test10"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                In a JavaScript console for this textbook, try the following:
                <code class="first">
                    document.getElementById("test10").style.color="blue";
                    <br>document.getElementById("test10").innerHtml = "hi!";</code>
                Note that the first line worked but the second didn't (the text is blue now, but the contents have not changed).
                <br><br>What went wrong? If you're not sure, try the following in the JavaScript console:
                <code class="first">document.getElementById("test10").innerHtml</code>
            </p></div>
            <p>This is an example of a very common error in JavaScript: The programmer wants to put a message into a <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">Node</a> and she retrieved the <a href="http://www.w3schools.com/jsref/dom_obj_all.asp" title="http://www.w3schools.com/jsref/dom_obj_all.asp" target="www.w3schools.com">Element object</a> correctly using <code>getElementById</code> but she got the case wrong on the field name. Instead of <code>innerHTML</code> she typed <code>innerHtml</code>. But rather than throw an error, JavaScript just added a new field to the <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">Element</a> object (called <code>innerHtml</code>) and assigned the <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a> value <code>"hi"</code> to it. </p>
            <p>This is a prime example of how JavaScript makes a tradeoff between flexibility and ease of debugging.</p>


            <div class="sectionStart"><a name="6.2"></a><h2 id="sec6-2-0">6.2 Creating Objects from Scratch</h2><p>With the preliminaries out of the way, we can talk about <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> creation. The first way to create an object is to simply create an empty Object and then add <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a> and <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> to it one by one. <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> contains a built in constructor <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> called <code>Object</code> that lets you do just that.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                In a JavaScript console, create a new object and assign it to a variable like this:
                <code class="first">var person = new Object();</code>
                If you examine person (type "person" in the console and open the Object that is returned) you will see that itâs an object with no contents. To add fields, you can do the following:
                <code class="first">
                    person.firstName = "Joe";
                    <br>person.lastName = "Smith";
                    <br>person.fullName = function() {
                    <code class="new">return this.firstName+" "+this.lastName;</code>
                    }
                </code>
            </p></div>
            <a name="e6.2"></a><div class="exercises"><h5>&lt;exercises section='6.2'&gt;</h5>
                <ol>
                    <li>TODO - exercises go here!</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="6.3"></a><h2 id="sec6-3-0">6.3 Creating Objects With Literals</h2><p>A <a href="https://en.wikipedia.org/wiki/Literal_(computer_programming)" title="https://en.wikipedia.org/wiki/Literal_(computer_programming)" target="en.wikipedia.org">literal</a> is a <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> that is hard-coded into a program. Whenever you use a number like <code>-4</code> or <code>5.43</code>, a quoted sring like <code>"hello"</code>, a <a href="http://en.wikipedia.org/wiki/Boolean_data_type" title="http://en.wikipedia.org/wiki/Boolean_data_type" target="en.wikipedia.org">Boolean</a> value like <code>true</code>, or a bracketed <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">array</a> like <code>[23,52,-3]</code> in a program, you are using a literal. Like most languages, <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> supports Number, <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">String</a>, Boolean, and Array literals. </p></div>
            
            <p>You already know that unlike many languages, JavaScript supports <a href="http://en.wikipedia.org/wiki/Function_literal" title="http://en.wikipedia.org/wiki/Function_literal" target="en.wikipedia.org">function literals</a> so it should come as no great shock that, also unlike many languages, JavaScript supports <a href="http://en.wikipedia.org/wiki/Literal_(computer_programming)" title="http://en.wikipedia.org/wiki/Literal_(computer_programming)" target="en.wikipedia.org">Object literals</a> too.</p>
            <p>An <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">Object</a> literal must be enclosed in curly brackets. Inside the curly brackets, you put a comma separated list of keys and values (remember, in JavaScript an Object is just an <a href="http://en.wikipedia.org/wiki/Associative_array" title="http://en.wikipedia.org/wiki/Associative_array" target="en.wikipedia.org">associative array</a>). The <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> names must be unquoted and the values can be properly formatted literals (including <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> and object literals) or they can be previously defined <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a>.</p>
            <p>So this is another way of creating an object in JavaScript.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                In a JavaScript console, try the following:
                <code class="first">var x = {name: "Joe", age: 40, male: true};<br>
                    var y = {person: x, numPeople:1};<br>
                    var z = {person1: {name: "Jane", age:31}, person2: {name:"Ruth", age:25}};</code>
                Now type <code>x</code>, <code>y</code>, and <code>z</code> and take a look at the contents of each <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>. Is it what you expected?
                <br><br>
                Try typing <code>x.age</code>, <code>y.person</code> and <code>z.person1</code>. Is the <a href="http://en.wikipedia.org/wiki/Return_statement" title="http://en.wikipedia.org/wiki/Return_statement" target="en.wikipedia.org">return value</a> what you expected?
            </p></div>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Here is another example, this time including a method and with some nicer indenting. Paste it into a JavaScript console:
                <code class="first">
                    var circle = {
                    <code class="new">
                        radius: 10,
                        <br>getArea: function() {
                        <code class="new">
                            return Math.PI*this.radius*this.radius;
                        </code>
                        }
                    </code>
                    };
                </code>
                Now call the <code>circle</code> object's <code>getArea</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a>.
            </p></div>
            <a name="e6.3"></a><div class="exercises"><h5>&lt;exercises section='6.3'&gt;</h5>
                <ol>
                    <li>TODO - exercises go here!</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="6.4"></a><h2 id="sec6-4-0">6.4 Creating Objects With Constructors</h2><p>Here is the code for a Circle class in Java (not JavaScript!) along with a main method that creates two circles and prints their information to the screen. Take a moment to review this code and remind yourself what each line is for. The numbers are not part of the code, of course, they are just there so we can talk about the differences between JavaScript and Java.
                <code class="first">public class Circle {    <span class="bold">1</span>

                    <code class="new">public double radius;   <span class="bold">3</span><br><br>

                        public Circle(int radius) {   <span class="bold">2</span>
                        <code class="new">this.radius = radius;</code>
                        }<br><br>

                        public double area() {  <span class="bold">4</span>
                        <code class="new">return Math.PI * radius * radius;</code>
                        }<br><br>

                        public static void main(String[] args) { <span class="bold">5</span>
                        <code class="new">Circle c = new Circle(10);<br>
                            Circle c2 = new Circle(5);<br>
                            System.out.println("Circle 1 Radius: " + c.radius);<br>
                            System.out.println("Circle 2 Area: " + c2.area());</code>
                        }</code>
                    }</code>
            </p></div>
            
            <p>Here is some equivalent code in JavaScript, again with numbers to help the comparison to Java.
                <code class="first">function Circle(r) { <span class="bold">2</span>
                    <code class="new">this.radius = r; <span class="bold">3</span><br><br>

                        this.area = function() { <span class="bold">4</span>
                        <code class="new">return Math.PI*this.radius*this.radius;</code>
                        }</code>
                    }<br><br>

                    c = new Circle(10); <span class="bold">5</span><br> 
                    c2 = new Circle(5);<br>
                    alert("Circle 1 Radius: "+c.radius);<br>
                    alert("Circle 2 Area: "+c2.area());</code>
            </p>

            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                You will find the above code in the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> in the files <a href="http://localhost:8383/TextBook/examples/Circle.java" target="examples" title="Circle.java">Circle.java</a> and <a href="http://localhost:8383/TextBook/examples/Circle.html" target="examples" title="Circle.html">Circle.html</a>. Run both programs to verify that they do more or less the same thing. (Note that <a href="http://localhost:8383/TextBook/examples/Circle.html" target="examples" title="Circle.html">Circle.html</a> uses <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> to encapsulate everything properly and outputs to a &lt;p&gt; <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> rather than to an alert box, but other than that it is the same as above.)
            </p></div>

            <div class="sectionStart"><a name="6.4.1"></a><h3 id="sec6-4-1">6.4.1 Classes in JavaScript</h3><div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">
                Classes.</span> <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> uses <a href="http://www.w3schools.com/css/css_selectors.asp" title="http://www.w3schools.com/css/css_selectors.asp" target="www.w3schools.com">classes</a> to create <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">objects</a>. <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> does not.
            </p></div></div>
            
            <p>In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> creation and inheritance are based on <a href="http://www.w3schools.com/css/css_selectors.asp" title="http://www.w3schools.com/css/css_selectors.asp" target="www.w3schools.com">classes</a> (labeled â1â in the examples above). You define a class as a blueprint for an object and then you can create multiple objects of that type. </p>
            <p><a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> does not use classes to define objects. That is why the JavaScript example above does not have a â1â label on it anywhere.</p>
            <div class="sectionStart"><a name="6.4.2"></a><h3 id="sec6-4-2">6.4.2 Constructors in JavaScript</h3><p>In Java, constructors (labeled â2â in the examples above) are special <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> defined inside a class. Their job is to create an object, execute some initialization code, and then return the object created.</p></div>
            
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">
                Constructors.</span> <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> constructors are special <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> inside a <a href="http://www.w3schools.com/css/css_selectors.asp" title="http://www.w3schools.com/css/css_selectors.asp" target="www.w3schools.com">class</a> definition. Any <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> can be used as a constructor.
            </p></div>           
            <p>In JavaScript, any <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> can be used as a constructor. In the above example, the function labeled â2â is being used as a constructor.  Notice that the function name is capitalized â this is to indicate its intended use as a constructor, in much the same way that Java programmers capitalize the names of classes.</p>
            <div class="sectionStart"><a name="6.4.3"></a><h3 id="sec6-4-3">6.4.3 Instance Variables (Fields)</h3><p>In Java, instance <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> (labeled â3â in the examples above) are declared in the body of the class, outside of any method.</p></div>
            
            <div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">
                Instance Variables.</span> <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> instance <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> have to be declared. <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> instance variables are not explicitly declared.
            </p></div>           
            <p>In JavaScript, variables do not have to be declared. If you want to create an instance variable in a constructor function, you use the this keyword to indicate that the variable is a <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> of the object created when the constructor function is called.</p>
            <div class="sectionStart"><a name="6.4.4"></a><h3 id="sec6-4-4">6.4.4 Instance Methods</h3><p>In Java, instance methods (labeled â4â in the examples above) are also declared in the body of the class. These methods can access the instance variables of the object.</p></div>
            
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">
                Instance Methods.</span> <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> makes a distinction between <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> and <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a>. <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> supports <a href="https://en.wikipedia.org/wiki/First-class_function" title="https://en.wikipedia.org/wiki/First-class_function" target="en.wikipedia.org">first-class functions</a> so it does not need to make that distinction.
            </p></div>   
            <p>In JavaScript, instance methods are actually instance variables that contain a function. (Recall that in JavaScript, functions are <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a> that can be assigned to variables.) Any function declared using the this keyword, like the one labeled â4â, can access the other instance variables of the object using the this keyword.</p>
            <div class="sectionStart"><a name="6.4.5"></a><h3 id="sec6-4-5">6.4.5 Creating and Using Objects</h3><p>In Java, you create objects by calling their constructors with the new keyword, and you access their public fields and methods with the dot operator (labeled â5â in the examples above). The variables that âstoreâ objects actually store <a href="http://en.wikipedia.org/wiki/Reference_(computer_science)" title="http://en.wikipedia.org/wiki/Reference_(computer_science)" target="en.wikipedia.org">references</a> to those objects rather than the objects themselves. The <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statements</a> to create and access objects must be contained within a method of some kind. In the Java example above, I have defined a main method so that the objects will be created at run time. </p></div>
            
            <p>JavaScript works just like Java for creating and accessing objects. The only difference is that since JavaScript allows <a href="http://en.wikipedia.org/wiki/Imperative_programming" title="http://en.wikipedia.org/wiki/Imperative_programming" target="en.wikipedia.org">imperative programming</a>, you donât have to put the statements that create and access the objects inside a method, though it is often good practice to do so.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load <a href="http://localhost:8383/TextBook/examples/Circle.html" target="examples" title="Circle.html">Circle.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> into a browser, open the <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> console, create a third circle of radius 52.3 and display its area.
            </p></div>
            <div class="sectionStart"><a name="6.4.6"></a><h3 id="sec6-4-6">6.4.6 Information Hiding</h3><p>In Java, you can control access to your variables and methods using keywords like private and protected. This allows you to hide some of the details of the internal workings of your class. </p></div>
            
            <div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">
                Information Hiding.</span> In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> you can mark <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> with the <code>private</code> keyword to limit outside access. In <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> any variable you <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declare</a> inside a <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> (without the <code>this</code> keyword) is private.
            </p></div>   
            <p>In JavaScript, you can also have private variables in an object. You can do this by declaring variables or methods in a constructor function without using the this keyword. These variables and methods are private and can be accessed only within the object. </p>
            <p>Hereâs an example, from <a href="http://localhost:8383/TextBook/examples/Circle2.html" target="examples" title="Circle2.html">Circle2.html</a> in the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> (see <a href="http://localhost:8383/TextBook/examples/Circle2.java" target="examples" title="Circle2.java">Circle2.java</a> for the Java equivalent). 
                <code class="first">
                    function Circle(r) {
                    <code class="new">var radius = r;   // PRIVATE VARIABLE. ONE PER OBJECT CREATED.<br>
                        <br>
                        this.getRadius = function() { // GETTER METHOD FOR PRIVATE VARIABLE.<br>
                        <code class="new">return radius;</code>
                        };<br>
                        <br>
                        this.area = function() {<br>
                        <code class="new">return Math.PI*radius*radius;</code>
                        };</code>
                    }</code>
                JavaScript has an equivalent to Javaâs private and public, but what about the other two <a href="http://en.wikipedia.org/wiki/Visibility_(computer_science)" title="http://en.wikipedia.org/wiki/Visibility_(computer_science)" target="en.wikipedia.org">access levels</a>, protected and package? These levels concern access by subclasses and classes in the same package. Since JavaScript doesnât have classes or packages, these two access levels are not necessary.</p>
            <div class="sectionStart"><a name="6.4.7"></a><h3 id="sec6-4-7">6.4.7 Inheritance</h3><p>JavaScript does not define objects using classes, which means that inheritance has to work in a very different way. </p></div>
            
            <p>In Java (and most other <a href="http://en.wikipedia.org/wiki/Object-oriented_design" title="http://en.wikipedia.org/wiki/Object-oriented_design" target="en.wikipedia.org">object-oriented</a> languages in wide use) you define a class which can inherit fields and methods from its superclasses. 
                JavaScript is much more flexible. You can create objects using a constructor function, and then tweak them to add or remove fields as you wish. </p>
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">
                Inheritance.</span> <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> uses class-based inheritance. <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> uses prototype <a href="http://en.wikipedia.org/wiki/Method_chaining" title="http://en.wikipedia.org/wiki/Method_chaining" target="en.wikipedia.org">chaining</a> to implement inheritance.
            </p></div>   
            <p>In JavaScript, an object is also associated with a prototype that can be used to create similar objects. Prototypes can be used to implement an inheritance mechanism and the correct use of prototypes when creating objects can lead to a more efficient implementation of your code.</p>
            <p>Prototypes are well beyond the <span>scope</span> of this textbook, but it is helpful to know for future reference that you can implement a form of inheritance in JavaScript and that you can make object-oriented implementations more efficient using prototypes. (In Chromeâs JavaScript console, when you examine an object, you will notice its prototype information stored in the <code>__proto__</code> field.)</p>

            <!-- CHAPTER 7 -->
            <div class="sectionStart pageBreak"><a name="7."></a><h1 id="sec7-0-0">7. Programming Challenges</h1><p>At this point, you have all the tools you need to create a fully functioning, <a href="http://en.wikipedia.org/wiki/Client-side" title="http://en.wikipedia.org/wiki/Client-side" target="en.wikipedia.org">client-side</a> <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web app</a>. Here are some ideas for mini-projects that will give you a lot of great practice. In each case, the instructions are displayed in step-by-step stages so you can do all of the project, or just part of it. </p></div>
            

            <div class="sectionStart"><a name="7.1"></a><h2 id="sec7-1-0">7.1 Dice Histogram</h2><p>This <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web app</a> could be used by elementary or secondary school students to explore the probabilities involved in rolling a pair of dice.</p></div>
            
            <img class="fullsize" alt="dice histogram" src="images/dicehistogram.png" style="width: 263px;">
            <ol>
                <li>Create a web app with one button. When the user presses the button, it should "roll" two dice (i.e. generate <a href="http://en.wikipedia.org/wiki/Random_number_generation" title="http://en.wikipedia.org/wiki/Random_number_generation" target="en.wikipedia.org">random numbers</a> from 1 to 6) and display the result of each die the page. (Hint: Use <code>Math.floor(Math.random()*6+1)</code> to simulate each die.) 
                </li><li>Now modify your web app so that it also displays a histogram for the user like the one in the example above, showing the number of times each total from 2 to 12 has been rolled. You can use the file <a href="http://localhost:8383/TextBook/examples/images/six_sided_die.png" target="examples" title="images/six_sided_die.png">images/six_sided_die.png</a> from in the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> to show the number of rolls graphically. You should also show how many rolls there have been in total. (Hint: Use a <a href="http://www.w3schools.com/html/html_tables.asp" title="http://www.w3schools.com/html/html_tables.asp" target="www.w3schools.com">table</a>, alter the <code>innerHTML</code> of the appropriate <code>&lt;td&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> for each roll).</li>
                <li>Add a "clear" button to clear the histogram contents.</li>
                <li>Add "roll 10 times" and "roll 50 times" buttons.</li>
                <li>Add a number input element with another button so that they can choose how many times to roll.
            </li></ol>
            <p></p>

            <div class="sectionStart"><a name="7.2"></a><h2 id="sec7-2-0">7.2 Tic Tac Toe</h2><p>Who doesnât love Tic Tac Toe? In this project you will develop a <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web app</a> that could run on a desktop or a mobile phone.</p></div>
            
            <img class="halfsize" alt="tic tac toe" src="images/tictactoe.png" style="float: right; border: 1px solid black; width: 131.5px;">
            <ol>
                <li>Create a web app that shows a 3 x 3 grid. When the user clicks on a grid square, it should place an X in that square. Make the total grid width less than 320 pixels so it looks good on a mobile phone (also, see the tip below).
                </li><li>Alternate turns. The first click should show an X, then next should show an O, the next an X, and so on. Display whose turn it is in a message under the grid.</li>
                <li>Add code to make sure the grid square is empty before you allow someone to place an X or O. Pop up an error message if they try to place a piece in an occupied spot.</li>
                <li>Add a reset button that clears the grid.</li>
                <li>Add code to detect when the board is full and notify the players of a tie game.</li>
                <li>Add code to detect a win and display a win message. (You might want to use an <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">array</a> for this, though you donât need one. If you want to use an array, check Chapter 7 first.)</li>
            </ol>
            <p>Tip: Mobile phone browsers often default to a really wide screen and zoom out. If they do that, it will make your Tic Tac Toe app hard to use, even though it is sized for a phone. To stop mobile browsers from zooming out, you will need to include the following tag in the <code>&lt;head&gt;</code> section of your HTML: 
                <code class="first">&lt;meta name="viewport" content="width=device-width"&gt;</code>
            </p>

            <div class="sectionStart"><a name="7.3"></a><h2 id="sec7-3-0">7.3 Image Magnifier</h2><p>Many shopping sites let you roll over an image to see a magnified version of that image appear beside it. In the web site pictured here, as the user mouses over the main image the detail appears in a window beside it. A small brightened box on the main image follows the cursor to show what is being displayed in the detail image.</p></div>
            <img class="halfsize" alt="image magnifier" src="images/imagemag.jpg" style="float: right; border: 1px solid black; width: 131.5px;">
            
            <p>Implementing an image magnifier like this is not trivial but the basic trick is to have two images - one that is small to server as the main image and one that is a very large version of the smaller image. This large image can be set as the background of a <code>&lt;div&gt;</code> or similar <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> using <a href="http://www.w3schools.com/css/css_syntax.asp" title="http://www.w3schools.com/css/css_syntax.asp" target="www.w3schools.com">CSS rules</a> and then changing the position of that background (also specified in CSS properties) can be changed in response to mouse movements over the original image. The <code>&lt;div&gt;</code> element will act like a "window" on the image, so if you position the image within the window using top and left coordinates which are negative, only the part of the image that would appear under the <code>&lt;div&gt;</code> element will show through the "window". Getting this right might take some math!</p>
            <p>If you can get the movement and display of the image right, there are also lots of other details to worry about including hiding/showing the detail image when the user mouses in and out and deciding what to do when the user approaches the very edge of the original image.</p>
            <p>The images shown above are available in the <a href="http://localhost:8383/TextBook/examples/marsrover.zip" target="examples" title="marsrover.zip">marsrover.zip</a> file in the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>.</p>

            <div class="sectionStart"><a name="7.4"></a><h2 id="sec7-4-0">7.4 Pong</h2><p>Make a simple live action game using the <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> <a href="http://en.wikipedia.org/wiki/Html5_canvas" title="http://en.wikipedia.org/wiki/Html5_canvas" target="en.wikipedia.org">Canvas</a>. See the sections on animation, game control, and canvas drawing for ideas on how to make this work.</p></div>
            <img src="images/pong.jpg" alt="pong" class="halfsize" style="float: right; border: 1px solid black; width: 131.5px;">
            
            <p>If you want to program games, it's best to start with recreating something relatively simple, like your own version of <a href="http://en.wikipedia.org/wiki/Pong" title="http://en.wikipedia.org/wiki/Pong" target="en.wikipedia.org">pong</a>. Other seemingly simple games like <a href="http://en.wikipedia.org/wiki/Flappy_Bird" title="http://en.wikipedia.org/wiki/Flappy_Bird" target="en.wikipedia.org">Flappy Bird</a>, <a href="http://en.wikipedia.org/wiki/Space_invaders" title="http://en.wikipedia.org/wiki/Space_invaders" target="en.wikipedia.org">Space Invaders</a> or <a href="http://en.wikipedia.org/wiki/Pac-Man" title="http://en.wikipedia.org/wiki/Pac-Man" target="en.wikipedia.org">Pac-Man</a> are surprisingly challenging for new programmers, but definitely worth a shot if this sort of programming appeals to you.</p>
            <p>Of course there are lots of JavaScript games already on the web with code that you can look at, but many of these games are made with frameworks or use advanced programming techniques. To see a JavaScript game with code that might be a bit more understandable, take a look at <a href="http://www-acad.sheridanc.on.ca/staff/scottsam/twittybird/" title="http://www-acad.sheridanc.on.ca/staff/scottsam/twittybird/" target="www-acad.sheridanc.on.ca">Twitty Bird<span class="printonly"> [http://www-acad.sheridanc.on.ca/staff/scottsam/twittybird/]</span></a>, this author's version of Flappy Bird.</p>
            <p>For some sounds and images to help you create a game like Pong, get the file <a href="http://localhost:8383/TextBook/examples/pong.zip" target="examples" title="pong.zip">pong.zip</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>.</p>

            <!-- CHAPTER 10 -->
            <div class="sectionStart pageBreak"><a name="8."></a><h1 id="sec8-0-0">8. Server-Independent Web Apps</h1><p>You now have almost have all the tools you need to create a true <a href="http://en.wikipedia.org/wiki/Client-side" title="http://en.wikipedia.org/wiki/Client-side" target="en.wikipedia.org">client-side</a> <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web app</a>. You can define an interface in HTML and CSS, using form <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> if required, and then add functionality to it in <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>. But these web apps are still dependent on a connection to the server. They are not independent in the way that standalone apps are. </p></div>
            
            <ol>
                <li>Web apps donât have any file access. This means you canât open a file on the client machine and store data for the user to access the next time they run your app. The only alternative before <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> was to store the userâs data on the server and retrieve it when they return, making the app dependent on a connection to the server.</li>
                <li>Web apps have to be reloaded each time the browser is restarted. Before HTML5 this meant that if the user loses their internet connection, or if your server goes down, they will not be able to load and run your app.</li>
            </ol>
            <div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">
                File Access.</span> <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> applications have complete access to the machine they are running on. They can read and write to files and databases. Because <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> programs run on web pages, it would be too dangerous to give them this kind of access to the <a href="http://en.wikipedia.org/wiki/Local_variable" title="http://en.wikipedia.org/wiki/Local_variable" target="en.wikipedia.org">local</a> machine â some evil person could embed JavaScript into a web page to wipe out the userâs hard drive!
            </p></div>
            <p>But HTML5 is changing all that. The new <a href="http://en.wikipedia.org/wiki/Web_storage" title="http://en.wikipedia.org/wiki/Web_storage" target="en.wikipedia.org">web storage</a> system in HTML5 provides an easy way to store data on the clientâs machine either temporarily or permanently, and the new <a href="http://www.w3schools.com/html/html5_app_cache.asp" title="http://www.w3schools.com/html/html5_app_cache.asp" target="www.w3schools.com">app cache</a> allows a user to "reload" a web app they have visited before even when there is no connection to the server. These two new capabilities allow us to create fully functional apps in a web browser that are independent of the server. </p>

            <div class="sectionStart"><a name="8.1"></a><h2 id="sec8-1-0">8.1 Web Storage</h2><p>Web developers often want their sites to remember users, maintain their settings between page loads, and even keep <a href="http://en.wikipedia.org/wiki/Local_variable" title="http://en.wikipedia.org/wiki/Local_variable" target="en.wikipedia.org">local</a> copies of the data the user entered for the next time they visit. In the past, this was done by setting <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" title="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="en.wikipedia.org">HTTP</a> <a href="http://en.wikipedia.org/wiki/HTTP_cookie" title="http://en.wikipedia.org/wiki/HTTP_cookie" target="en.wikipedia.org">Cookies</a> on the userâs hard drive. </p></div>
            
            <p>Cookies are small pieces of data (maximum 4KB) that are stored on the client machine by the browser, linked to a particular URL. They are accessible through <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> and are automatically sent to the server along with every HTTP request. They are typically used to store a unique identifier for each user or session, and then the bulk of a userâs data is stored on the <a href="https://en.wikipedia.org/wiki/Server_side" title="https://en.wikipedia.org/wiki/Server_side" target="en.wikipedia.org">server side</a> using this unique identifier. This is how sites like <a href="http://www.facebook.com" title="http://www.facebook.com" target="www.facebook.com">Facebook<span class="printonly"> [http://www.facebook.com]</span></a> recognize you when you return.</p>
            <p>As an alternative to cookies and server-side databases, <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> offers two new JavaScript objects: <code>localStorage</code> for long term data storage and <code>sessionStorage</code> for temporary data storage. Each domain name gets a single <code>localStorage</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> in the browser as well as a <code>sessionStorage</code> object for each open tab. These objects can store up to 10 MB of data, and this data is stored on the client. It is not automatically sent to the server the way that cookies are. The data in <code>sessionStorage</code> is automatically deleted when the browser tab is closed, but the data in <code>localStorage</code> is only ever deleted when a JavaScript program decides to delete it, or when the user clears their browser history. Otherwise, itâs permanent.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Go to a site like Google or Facebook in Chrome. Press F12 and go to the resources tab to see what these sites have put in your sessionStorage and localStorage objects.
                <br><br>Now go to the JavaScript console and type the following to see the same information:
                <code class="first">
                    sessionStorage
                    <br>localStorage
                </code>
            </p></div>
            <p>The <code>sessionStorage</code> and <code>localStorage</code> objects work just like any other object, except that they can only store <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a> data. Each item of data is stored under a defined "key", and is accessed the same way as any other object, with square bracket notation or dot notation.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                On the same web you used for the last DIY box, go to the JavaScript console and type the following:
                <code class="first">
                    localStorage["name"]="Bob";
                    <br>localStorage.number=22342;
                </code>
                Now type the following to see what you entered.
                <code class="first">localStorage
                    localStorage.name;
                    <br>localStorage["number"];
                </code>
                Notice that the response from the last line is in quotes. This means that the number you entered was converted to a <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a> before being stored.
                <br><br>Now repeat the above commands with <code>sessionStorage</code>. Then restart the browser, go back to the page you were on and check the <code>localStorage</code> and <code>sessionStorage</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">objects</a> to see what data remains.
            </p></div>
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">
                Flexible Objects.</span> In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, once an <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> is created, you canât add any new <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a> or <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a>. In <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>, any object can be extended with new fields and methods any time. This makes JavaScript very flexible, but also creates some debugging nightmares. If you misspell a field name in Java, you get a <a href="http://en.wikipedia.org/wiki/Syntax_error" title="http://en.wikipedia.org/wiki/Syntax_error" target="en.wikipedia.org">syntax error</a>. But do the same in JavaScript and you get a new field added to the object!
            </p></div>
            <p>An aside: In the DIY box above, you might notice that we are adding <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a> called <code>name</code> and <code>number</code> to the <code>localStorage</code> object on the fly. The fact that <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> donât have to be declared in JavaScript (even though you should always <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declare</a> them!) extends to object fields as well. You can add a field to any object just by assigning something to it. You can even add new fields to the <code>document</code> object if you want, as shown below.
                <code class="first">document.newField = 12;</code>
            </p>
            <p>Both <a href="http://en.wikipedia.org/wiki/Web_storage" title="http://en.wikipedia.org/wiki/Web_storage" target="en.wikipedia.org">web storage</a> objects also contain a <code>removeItem</code> that can be used to remove a single field and a <code>clear</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a> that can be used to remove all fields at once.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Go back to the page from the last DIY box and open the JavaScript console. Type the following:
                <code class="first">
                    localStorage.removeItem("name")
                    <br>localStorage
                </code>
                Notice that the name <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> is now gone from the <code>localStorage</code> object. Now try this:
                <code class="first">
                    localStorage.clear()
                    <br>localStorage
                </code>
                Now the <code>localStorage</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> should be completely empty.
            </p></div>

            <div class="sectionStart"><a name="8.1.1"></a><h3 id="sec8-1-1">8.1.1 Initializing Web Storage</h3><p>Suppose you are counting how many times a user visits your site. On the userâs first visit, you will have to create the counter item in <code>localStorage</code> and set it to 1. On subsequent visits, you should not re-create the counter. Instead, you should access it and increment it. So you need a way to figure out if the user has been here before.</p></div>
            
            <p>The code below accomplishes this by taking advantage of the fact JavaScript treats the special <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> <code>undefined</code> the same as <code>false</code> in a <a href="http://en.wikipedia.org/wiki/Boolean_data_type" title="http://en.wikipedia.org/wiki/Boolean_data_type" target="en.wikipedia.org">Boolean</a> expression, and everything else (other than 0 and the empty string) as <code>true</code>. So if the user has not been here before, the else clause will initialize the counter. Otherwise, the counter will be incremented. Notice also the mandatory use of <code>parseInt</code> here. What would happen if <code>parseInt</code> was left out?
                <code class="first">
                    if (localStorage.counter)
                    <code class="new">
                        localStorage.counter = parseInt(localStorage.counter) + 1;
                    </code>
                    else 
                    <code class="new">
                        localStorage.counter = 1; 
                    </code>
                </code>
            </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load up <a href="http://localhost:8383/TextBook/examples/webStorageDemo.html" target="examples" title="webStorageDemo.html">webStorageDemo.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> to see the above code in action. Hit reload a couple of times to see the counters move. Then open the page again in another tab to see what happens to the counters.
                <br><br>This web page uses <code>localStorage</code> to count the total number of visits and <code>sessionStorage</code> to count the number of return visits this session. If you open the page in a new tab, the session count will reset, but even if you close the browser and re-open it, the total count will be remembered.
                <br><br>Note the use of the <code>onload</code> <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> in the <code>&lt;body&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>. This makes sure that the count() <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> will run once on each page load, but not until after the entire <code>&lt;body&gt;</code> is loaded.
            </p></div>

            <div class="sectionStart"><a name="8.1.2"></a><h3 id="sec8-1-2">8.1.2 Advice on Sharing Web Storage</h3><p>The one drawback to <code>localStorage</code> is that if your site is on a domain that has multiple users accounts (like <code>mobile.sheridanc.on.ca</code>), somebody elseâs <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web app</a> could access, clear, and overwrite your <code>localStorage</code> data. There is nothing that can be done to avoid this other than buying your own private domain, but failing that, itâs a good idea to name your data in such a way that is likely to be unique.</p></div>
            
            <p>For exampleâ¦
                <code class="first">localStorage["App2938475SamScott_vehicle"]="Aveo";</code>
                â¦ is less likely to be tampered with thanâ¦
                <code class="first">localStorage["vehicle"]="Aveo";</code>
            </p>
            <a name="e8.1.2"></a><div class="exercises"><h5>&lt;exercises section='8.1.2'&gt;</h5>
                <img class="halfsize" alt="memo pad app" src="images/memopad.png" style="float: right; width: 102.545px;">
                <ol>
                    <li>Write a simple standalone <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web app</a> with two pages. On page one, have the user fill in a form with their name and the color shirt they are wearing. If they have been here before, you should fill in their name automatically. Store their name in <code>localStorage</code> and their shirt color in <code>sessionStorage</code>. Provide a link to page 2. On page 2, you should greet the user by name and tell them whether you like their shirt or not, based on the color they entered last time (e.g. write an <a href="http://en.wikipedia.org/wiki/If_statement" title="http://en.wikipedia.org/wiki/If_statement" target="en.wikipedia.org">if statement</a> that only says you like their shirt if they say it was red). Provide a link back to page 1. </li>
                    <li>Write a mobile "memo pad" application. This application should allow the user to type into a text area. The text should be stored in <code>localStorage</code> and displayed when they return for them to read or modify. Make it look professional (like a real app you might see on a mobile phone).</li>
                    <li>As an added challenge to question 2, allow 50 pages of memo storage with buttons or other form <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> to allow them to flip through the pages.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="8.2"></a><h2 id="sec8-2-0">8.2 The App Cache</h2><p>With <code>localStorage</code> you can create a standalone <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web app</a> like the mobile memo pad above, but youâre still dependent on the server because each time the user wants to load your app, they have to send an <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" title="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="en.wikipedia.org">HTTP</a> request and download it again. It would be much better if the app could be stored locally like a native app. And thatâs exactly what the <a href="http://en.wikipedia.org/wiki/HTML5" title="http://en.wikipedia.org/wiki/HTML5" target="en.wikipedia.org">HTML5</a> <a href="http://www.w3schools.com/html/html5_app_cache.asp" title="http://www.w3schools.com/html/html5_app_cache.asp" target="www.w3schools.com">app cache</a> does.</p></div>
            
            <p>To use the app cache, you need two things: </p>
            <ol>
                <li>An app cache "manifest" file, and </li>
                <li>2. A <code>manifest</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> on the <code>&lt;html&gt;</code> tag of the siteâs front page.</li>
            </ol>
            <p>Weâll cover these in reverse order.</p>

            <div class="sectionStart"><a name="8.2.1"></a><h3 id="sec8-2-1">8.2.1 The <code>manifest</code> Attribute</h3><p>The <code>manifest</code> attribute is part of the <code>&lt;html&gt;</code> tag. It specifies the location of a manifest file, like so:
                <code class="first">
                    <code>&lt;html manifest="myManifest.appcache"&gt;</code>
                    <code class="new">
                        â¦ (your page goes here) â¦
                    </code>
                    <code>&lt;/html&gt;</code>
                </code>
            </p></div>
            
            <p>The name of the manifest file doesnât really matter, but the <code>.appcache</code> file extension is recommended to ensure that the server marks it with the <a href="http://en.wikipedia.org/wiki/Mime_types" title="http://en.wikipedia.org/wiki/Mime_types" target="en.wikipedia.org">MIME Type</a> <code>"text/cache-manifest"</code>. The usual rules apply for specifying the file path (same as the rules for the <code>href</code> or <code>src</code> attribute). So you could also put the <code>.appcache</code> file in its own folder as long as you specify the path to it. (In the above example, the manifest file is in the same folder as the HTML file that <a href="http://en.wikipedia.org/wiki/Reference_(computer_science)" title="http://en.wikipedia.org/wiki/Reference_(computer_science)" target="en.wikipedia.org">references</a> it.)</p>
            <p>The presence of a manifest attribute in an HTML file will cause the manifest file to be automatically stored locally to be accessed when the user is offline. The contents of the manifest file specify which other files should also be stored locally along with the manifest.</p>
            <p>If your web app uses the app cache, it will only be loaded one time. Future visits to the page will load the remote manifest file and check it against the locally stored copy. If they match, none of the cached files will be re-loaded. <a href="http://en.wikipedia.org/wiki/Local_variable" title="http://en.wikipedia.org/wiki/Local_variable" target="en.wikipedia.org">Local</a> copies will be used instead. So using the app cache also saves bandwidth. But the main point is that if there is no connection or the server does not respond, the app will still load using cached copies of all the files. </p>

            <div class="sectionStart"><a name="8.2.2"></a><h3 id="sec8-2-2">8.2.2 The Manifest File</h3><p>Here is the content of a simple cache manifest file:
                <code class="first">
                    CACHE MANIFEST
                    <br>#May 29, 2012, 6:34 pm
                    <br>js/memo.js
                    <br>css/memo.css
                    <br>images/116_2.jpg
                </code>
            </p></div>
            
            <p>The first line is required. The line that starts with a <code>#</code> character is just a comment. The remaining lines specify which files on the site are to be cached (along with the HTML file that loaded this manifest). These are file paths relative to the location of the manifest file. </p>
            <p>You can also include a <code>NETWORK</code> section. This section specifies files that must be loaded fresh from the server every time. And you can also include a <code>FALLBACK</code> section that specifies a file to be loaded if a page is not accessible. You can read more about these options on the <a href="http://www.w3schools.com/html/html5_app_cache.asp" title="http://www.w3schools.com/html/html5_app_cache.asp" target="www.w3schools.com">w3Schools HTML5 Application Cache</a> page.</p>   
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                You can only test the app cache if you have access to a web server â either a remote web server on a different machine, or a development web server like WampServer or <a href="http://www.apachefriends.org/en/xampp-windows.html" title="http://www.apachefriends.org/en/xampp-windows.html" target="www.apachefriends.org">XAMPP<span class="printonly"> [http://www.apachefriends.org/en/xampp-windows.html]</span></a> running on your own machine. 
                <br><br>If you have a server, upload the files in the <a href="http://localhost:8383/TextBook/examples/appCacheExperiments" target="examples" title="appCacheExperiments">appCacheExperiments</a> folder of the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and try them out. Try accessing them each while on line, then sever your network connection and try again. Try to figure out why each one loads or does not load.
            </p></div>
            <p><span class="bold">Important:</span> Remember that returning users check the manifest first and if it has not changed, they will load local copies of the files only. So when you update your site, it is crucial that you update your manifest file as well, even if all the file names are the same, you must at least change one comment line in the manifest file. If you donât do this, returning users will not see the updated site.</p>         
            <a name="e8.2.2"></a><div class="exercises"><h5>&lt;exercises section='8.2.2'&gt;</h5>
                <ol>
                    <li>Update your two-page app from section 9.1 to use the <a href="http://www.w3schools.com/html/html5_app_cache.asp" title="http://www.w3schools.com/html/html5_app_cache.asp" target="www.w3schools.com">app cache</a> so that it still loads even if the user is off line. </li>
                    <li>Update your memopad app so it works off line as well.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>



            <!-- CHAPTER 9 -->
            <div class="sectionStart pageBreak"><a name="9."></a><h1 id="sec9-0-0">9. Advanced DOM Manipulation</h1><p>It's time to get more serious about the HTML <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a>. Up until now you have navigated the DOM by using  <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> like <code>getElementById</code> or <code>querySelectorAll</code> to pull out specific <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a>. You have also made changes to the DOM by accessing a node's <code>innerHTML</code> <a href="https://en.wikipedia.org/wiki/Property_(computer_science)" title="https://en.wikipedia.org/wiki/Property_(computer_science)" target="en.wikipedia.org">property</a>, or by changing <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attributes</a> and CSS style properties. These techniques can get you a long way, but there will be times when you will want to navigate and manipulate the DOM in more sophisticated ways.</p></div>
            
            <p>For example, this textbook uses <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> to build and insert its own contents section after it is loaded (check the page source and you will not see a <a href="http://www.w3schools.com/html/html_tables.asp" title="http://www.w3schools.com/html/html_tables.asp" target="www.w3schools.com">table</a> of contents there). This could be done by getting the <code>innerHTML</code> of the <code>&lt;body&gt;</code> and then building and inserting a new substring for the contents section, but it would be tricky to reliably find the right place in the <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a> for the insertion, and building such a long HTML string would be tedious and prone to error. It's easier to do it by creating new DOM <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">nodes</a> from scratch and using the DOM <code>appendChild</code> and <code>insertBefore</code> methods. You'll learn how to do that in this chapter.</p>
            <p>This textbook also intelligently resizes images using JavaScript when the browser width changes so that an image is always either its original size, or just big enough to fit inside the <code>&lt;div&gt;</code> that contains it. This would be very tricky to do using <code>innerHTML</code>. It's much easier to do with the techinques of <a href="http://en.wikipedia.org/wiki/Tree_(data_structure)" title="http://en.wikipedia.org/wiki/Tree_(data_structure)" target="en.wikipedia.org">tree</a> <a href="http://en.wikipedia.org/wiki/Tree_traversal" title="http://en.wikipedia.org/wiki/Tree_traversal" target="en.wikipedia.org">traversal</a> you will learn in this chapter.</p>

            <div class="sectionStart"><a name="9.1"></a><h2 id="sec9-1-0">9.1 The Full DOM</h2><p>Consider the HTML source below (<a href="http://localhost:8383/TextBook/examples/domExample.html" target="examples" title="domExample.html">domExample.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>).
                <code class="first">
                    &lt;!DOCTYPE html&gt;
                    <br>&lt;html&gt;
                    <code class="new">
                        &lt;head&gt;
                        <code class="new">
                            &lt;title&gt;DOM Example&lt;/title&gt;
                            <br>&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
                        </code>
                        &lt;/head&gt;
                        <br>&lt;body&gt;
                        <code class="new">
                            &lt;div id="div1"&gt;This div has ID "div1"&lt;/div&gt;
                            <br>&lt;div&gt;This div has no ID&lt;/div&gt;
                            <br>&lt;div&gt;This div has no ID&lt;/div&gt;
                        </code>
                        &lt;/body&gt;
                    </code>
                    &lt;/html&gt;
                </code>
            </p></div>
            
            <p>Following the analysis we developed in Chapter 4, we should expect the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> for this document to look like this:</p>
            <img class="fullsize" alt="dom example" src="images/htmldomexample5.jpg" style="width: 263px;"> 
            <p>Here's a terminology reminder. In the picture above, there are 10 nodes. The <span class="bold">root node</span> is <code>&lt;document&gt;</code>. It has two <span class="bold">children</span> or <span class="bold">child nodes</span>. Each of the children share the same <span class="bold">parent</span>. The line from parent to child means that the child is contained within the parent. If there are many children, they are usually shown in order from left to right. Nodes that share a parent are <span class="bold">siblings</span> (this is the gender-neutral term for "brother" or "sister"). Each of the children of the <code>&lt;body&gt;</code> <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">node</a> has two siblings. Each Node contains a <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> for every <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> as well as <code>style</code> and <code>className</code> fields.</p>
            <p>So far, so good. But we were oversimplifying in Chapter 2. In fact, the browser will create a surprisingly complicated DOM from this source, as shown below.</p>
            <img class="fullsize" alt="dom example" src="images/htmldomexample.jpg" style="width: 263px;">
            <p>The things in quotation marks are TextNodes. They are a different kind of <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> from a regular DOM Node. They don't have attributes, style, className or <code>innerHTML</code>. Rather they just have a field named <code>data</code> that contains a <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a> representing the text. When the browser reads the document, a TextNode will be created for almost every sequence of characters in the document that is not enclosed within <code>&lt;</code> and <code>&gt;</code> angle brackets, including every stretch of whitespace characters at the beginning or end of a line. The only stretches of whitespace that don't get turned into TextNodes are those that are not inside or between the <code>&lt;head&gt;</code> and <code>&lt;body&gt;</code> tags.</p>
            <a name="e9.1"></a><div class="exercises"><h5>&lt;exercises section='9.1'&gt;</h5>
                <ol>
                    <li>Go back to the <a href="http://localhost:8383/TextBook/examples/helloWorld.html" target="examples" title="helloWorld.html">helloWorld.html</a> file from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> that we looked at in Chapter 2. Look at the source and use it to draw the full <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> <a href="http://en.wikipedia.org/wiki/Tree_(data_structure)" title="http://en.wikipedia.org/wiki/Tree_(data_structure)" target="en.wikipedia.org">tree</a>, including all text <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">nodes</a>.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>
            <div class="sectionStart"><a name="9.2"></a><h2 id="sec9-2-0">9.2 Traversing the DOM</h2><p>A <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> in <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> is a collection of <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">Node</a> objects that are all linked together into a <a href="http://en.wikipedia.org/wiki/Tree_(data_structure)" title="http://en.wikipedia.org/wiki/Tree_(data_structure)" target="en.wikipedia.org">tree</a> structure with the <code>document</code> object at the root. In order to effectively manipulate the DOM, you will sometimes have to understand the various ways to navigate this structure, moving from node to node by following the links. The following <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a> and <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> will help you with tree <a href="http://en.wikipedia.org/wiki/Tree_traversal" title="http://en.wikipedia.org/wiki/Tree_traversal" target="en.wikipedia.org">traversal</a>.</p></div>
            
            <div class="table">                
                <table>
                    <tbody><tr><td><code>childNodes</code>:</td><td>returns an array of all child nodes of the current node</td></tr>
                    <tr><td><code>firstChild</code>:</td><td>returns the first child of the current node</td></tr>
                    <tr><td><code>lastChild</code>:</td><td>returns the last child of the current node</td></tr>
                    <tr><td><code>nextSibling</code>:</td><td>returns the sibling to the right of the current node</td></tr>
                    <tr><td><code>previousSibling</code>:</td><td>returns the sibling to the left of the current node</td></tr>
                    <tr><td><code>data</code>:</td><td>if this is a TextNode, gets the text</td></tr>
                </tbody></table>
            </div>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load up <a href="http://localhost:8383/TextBook/examples/domExample.html" target="examples" title="domExample.html">domExample.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, open a JavaScript console, and try the following. Try to predict the result of each before you hit enter:
                <code class="first">
                    document.childNodes
                    <br>document.firstChild
                    <br>document.lastChild
                    <br>document.childNodes[0]
                    <br>document.lastChild.childNodes
                </code>
                Can you explain the result in each case?
                <br><br>Now try <code>document.lastChild.childNodes[0].childNodes</code> and explain the result.
                <br><br>Now for a challenge. Find as many ways as you can to get the TextNode from the second <code>&lt;div&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>. Remember that the TextNode is a special child <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">node</a>, not an <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> or a <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> (i.e. don't use <code>innerHTML</code>).
            </p></div>
            <a name="e9.2"></a><div class="exercises"><h5>&lt;exercises section='9.2'&gt;</h5>
                <ol>
                    <li>Load <a href="http://localhost:8383/TextBook/examples/domExample.html" target="examples" title="domExample.html">domExample.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> into a browser. Use the <code>document</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> along with  <code>childNodes</code>, <code>firstChild</code>, <code>lastChild</code> and other <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a> you learned about in the previous section to verify that the document does indeed have the structure shown above.</li>
                    <li>Check the structure you drew for <a href="http://localhost:8383/TextBook/examples/helloWorld.html" target="examples" title="helloWorld.html">helloWorld.html</a> using the same <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a>.</li>
                    <li>In the last DIY box you were asked to find as many ways as you can to get the TextNode from the second <code>&lt;div&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>. How many ways do you think there are in total to do this using the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> navigation methods give above? Justify your answer.
                </li></ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="9.3"></a><h2 id="sec9-3-0">9.3 Getting a DOM Node from an Event</h2><p>There is another way to get hold of a <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">node</a> from the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> that is sometimes useful. Whenever you register an <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handler on an <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> (such as a click event handler on a button or a mouse over event handler on a <a href="http://www.w3schools.com/html/html_tables.asp" title="http://www.w3schools.com/html/html_tables.asp" target="www.w3schools.com">table</a> element) you have the option of using an <code>event</code> parameter.</p></div>
            
            <div class="DIY" id="test5"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try the following in a browser console for this book. It will attach an event handler to this DIY box.
                <code class="first">
                    document.getElementById("test5").addEventListener("click", function (event) {
                    <code class="new">
                        alert(event.target.innerHTML);
                    </code>
                    });;
                </code>
                Now click this DIY box to see the result. Depending on where you click, you might get the entire <code>innerHTML</code> for this DIY box in an <code>alert</code> window, or you might just get part of it. Try clicking in different places. What do the results tell you about the <code>event.target</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>?
            </p></div>
            <p>One very important piece of information in the <code>event</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> is the <a href="http://en.wikipedia.org/wiki/Reference_(computer_science)" title="http://en.wikipedia.org/wiki/Reference_(computer_science)" target="en.wikipedia.org">reference</a> to the DOM node that triggered it, known as the "target". This DOM node object is stored in the <code>event.target</code> <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a>. In the above example, the user will get an alert with the <code>innerHTML</code> contents of the node that triggered the event. </p>
            <p>In addition to <code>innerHTML</code>, you could also use any other DOM fields or <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> with <code>event.target</code>, such as <code>event.target.parentNode.innerHTML</code>, <code>event.target.nextSibling.id</code>, and so on.
            </p><p>This can be extremely useful when you are adding events to a page with lots of similar elements. In the above example, there could be 500 different <code>&lt;div&gt;</code> elements on the page, and without <code>event.target</code>, you would need to write 500 different event handlers.</p>
            <p>For a complete reference on the DOM Event object and all its associated fields and methods, go to the <a href="http://www.w3schools.com/jsref/dom_obj_event.asp" title="http://www.w3schools.com/jsref/dom_obj_event.asp" target="www.w3schools.com">w3Schools event object reference</a>. </p>
            <a name="e9.3"></a><div class="exercises"><h5>&lt;exercises section='9.3'&gt;</h5>
                <ol>
                    <li>The file <a href="http://localhost:8383/TextBook/examples/domExample2.html" target="examples" title="domExample2.html">domExample2.html</a> in the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> shows a similar example to the one above. Add some <code>&lt;div&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a>, each with different <code>id</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attributes</a>, and then modify the <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handler to display the id attribute of the element that was clicked.</li>
                    <li>Now put <code>&lt;input type="button" value="ID"&gt;</code> beside each of the <code>&lt;div&gt;</code> elements, and add click handlers to all these buttons that display the id attribute of the <code>&lt;div&gt;</code> beside them (hint: the <code>&lt;div&gt;</code> for each button should be its <code>previousSibling</code>).</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="9.4"></a><h2 id="sec9-4-0">9.4 Using innerHTML to Modify the DOM</h2><p>There is one really quick way to make modifications to the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a>, and thatâs to alter the <code>innerHTML</code> of a <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">node</a>. Youâve probably already used this <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> to change the text of an <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>, but itâs actually much more powerful than that. With the <code>innerHTML</code> field of a node, you can quickly delete all its child nodes, replace them with new ones nodes, or append child nodes to the end of its existing list of child nodes.</p></div> 
            

            <div class="sectionStart"><a name="9.4.1"></a><h3 id="sec9-4-1">9.4.1 Delete All Child Nodes</h3><p>If you assign an empty <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a> to the <code>innerHTML</code> field of any DOM node, you will delete every node that is a child of that node.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load <a href="http://localhost:8383/TextBook/examples/domExample.html" target="examples" title="domExample.html">domExample.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> into a browser and try one of these in the JavaScript console.
                <code class="first">
                    document.querySelector("body").innerHTML = ""; 
                    <br>document.lastChild.lastChild.innerHTML = ""; 
                </code>
            </p></div>
            After the above operation, the DOM tree looks like the one below. 
            <img class="fullsize" alt="dom example" src="images/htmldomexample2.jpg" style="width: 263px;">
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                You can verify the above claim in the <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> tab of the Chrome developer tools, or by inspecting the <code>document</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>.
                <br><br>Go to page source, and compare that to what you see in the Elements tab in Chromeâs developer tools. Can you explain the difference?
            </p></div>

            <div class="sectionStart"><a name="9.4.2"></a><h3 id="sec9-4-2">9.4.2 Replace All Child Nodes With a Text Node</h3><p>If you put some plain text in the string you assign to <code>innerHTML</code>, you will replace all the children of that node with a single Text Node (or insert a new Text Node if the element had no children).</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try the following on domExample.html.
                <code class="first">
                    document.querySelector("body").children[1].innerHTML="Hello"; 
                </code>
                What does the document <a href="http://en.wikipedia.org/wiki/Tree_(data_structure)" title="http://en.wikipedia.org/wiki/Tree_(data_structure)" target="en.wikipedia.org">tree</a> look like now? Now try the same thing with the <code>&lt;body&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>. Now what does the tree look like?
                <br><br>Compare the page source view of the document to the view of the document in the Elements tab of the developer console in chrome. Can you explain the differences?
            </p></div>

            <div class="sectionStart"><a name="9.4.3"></a><h3 id="sec9-4-3">9.4.3 Replace All Child Nodes With New Nodes</h3><p>In the example below the Text Node child of the selected <code>&lt;div&gt;</code> element will be deleted and replaced with two <code>&lt;p&gt;</code> nodes, each with their own Text Node contents.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try the following in a browser console for <a href="http://localhost:8383/TextBook/examples/domExample.html" target="examples" title="domExample.html">domExample.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>.
                <code class="first">
                    document.getElementById("div1").innerHTML = "<code>&lt;p&gt;</code>Para 1<code>&lt;/p&gt;</code><code>&lt;p&gt;</code>Para 2<code>&lt;/p&gt;</code>"; 
                </code>
                What does the <a href="http://en.wikipedia.org/wiki/Tree_(data_structure)" title="http://en.wikipedia.org/wiki/Tree_(data_structure)" target="en.wikipedia.org">tree</a> look like now?
            </p></div>
            <p>	This is true DOM manipulation because you have removed one DOM element and added two new ones in its place.</p>
            <p>The new <a href="http://en.wikipedia.org/wiki/Tree_(data_structure)" title="http://en.wikipedia.org/wiki/Tree_(data_structure)" target="en.wikipedia.org">tree</a> looks like this:</p>
            <img class="fullsize" alt="dom example" src="images/htmldomexample3.jpg" style="width: 263px;">

            <div class="sectionStart"><a name="9.4.4"></a><h3 id="sec9-4-4">9.4.4 Append New Child Nodes</h3><p>Finally, you can always append new DOM elements by using <code>+=</code> instead of <code>=</code>. </p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try the following in a browser console for <a href="http://localhost:8383/TextBook/examples/domExample.html" target="examples" title="domExample.html">domExample.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, and then draw the resulting <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> <a href="http://en.wikipedia.org/wiki/Tree_(data_structure)" title="http://en.wikipedia.org/wiki/Tree_(data_structure)" target="en.wikipedia.org">tree</a>.
                <code class="first">
                    document.lastChild.lastChild.firstChild.nextSibling.innerHTML += "<code>&lt;p&gt;</code>Here is a <code>&lt;a href='http://www.google.ca'&gt;</code>link<code>&lt;/a&gt;</code><code>&lt;/p&gt;</code>"; 
                </code>
            </p></div>
            <a name="e9.4.4"></a><div class="exercises"><h5>&lt;exercises section='9.4.4'&gt;</h5>
                <ol>
                    <li>Add a button to domExample.html. Every time the button is pressed, add a new <code>&lt;div&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> to the <code>&lt;body&gt;</code> element, each with a text <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">node</a> "New Div X" where X is the number of the new node, counting upwards from 1.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="9.5"></a><h2 id="sec9-5-0">9.5 Creating New Nodes From Scratch</h2><p>Manipulating the <code>innerHTML</code> <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> is a very powerful technique for changing the HTML <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> and is often easier than other <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a>. But it can get complicated in some cases, and it is often easier to create the new DOM <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> yourself rather than trying to manipulate the innerHTML <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a>. </p></div>
            
            <p>To create a new DOM <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">Node</a>, you can use the <code>document.createElement</code> method, giving it the tag name as a string parameter. Here are some examples:</p>
            <div class="table">
                <dl>
                    <dt><code>d=document.createElement("div");</code></dt><dd>creates a new <code>&lt;div&gt;</code> node</dd>
                    <dt><code>e=document.createElement("a");</code></dt><dd>creates a new <code>&lt;a&gt;</code> node</dd>
                    <dt><code>e.href="http://www.google.ca";</code></dt><dd>sets the <code>href</code> attribute of the new <code>&lt;a&gt;</code> node</dd>
                    <dt><code>e.innerHTML="Click for Google."</code></dt><dd>adds a text node to the new <code>&lt;a&gt;</code> node</dd>
                </dl>
            </div>
            <p>The above code creates two new DOM Nodes and stores them in <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> named <code>d</code> and <code>e</code> respectively. The <code>&lt;div&gt;</code> node in <code>d</code> is empty, but we can make the <code>e</code> element its child by using the <code>appendChild</code> method.</p>
            <div class="table">
                <dl>
                    <dt><code>d.appendChild(e);</code></dt><dd>adds e as the last child of d</dd>
                </dl>
            </div>
            <img class="halfsize" alt="dom example" src="images/htmldomexample4.jpg" style="float: right; width: 131.5px;">
            <p>What we now have is a little piece of a DOM, depicted at right. At the moment it is not included in the tree, but we could easily add it as the last child of the body of any document by using appendChild again, like this:
                <code class="first">document.body.appendChild(d);</code>
            </p>
            <p>Note the use of the <code>body</code> field above. This is a special field in the <code>document</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> that takes you straight to the <code>&lt;body&gt;</code> element. There's also a <code>head</code> field.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try out this code in a JavaScript console for <a href="http://localhost:8383/TextBook/examples/domExample.html" target="examples" title="domExample.html">domExample.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>.
                <code class="first">
                    var d=document.createElement("div");
                    <br>var e=document.createElement("a");
                    <br>e.href="http://www.google.ca";
                    <br>e.innerHTML="Click for Google.";
                    <br>d.appendChild(e);
                    <br>document.body.appendChild(d);
                </code>
                Check that the new <code>&lt;div&gt;</code> is inserted and that the link works. Then use the same code twice to add two identical new <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a>. What if you wanted to add 100 new identical elements? How could you do it?
            </p></div>
            <p>It is also possible to insert a new child anywhere within the list of existing child nodes, using the <code>insertBefore</code> method. The <code>insertBefore</code> method requires three things: the parent Node, the new Node to insert, and the existing child of the parent you want to insert in front of, like this:
                <code class="first">parent.insertBefore(newNode, existingChild);</code>
            </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                In a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> console for <a href="http://localhost:8383/TextBook/examples/domExample.html" target="examples" title="domExample.html">domExample.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, create the new <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">node</a> <code>d</code> as before:
                <code class="first">
                    var d=document.createElement("div");
                    <br>var e=document.createElement("a");
                    <br>e.href="http://www.google.ca";
                    <br>e.innerHTML="Click for Google.";
                    <br>d.appendChild(e);
                </code>
                Now get the second div and the body <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> and store them as <code>parent</code> and <code>existingChild</code>.
                <code class="first">
                    var parent = document.body;
                    <br>var existingChild = parent.childNodes[3];
                </code>
                Now insert the new node before the second <code>&lt;div&gt;</code> using <code>insertBefore</code>.
                <code class="first">
                    parent.insertBefore(d, existingChild);
                </code>		
                Now follow the above example to create and insert a node between the second and third <code>&lt;div&gt;</code> elements.
            </p></div>
            <a name="e9.5"></a><div class="exercises"><h5>&lt;exercises section='9.5'&gt;</h5>
                <ol>
                    <li>Go back to <a href="http://localhost:8383/TextBook/examples/domExample.html" target="examples" title="domExample.html">domExample.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and add another button. This button should create a <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> fragment like the one described above (a <code>&lt;div&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> containing an <code>&lt;a&gt;</code> element containing a Text <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">Node</a>) and append it to the end of the <code>&lt;body&gt;</code> each time the button is clicked.</li>
                    <li>Add another button to <a href="http://localhost:8383/TextBook/examples/domExample.html" target="examples" title="domExample.html">domExample.html</a>. This one should add a four-element checkerboard to the document every time it is clicked. Remember you can use the <code>style</code> <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> of the new nodes to specify style properties, or you can use the <code>className</code> fields to assign <a href="http://www.w3schools.com/css/css_selectors.asp" title="http://www.w3schools.com/css/css_selectors.asp" target="www.w3schools.com">classes</a>.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>
            <div class="sectionStart"><a name="9.6"></a><h2 id="sec9-6-0">9.6 Removing a Single Child Node</h2><p>Finally, it is also possible to remove particular <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">nodes</a> from the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> using the <code>removeChild</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a>. The only tricky thing about <code>removeChild</code> is that you have to specify a reference to the child to remove, like this:
                <code class="first">document.getElementById("body").removeChild(x);</code>
            </p></div>
            
            <p>In the above, <code>x</code> has to be a variable containing the child to remove. For example:
                <code class="first">
                    x = document.getElementById("body").childNodes[3];
                    <br>document.getElementById("body").removeChild(x);
                </code>
            </p>
            <p>One thing you often might want to do is delete an element that the user clicks or mouses over. If you have the event.target and you want to remove it, you can do it like this:
                <code class="first">
                    event.target.parentNode.removeChild(event.target);
                </code>
            </p>
            <a name="e9.6"></a><div class="exercises"><h5>&lt;exercises section='9.6'&gt;</h5>
                <ol>
                    <li>Again, go back to <a href="http://localhost:8383/TextBook/examples/domExample.html" target="examples" title="domExample.html">domExample.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and add a <code>mouseover</code> handler that deletes a <code>&lt;div&gt;</code> when that <code>&lt;div&gt;</code> is moused over.</li>
                    <li>See if you can combine the above with the button from the previous exercise that adds <code>&lt;div&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a>. When this is finished, you should be able to add new <code>&lt;div&gt;</code> elements by clicking the button, and then remove them by mousing over them.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <!-- CHAPTER 11 -->
            <div class="sectionStart pageBreak"><a name="10."></a><h1 id="sec10-0-0">10. AJAX</h1><p><small><i>The text in this chapter mirrors the text in Chapter 12. In this chapter, you learn to use <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> with raw <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>. In Chapter 12, you learn to use AJAX with the <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> library and you also learn a little bit about how to work with <a href="https://en.wikipedia.org/wiki/Xml" title="https://en.wikipedia.org/wiki/Xml" target="en.wikipedia.org">XML</a> data.</i></small></p></div>
            

            <p>Even if you donât know what AJAX is, you have experienced its effects. When you start typing into the <a href="http://www.google.com" title="http://www.google.com" target="www.google.com">Google<span class="printonly"> [http://www.google.com]</span></a> search box, it doesnât take long before you start getting some suggestions about what to search for. When you view your list of friends on <a href="http://www.facebook.com" title="http://www.facebook.com" target="www.facebook.com">Facebook<span class="printonly"> [http://www.facebook.com]</span></a>, it starts you with a small list, and when you scroll down, it loads some more for you automatically (often without you even noticing). Both of these are examples of AJAX in action.</p>
            <p>Before AJAX, if you wanted to get some more content for the user, you had to get the browser to load and display a whole new page. With AJAX, you can launch an <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" title="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="en.wikipedia.org">HTTP</a> request from JavaScript. Then when the response data comes back from the server, you can use JavaScript code to incorporate this data into the page without reloading it.</p>

            <div class="sectionStart"><a name="10.1"></a><h2 id="sec10-1-0">10.1 The Basic Idea</h2><p>The term <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> was coined by a web developer named <a href="http://www.adaptivepath.com/ideas/ajax-new-approach-web-applications" title="http://www.adaptivepath.com/ideas/ajax-new-approach-web-applications" target="www.adaptivepath.com">Jesse James Garrett<span class="printonly"> [http://www.adaptivepath.com/ideas/ajax-new-approach-web-applications]</span></a> in 2005. AJAX is a term for a new way of thinking about and making use of a collection of already existing technologies. It's not a new language or library or plugin. AJAX stands for <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">Asynchronous JavaScript and XML</a>. Letâs break this phrase down.</p></div>
            
            <p><span class="bold">JavaScript:</span> You already know what this is.</p>
            <p><span class="bold">Asynchronous:</span> <a href="https://en.wikipedia.org/wiki/Asynchronous_I/O" title="https://en.wikipedia.org/wiki/Asynchronous_I/O" target="en.wikipedia.org">Asynchronous</a> processes are processes that happen outside of the regular flow of the program. In Asynchronous programming, you make some kind of request that will take time to complete, and then continue on with other tasks. In many cases you also specify a <a href="http://en.wikipedia.org/wiki/Callback_(computer_programming)" title="http://en.wikipedia.org/wiki/Callback_(computer_programming)" target="en.wikipedia.org">callback</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> to be triggered when the asynchronous task is finished. You saw something a bit like this when you used the <code>setTimeout</code> function in Chapter 5. This function starts a timer and then allows the app/page to continue running and responding to the user while it waits for the timer to go off, at which point the function you specified gets called. If the timer task was not asynchronous, everything would be at a standstill until the timeout <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> happened.</p>
            <p><span class="bold">XML:</span> You may have encountered this before. <a href="https://en.wikipedia.org/wiki/Xml" title="https://en.wikipedia.org/wiki/Xml" target="en.wikipedia.org">XML</a> stands for eXtensible <a href="https://en.wikipedia.org/wiki/Markup_language" title="https://en.wikipedia.org/wiki/Markup_language" target="en.wikipedia.org">Markup Language</a>. Itâs a generic markup language for representing structured data. It looks a lot like HTML, but it can be used to represent any kind of data (sports scores, the weather, a shopping list, etc.). XML is one possible format for the data that comes from the server in response to an AJAX request. But you can get your data from the server in any format you want. It can be XML, HTML, <a href="http://en.wikipedia.org/wiki/JSON" title="http://en.wikipedia.org/wiki/JSON" target="en.wikipedia.org">JSON</a> (<a href="http://en.wikipedia.org/wiki/JSON" title="http://en.wikipedia.org/wiki/JSON" target="en.wikipedia.org">JavaScript Object Notation</a>) or even just plain text. No matter what kind of data youâre getting, most developers would say that if youâre getting it asynchronously by launching a request from a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> program, youâre using AJAX.</p>

            <div class="sectionStart"><a name="10.2"></a><h2 id="sec10-2-0">10.2 A New Web App Architecture</h2><p>Up until now, we have been assuming a <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web app</a> architecture that looks like this.</p></div>
            
            <img class="fullsize" alt="web app architecture" src="images/webapparchitecture.png" style="width: 263px;">
            <p>In this architecture, an <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" title="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="en.wikipedia.org">HTTP</a> request is launched by the user either by typing a URL, clicking a link, or submitting a form.  (HTTP Requests are also generated by the browser to automatically to load images, CSS files, <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> files and other resources. But Iâm ignoring that minor complication in the story Iâm telling here.) The request goes to the server where a file is retrieved and/or a script is run to generate the HTTP Response. When the response arrives, the browser interprets the HTML and CSS in the document to display the page, and executes the JavaScript commands in the page. Then it continues to run JavaScript in response to user interactions and other <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a>, refreshing the page view when something changes. It doesnât go back to the server again unless the user clicks a link, types in a URL, or submits a form.</p>
            <p>But with <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a>, the life cycle looks a bit different:</p> 
            <img class="fullsize" alt="ajax architecture" src="images/webapparchitecture_ajax.png" style="width: 263px;">
            <p>An AJAX request is an HTTP Request just like any other, and can have <a href="http://www.w3schools.com/tags/ref_httpmethods.asp" title="http://www.w3schools.com/tags/ref_httpmethods.asp" target="www.w3schools.com">GET and POST</a> parameters associated with it just like any other. At the server it is treated in exactly the same way as any other HTTP request. The only difference is where it came from: it was launched by a JavaScript <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a>. Since HTTP Requests can take time to complete they are done asynchronously and the programmer register a listener (a.k.a. <a href="http://en.wikipedia.org/wiki/Callback_(computer_programming)" title="http://en.wikipedia.org/wiki/Callback_(computer_programming)" target="en.wikipedia.org">callback</a> function) to deal with the response when it comes. (What would happen if the requests were not <a href="https://en.wikipedia.org/wiki/Asynchronous_I/O" title="https://en.wikipedia.org/wiki/Asynchronous_I/O" target="en.wikipedia.org">asynchronous</a>?)</p>
            <p>The HTTP Response from the server is also the same as any other. The only difference is that when the response arrives at the client, it does not trigger a page reload. Instead, the content of the response is passed to the listener as a parameter. </p>

            <div class="sectionStart"><a name="10.3"></a><h2 id="sec10-3-0">10.3 How AJAX Works</h2><p><a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> queries are launched using the <a href="http://en.wikipedia.org/wiki/XMLHttpRequest" title="http://en.wikipedia.org/wiki/XMLHttpRequest" target="en.wikipedia.org">XMLHttpRequest</a> <a href="http://en.wikipedia.org/wiki/Application_programming_interface" title="http://en.wikipedia.org/wiki/Application_programming_interface" target="en.wikipedia.org">API</a> that is built in to all modern browsers. To launch an AJAX request, you create a new <code>XMLHttpRequest</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> and build up your request over several lines of code, adding headers, <a href="http://www.w3schools.com/tags/ref_httpmethods.asp" title="http://www.w3schools.com/tags/ref_httpmethods.asp" target="www.w3schools.com">GET and POST</a> parameters and registering a listener <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> to be called when the response arrives. Then you launch the request and the page continues operating while the request is in progress.</p></div>
            

            <div class="sectionStart"><a name="10.3.1"></a><h3 id="sec10-3-1">10.3.1 A Data Source</h3><p>You canât do much in AJAX without access to a data source on a server somewhere. There are many excellent sources of data on the web that are free to use in your AJAX programs. For example Yahooâs <a href="http://developer.yahoo.com/yql/" title="http://developer.yahoo.com/yql/" target="developer.yahoo.com">YQL<span class="printonly"> [http://developer.yahoo.com/yql/]</span></a> (<a href="http://developer.yahoo.com/yql/" title="http://developer.yahoo.com/yql/" target="developer.yahoo.com">Yahoo Query Language<span class="printonly"> [http://developer.yahoo.com/yql/]</span></a>) can be used to retrieve information about geographic locations, weather, music, maps, and a number of other domains. But for now, you need an easier-to-use source of information. </p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                In the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, you will find a <a href="http://localhost:8383/TextBook/examples/servers" target="examples" title="servers">servers</a> folder containing two PHP scripts: a "time server" named <a href="http://localhost:8383/TextBook/examples/servers/timeServer.php" target="examples" title="servers/timeServer.php">servers/timeServer.php</a> and a "Lorem Ipsum server" named <a href="http://localhost:8383/TextBook/examples/servers/loremIpsumServer.php" target="examples" title="servers/loremIpsumServer.php">servers/loremIpsumServer.php</a>. 
                <br><br>Load the two server files by clicking on the links above (don't try to open them on your own machine). Then read over the <a href="http://en.wikipedia.org/wiki/Application_programming_interface" title="http://en.wikipedia.org/wiki/Application_programming_interface" target="en.wikipedia.org">APIs</a> they display and try them out. You can experiment with the GET parameters by typing them into a URL. For example, if you wanted to set the <code>pstart</code> parameter to 2 and <code>plength</code> to 1, you could do it like this:
                <code class="first"><a href="http://localhost:8383/TextBook/examples/servers/loremIpsumServer.php?pstart=2&amp;plength=1" target="examples" title="servers/loremIpsumServer.php?pstart=2&amp;plength=1">servers/loremIpsumServer.php?pstart=2&amp;plength=1</a></code>
                And if you want to test POST parameters with the Lorem Ipsum server, you can use the <a href="http://localhost:8383/TextBook/examples/servers/loremIpsumPostTest.html" target="examples" title="servers/loremIpsumPostTest.html">servers/loremIpsumPostTest.html</a> file which uses a <code>&lt;form&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> with its <code>method</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> set to "post" to send requests to the Lorum Ipsum server.
                <br><br>If you've forgotten what all this means, you may need to review <a href="http://www.w3schools.com" title="http://www.w3schools.com" target="www.w3schools.com">w3schools</a> or a similar source to refresh your memory about <a href="http://www.w3schools.com/tags/ref_httpmethods.asp" title="http://www.w3schools.com/tags/ref_httpmethods.asp" target="www.w3schools.com">GET and POST</a> and <a href="http://www.w3schools.com/php/php_forms.asp" title="http://www.w3schools.com/php/php_forms.asp" target="www.w3schools.com">PHP Form Handling</a>.
            </p></div>

            <div class="sectionStart"><a name="10.3.2"></a><h3 id="sec10-3-2">10.3.2 AJAX GET Requests</h3><p>To send an AJAX GET request, you need to execute a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statement</a> to perform each of the following steps:</p></div>
            
            <ol>
                <li><span class="bold">Create an <code>XMLHttpRequest</code> Object:</span> This is the object you will use to send the request.</li>
                <li><span class="bold">Open the Connection:</span> You will have to specify a URL which includes the GET parameters for your request. The URL can be  absolute or it can be relative to your current location.</li>
                <li><span class="bold">Register an Event Listener:</span> The event listener function will be called whenever the status of the request changes.</li>
                <li><span class="bold">Send the Request:</span> The final step sends the request. Then the page continues to function while waiting for the response.</li>
            </ol>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load <a href="http://localhost:8383/TextBook/examples/ajaxTime2.html" target="examples" title="ajaxTime2.html">ajaxTime2.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> into a desktop browser. Ignore the contents of the page for now. Just open the JavaScript console and launch your first AJAX request by executing the code below for the four steps outlined above:
                <code class="first">
                    <span class="bold">// step 1</span><br>
                    var xmlhttp = new XMLHttpRequest();<br><br>
                    <span class="bold">// step 2</span><br>
                    xmlhttp.open("GET", "servers/timeServer.php?request=time", true);<br><br>
                    <span class="bold">// step 3</span><br>
                    xmlhttp.addEventListener("readystatechange", function () {
                    <code class="new">if (xmlhttp.readyState === 4 &amp;&amp; xmlhttp.status === 200) 
                        <code class="new">alert(xmlhttp.responseText);
                        </code>
                        })
                    </code>
                    <br>
                    <span class="bold">// step 4</span><br>
                    xmlhttp.send();
                </code>
                The above should pop up the current time for you in an alert box.<br><br>
            </p></div>
            <p>In step 2, there are three parameters. The first specifies the type of request ("GET"). The second is the URL which includes the GET parameters. The third is a <a href="http://en.wikipedia.org/wiki/Boolean_data_type" title="http://en.wikipedia.org/wiki/Boolean_data_type" target="en.wikipedia.org">boolean</a> that is set to <code>true</code> to make sure this is an <a href="https://en.wikipedia.org/wiki/Asynchronous_I/O" title="https://en.wikipedia.org/wiki/Asynchronous_I/O" target="en.wikipedia.org">asynchronous</a> connection.</p>
            <p>In step 3, you are registering a listener for a special <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> called the <code>readystatechange</code> event. The listener is the <a href="http://en.wikipedia.org/wiki/Callback_(computer_programming)" title="http://en.wikipedia.org/wiki/Callback_(computer_programming)" target="en.wikipedia.org">callback</a> function and it makes use of the xmlhttp object created earlier to figure out whether it should take action or not. The <code>readystatechange</code> event will happen multiple times throughout the life of the <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" title="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="en.wikipedia.org">HTTP</a> request, and will trigger the listener function each time with a different <code>readyState</code>. But for most purposes only state 4 ("Response Ready") is useful. When state 4 is detected, the next thing to check is the HTTP status that was returned. Status 200 means "OK", 404 means "Page Not Found", etc. Usually, you just check for state 200.</p>

            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Paste the commands from the last DIY box into the <code>&lt;Script&gt;</code> element of a new web page and add the following line to the callback function to trace every call to the listener:
                <code class="first">
                    console.log(xmlhttp.readyState+" "+xmlhttp.status);
                </code>
                You will also have to replace the URL with the absolute address of the time server (<code>http://javascript.sheridanc.on.ca/examples/servers/timeServer.php/</code>)<br><br>
                Now load the page and check the console to see the call trace<br><br>
                Now try again but change the URL to invalidate it to view the calls of calls to the listener <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a>.
            </p></div>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try out the form interface provided on the <a href="http://localhost:8383/TextBook/examples/ajaxTime2.html" target="examples" title="ajaxTime2.html">ajaxTime2.html</a> page. Do you think you could write the code for this page now, given what you know about <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> and <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a>?
            </p></div>
            <div class="sectionStart"><a name="10.3.3"></a><h3 id="sec10-3-3">10.3.3 AJAX POST Requests</h3><p>For AJAX requests, the distinction between GET and POST may seem less important since the parameters you send will never be visible in the browser. However, you should still use POST requests in the following cases:</p></div>
            
            <ol>
                <li>Sending Large Amounts of data (GET has a 1KB limit).</li>
                <li>Sending Requests to Update a Database (GET requests might access cached copies of the page, in which case the database update will not go through).</li>
            </ol>
            <p>The process for sending POST data is very similar to the process for GET data, but you must set a special header on the request to specify that there are parameters in the body of the message, and you specify the parameters when you call the send <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a> rather than in the URL.</p><p>
            </p><div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Paste the commands below into the <code>&lt;Script&gt;</code> element of a new web page. The bold-faced parts show the stuff changed for a POST request.
                <code class="first">
                    var xmlhttp = new XMLHttpRequest();<br><br>
                    xmlhttp.open(<span class="bold">"POST"</span>, <span class="bold">"servers/timeServer.php"</span>, true);<br><br>
                    <span class="bold">xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");</span><br><br>
                    xmlhttp.addEventListener("readystatechange", function () {
                    <code class="new">if (xmlhttp.readyState === 4 &amp;&amp; xmlhttp.status === 200) 
                        <code class="new">alert(xmlhttp.responseText);
                        </code>
                        })
                    </code>
                    <br>
                    xmlhttp.send(<span class="bold">"request=time&amp;timezone=Canada/Pacific"</span>);
                </code>
                The above should pop up the current time for you in an alert box.<br><br>
                Now try changing some of the parameters to get the day or month, or use a different time zone. 
                <br><br>Now try changing the listener <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> so it puts the text somewhere on the screen (maybe in the <code>innerHTML</code> of an <code>&lt;h1&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>, or in the <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> of an <code>&lt;input&gt;</code> element).
            </p></div>

            <div class="sectionStart"><a name="10.3.4"></a><h3 id="sec10-3-4">10.3.4 AJAX On a Web Page</h3><p>The JavaScript code below is from the <a href="http://localhost:8383/TextBook/examples/ajaxTime2.html" target="examples" title="ajaxTime2.html">ajaxTime2.html</a> example.  Take a moment to read it over and try to understand it.
                <code class="first">
                    window.addEventListener("load", 
                    function () {
                    <code class="new">
                        function launchAjax() {
                        <code class="new">
                            var address="servers/timeServer.php";<br>
                            var timezone = document.querySelector("input[name=timezone]").value;<br>
                            var request = document.querySelector("select[name=type]").value;<br>
                            var delay = document.querySelector("input[name=delay]").value;<br>
                            var URL = address + "?timezone=" + timezone + "&amp;request=" + request + "&amp;delay=" + delay;<br><br>

                            var xmlhttp = new XMLHttpRequest();<br>
                            xmlhttp.open("GET", URL, true);<br>
                            xmlhttp.addEventListener("readystatechange", function () {
                            <code class="new">
                                if (xmlhttp.readyState === 4 &amp;&amp; xmlhttp.status === 200) {
                                <code class="new">
                                    document.getElementById("result").innerHTML = xmlhttp.responseText;
                                </code>
                                }
                            </code>
                            });<br><br>
                            xmlhttp.send();
                        </code>
                        }
                        document.getElementById("ajaxButton").addEventListener("click", launchAjax);
                    </code></code>
                    });
                
            </p></div>
            
            <p>The first thing to note is that all the code is inside the <code>window</code> object's <code>ready</code> event handler. This is just following the best practices that were introduced in chapter 5.</p>
            <p>The second thing to notice is that the <code>launchAjax</code> function contains calls to the <code>XMLHttpRequest</code> object that should look very familiar from the previous section. The only difference is that one more parameter is set (<code>delay</code>) and the <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a> for each parameter are coming from the form <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a>. Also, the listener function is placing the data into the <code>innerHTML</code> of the element with an <code>id</code> of "result".</p>
            <p>The <a href="https://en.wikipedia.org/wiki/Syntax_(logic)" title="https://en.wikipedia.org/wiki/Syntax_(logic)" target="en.wikipedia.org">syntax</a> <code>$("[attribute=value]")</code> is used to select all the elements with a particular <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> value. In this case itâs being used to retrieve named form elements. The programmer could just as easily give them <code>id</code> attributes and use <code>document.getElementById</code>.</p>
            <p>After the definition of <code>launchAjax</code>, the function is added as a <code>click</code> event handler onto the element with an <code>id</code> of "ajaxButton".</p>
            <p>Now you have two data sources (<a href="http://localhost:8383/TextBook/examples/servers/loremIpsumServer.php" target="examples" title="servers/loremIpsumServer.php">servers/loremIpsumServer.php</a> and <a href="http://localhost:8383/TextBook/examples/servers/timeServer.php" target="examples" title="servers/timeServer.php">servers/timeServer.php</a>) and a worked example (<a href="http://localhost:8383/TextBook/examples/ajaxTime.html" target="examples" title="ajaxTime.html">ajaxTime.html</a>). Itâs time to build something of your own.</p>
            <a name="e10.3.4"></a><div class="exercises"><h5>&lt;exercises section='10.3.4'&gt;</h5>
                <ol>
                    <li>Take the file <a href="http://localhost:8383/TextBook/examples/servers/loremIpsumPostTest.html" target="examples" title="servers/loremIpsumPostTest.html">servers/loremIpsumPostTest.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and change it so that instead of launching a brand new POST request and reloading the page, it instead launches an <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> query and displays the result below the form.</li>
                    <li>In the exercises folder, look at the file <a href="http://localhost:8383/TextBook/examples/findLorem.html" target="examples" title="findLorem.html">findLorem.html</a>. You have the HTML and CSS here for a game. You just have to fill in the <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>. This game will pull out a <a href="http://en.wikipedia.org/wiki/Random_number_generation" title="http://en.wikipedia.org/wiki/Random_number_generation" target="en.wikipedia.org">random</a> piece of Lorem Ipsum text from the server, using an AJAX query. Then it will allow the user to guess where the text came from, using more AJAX queries to check whether they were right or not. See the comments in the <a href="http://localhost:8383/TextBook/examples/findLorem.html" target="examples" title="findLorem.html">findLorem.html</a> file for detailed instructions. </li>
                    <li>In the example pack you will find <a href="http://localhost:8383/TextBook/examples/more.html" target="examples" title="more.html">more.html</a> and its associated files. Add the necessary JavaScript code so that this page allows the user to load one paragraph at a time from <a href="http://localhost:8383/TextBook/examples/servers/loremIpsumServer.php" target="examples" title="servers/loremIpsumServer.php">servers/loremIpsumServer.php</a>. When they first load, they should see the first paragraph, retrieved with AJAX. Then whenever they hit the "more" button, they should get the next paragraph in sequence.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="10.3.5"></a><h3 id="sec10-3-5">10.3.5 What To Do While You Wait</h3><p>Because networks can be slow, AJAX requests can sometimes take a few seconds to complete. If things don't happen instantly, it can cause the user to start pressing buttons over and over again, or behaving in other destructive ways which could end up launching more and more AJAX requests. This is a problem you have to think about whenever you use AJAX.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load up <a href="http://localhost:8383/TextBook/examples/ajaxTime2.html" target="examples" title="ajaxTime2.html">ajaxTime2.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, set the delay on the form to 15 seconds, and set the request to "time", then hit the "<a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a>!" Button. This will send a request to the <a href="http://localhost:8383/TextBook/examples/servers/timeServer.php" target="examples" title="servers/timeServer.php">servers/timeServer.php</a> page which instructs the php scripts to pause for 15 seconds before completing. So this simulates a delay over a slow network.
                <br><br>While youâre waiting for your first request, set the delay back to 0 and try some different requests (anything other than "time"). After 15 seconds, the original request will get its response and this will disrupt what you are currently doing.
            </p></div>

            <p>The usual solution to this problem is to control the user somehow while you are waiting for the AJAX request to complete. For example, if the user clicks something to load more content, you could do the following:</p>
            <ol>
                <li>In the click handler, disable the button the user just clicked, and perhaps give them some visual indication that we are waiting for something to load.</li>
                <li>In the listener function that responds to the AJAX request, re-enable the button.</li>
            </ol> 
            <p>This will ensure that only one AJAX request is dealt with at a time.</p>
            <p>Another approach might be to have a <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global variable</a> with a name like <code>waitingForAJAX</code>:</p>
            <ol>
                <li>Initialize <code>waitingForAJAX</code> to false.</li>
                <li>In the click handler, check if <code>waitingForAJAX</code> is <code>true</code>. If it is, give the user an error message or simply ignore the request. If it's <code>false</code>, launch the AJAX query and set <code>waitingForAJAX</code> to <code>true</code>.</li>
                <li>In the listener function, set <code>waitingForAJAX</code> back to to <code>false</code> once the ready state is <code>4</code>.</li>
            </ol>
            <p>You could also consider placing an animated gif on the page like in the example below.</p>
            <p>
                <input id="loadinggifbutton" type="button" value="Load" onclick="simulateload()" style="width:100%;margin:0px;height:120px;padding:40px;font-size:40px;box-sizing:border-box;"><img id="loadinggif" src="images/loading.gif" style="display:none;max-width:100%;height:120px;margin:0px;padding:0px;">
            </p>
            <script>
                function simulateload() {
                    document.querySelector("#loadinggif").style.display = "inline";
                    document.querySelector("#loadinggifbutton").style.display = "none";
                    setTimeout(function () {
                        document.querySelector("#loadinggif").style.display = "none";
                        document.querySelector("#loadinggifbutton").style.display = "inline";
                    }, 5000);
                }
            </script>
            <a name="e10.3.5"></a><div class="exercises"><h5>&lt;exercises section='10.3.5'&gt;</h5>
                <ol>
                    <li>Follow up on exercise 1 from the previous section by adding more code to the <a href="http://localhost:8383/TextBook/examples/servers/loremIpsumPostTest.html" target="examples" title="servers/loremIpsumPostTest.html">servers/loremIpsumPostTest.html</a> page so that the submit button is disabled until the <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> request has completed. Then test it by setting the <code>delay</code> parameter.</li>
                    <li>Add code to the <a href="http://localhost:8383/TextBook/examples/ajaxTime.html" target="examples" title="ajaxTime.html">ajaxTime.html</a> page so that the user has to wait until the previous request has completed before a new one will be launched. This time don't disable the button - instead set a <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global</a> <a href="http://en.wikipedia.org/wiki/Boolean_data_type" title="http://en.wikipedia.org/wiki/Boolean_data_type" target="en.wikipedia.org">boolean</a> <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variable</a> and if the user hits the button again before the AJAX request is completed give them an error message in an alert box.</li>
                    <li>Repeat the above, but this time use the other suggested strategy for what to do while you wait.</li>
                    <li>Alter your solution to the <a href="http://localhost:8383/TextBook/examples/more.html" target="examples" title="more.html">more.html</a> exercise from the previous section. Set up the AJAX requests to include a short delay and make sure you disable the user while they wait for their next paragraph.</li>
                    <li>Wouldn't it be nice if you could just call a <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> like this and have it take care of all the messy details for you:
                        <code>sendAjax(type, url, parameters, callback_function);</code>
                        You should write one! Then put it in its own .js file, add it to one of your pages and try it out. Make sure to test both <a href="http://www.w3schools.com/tags/ref_httpmethods.asp" title="http://www.w3schools.com/tags/ref_httpmethods.asp" target="www.w3schools.com">GET and POST</a>.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <!-- CHAPTER 10 -->
            <div class="sectionStart pageBreak"><a name="11."></a><h1 id="sec11-0-0">11. The jQuery Library</h1><p>Now you're able to write some powerful, standalone <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web apps</a> using forms,  <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a> and the HTML <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a>. But there are easier ways to program web apps than plain JavaScript. This chapter is about <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a>, a public domain JavaScript library that has caught on like wildfire and is changing the way JavaScript code is written. <a href="http://jquery.com/" title="http://jquery.com/" target="jquery.com">JQuery<span class="printonly"> [http://jquery.com/]</span></a> provides a powerful set of <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> for DOM manipulation and event handling that solve many of the <a href="http://en.wikipedia.org/wiki/Cross-browser" title="http://en.wikipedia.org/wiki/Cross-browser" target="en.wikipedia.org">cross-browser compatibility</a> issues that arise when using plain <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>. To use jQuery effectively, you need to finally understand  JavaScript <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> a little better, so this chapter will cover that as well. </p></div>
            
            <p>This chapter will give you the basic tools you need to use jQuery, but I will leave a lot of the details for you to explore yourself. The jQuery <a href="http://en.wikipedia.org/wiki/Application_programming_interface" title="http://en.wikipedia.org/wiki/Application_programming_interface" target="en.wikipedia.org">API</a> is the definitive source of information about jQuery, and the official <a href="http://learn.jquery.com/" title="http://learn.jquery.com/" target="learn.jquery.com">Learn jQuery<span class="printonly"> [http://learn.jquery.com/]</span></a> site has some nice tutorials. There are also some useful tutorials in the <a href="http://www.w3schools.com/jquery/default.asp" title="http://www.w3schools.com/jquery/default.asp" target="www.w3schools.com">w3Schools Learn jQuery</a> section.</p>
            <p>The jQuery library is publicly available for download, but if you are using <a href="https://netbeans.org/" title="https://netbeans.org/" target="netbeans.org">NetBeans<span class="printonly"> [https://netbeans.org/]</span></a> version 7.3 or later, it is also available automatically as an add-in library for projects of type <code>HTML5</code>.</p>

            <div class="sectionStart"><a name="11.1"></a><h2 id="sec11-1-0">11.1 Selectors and Effects</h2><p>The <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> library extends the power of <a href="http://www.w3schools.com/cssref/css_selectors.asp" title="http://www.w3schools.com/cssref/css_selectors.asp" target="www.w3schools.com">CSS selectors</a> in <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>. Recall that a CSS selector is the first component of a <a href="http://www.w3schools.com/css/css_syntax.asp" title="http://www.w3schools.com/css/css_syntax.asp" target="www.w3schools.com">CSS rule</a> â the part that specifies which <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> the rule applies to. For example, the CSS rule below uses the selector <code>"p,  #myDiv, span.movie"</code> to specify that it applies simultaneously to all elements of type <code>&lt;p&gt;</code>, the unique element with its <code>id</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> set to <code>myDiv</code>, and any <code>&lt;span&gt;</code> element with a <code>class</code> attribute that includes <code>movie</code>.
                <code class="first">
                    p, #myDiv, span.movie {
                    <code class="new">color:red;
                        width:100%;
                    </code>
                    }
                </code>
            </p></div>
            
            <p>In plain old JavaScript, if you wanted to do make same changes to a diverse collection of elements like this (e.g. suppose you wanted to turn them all green) you would need to write one expression or a set of expressions to get the collection of elements, and then you would need to write a loop to apply the changes to the collection. But now you can use jQuery selectors to do it all in one line, like this:
                <code class="first">$("p,#myDiv,span.movie").<span class="bold">dosomething()</span>;</code>
            </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Here's a simple example that you can use on this book if you are viewing it on line.
                <br><br>Open the JavaScript console and type the following to turn all the headers green.
                <code class="first">
                    $("h1,h2,h3").css("color","green");
                </code>
                Note that entering <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> commands in the console will only work if the current page includes a link to the <a href="http://jquery.com/" title="http://jquery.com/" target="jquery.com">jQuery<span class="printonly"> [http://jquery.com/]</span></a> library. Since this book makes use of jQuery, it can be used as a jQuery testbed.
                <br><br>All the DIY boxes in this book are <code>&lt;div&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> with the <code>class</code> name <code>"DIY"</code>. Based on the above example, see if you can turn the backgrounds of all DIY boxes in the document pink.  
                <br><br>You can always reverse any changes by hitting "reload".
            </p></div>

            <div class="sectionStart"><a name="11.1.1"></a><h3 id="sec11-1-1">11.1.1 The jQuery Sandbox</h3><p>In what follows, we will use the <a href="http://jquery.com/" title="http://jquery.com/" target="jquery.com">jQuery<span class="printonly"> [http://jquery.com/]</span></a> "sandBox" a lot. It's just a page with the jQuery library loaded so that you can try out commands in the JavaScript console. The main page is <a href="http://localhost:8383/TextBook/examples/jQuerySandbox/index.html" target="examples" title="jQuerySandbox/index.html">jQuerySandbox/index.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>. When you explore the <a href="http://localhost:8383/TextBook/examples/jQuerySandbox" target="examples" title="jQuerySandbox">jQuerySandbox</a> folder and files, you will notice that the jQuery library is included in the <code>js</code> folder, and that the <code>index.html</code> file loads the jQuery library using the following line:
                <code class="first"><code>&lt;script type="text/javascript" src="js/jquery-1.10.0.js"&gt;</code><code>&lt;/script&gt;</code></code>
            </p></div>
            
            <p>This line causes all the code in the jQuery library to be included in the sandbox page. If you want to use jQuery in your own pages, you have to do two things:</p>
            <ol>
                <li>Download the library and put it somewhere in your project; and </li>
                <li>Link to it in a <code>&lt;script&gt;</code> element as above.</li>
            </ol>
            <div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Importing Libraries.</span> In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, you often have to import <a href="http://www.w3schools.com/css/css_selectors.asp" title="http://www.w3schools.com/css/css_selectors.asp" target="www.w3schools.com">classes</a> that are extensions to the base language. <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> is a bit like that. It also has to be explicitly included in your program.</p></div>
            <p>At the time of writing, version 1.10.0 was the latest version of jQuery, but that might have changed by now. The latest version is always freely available at the <a href="http://jquery.com/" title="http://jquery.com/" target="jquery.com">jQuery website<span class="printonly"> [http://jquery.com/]</span></a>, where you can also choose the "minimized" version of the library to save bandwidth (it's the same as the regular library, but with whitespace and other unnecessary characters removed, <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variable</a> names shortened and so on).</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                To use the sandbox, load <a href="http://localhost:8383/TextBook/examples/jQuerySandbox/index.html" target="examples" title="jQuerySandbox/index.html">jQuerySandbox/index.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> into a browser and open the JavaScript console. Because the <code>index.html</code> file loads the <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> library, you can play with <a href="http://jquery.com/" title="http://jquery.com/" target="jquery.com">jQuery<span class="printonly"> [http://jquery.com/]</span></a> commands in this window. 
                <br><br>You'll notice there are some instructions for activities on the page. You can try them now if you want, but you might do better to wait for a bit more information.
            </p></div>

            <div class="sectionStart"><a name="11.1.2"></a><h3 id="sec11-1-2">11.1.2 The <code>jQuery</code> (<code>$</code>) Function</h3><p>Everything you will do with the jQuery library will be based on the new <code>jQuery</code> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a>. There are two ways to write this function, shown below:</p></div>
            
            <ol>
                <li><code>jQuery( <span class="bold">selector</span> )</code> or</li>
                <li><code>$( <span class="bold">selector</span> )</code></li>
            </ol>
            <p>From now on, I will just use <code>$</code> version.</p>
            <p>The <span class="bold">selector</span> part of the <a href="https://en.wikipedia.org/wiki/Syntax_(logic)" title="https://en.wikipedia.org/wiki/Syntax_(logic)" target="en.wikipedia.org">syntax</a> works just like a CSS selector, with a few extensions unique to <a href="http://www.w3schools.com/jquery/jquery_selectors.asp" title="http://www.w3schools.com/jquery/jquery_selectors.asp" target="www.w3schools.com">jQuery selectors</a>. The jQuery function will return an <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> of type <code>jQuery</code> that looks and behaves very much like an <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">array</a> of <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> elements.</p>
            <p>Before moving on, you may need to review the <a href="http://www.w3schools.com/cssref/css_selectors.asp" title="http://www.w3schools.com/cssref/css_selectors.asp" target="www.w3schools.com">w3Schools CSS selector reference</a> and you should also take a look at the jQuery <a href="http://en.wikipedia.org/wiki/Application_programming_interface" title="http://en.wikipedia.org/wiki/Application_programming_interface" target="en.wikipedia.org">API</a> selector <a href="http://en.wikipedia.org/wiki/Reference_(computer_science)" title="http://en.wikipedia.org/wiki/Reference_(computer_science)" target="en.wikipedia.org">reference</a> as well. Note that some CSS selectors are not available in jQuery (e.g. <code>:hover</code>) and some jQuery selectors are new (e.g. <code>:not()</code>). Why would <code>:hover</code> make sense for CSS but not for jQuery?</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Open the JavaScript console for this textbook and try this command:
                <code class="first">$("h1")</code>
                The jQuery object that is returned to you should look something like this:
                <code class="first">[&lt;h1&gt;Contents&lt;/h1&gt;,&lt;h1&gt;1. Getting Started&lt;/h1&gt; ... ]</code>
                If there are more than 100 elements in the array, things might look a little different. For instance if you type:
                <code class="first">$("a")</code>
                you'll get something like this instead:
                <code class="first">&gt; st.fn.st.init[432]</code>
                Which means there were 432 <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">objects</a> returned. If you open the result by clicking on the arrow, you will be able to see the contents, arranged into groups of 100. 
            </p></div>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try the following in a JavaScript console for the <a href="http://localhost:8383/TextBook/examples/jQuerySandbox/index.html" target="examples" title="jQuerySandbox/index.html">jQuerySandbox/index.html</a> page and make sure the results are correct. Remember that in Chrome you can mouse over the resulting objects to see the corresponding DOM elements highlighted on the original page.
                </p><ol>
                    <li>Get all <code>&lt;td&gt;</code> elements with the <code>class</code> attribute set to "odd"</li>
                    <li>Get all <code>&lt;h1&gt;</code> elements</li>
                    <li>Get all <code>&lt;span&gt;</code> elements</li>
                    <li>Get the element with the <code>id</code> set to "instructions" as well as every <code>&lt;tr&gt;</code> element.</li>
                    <li>Execute the jQuery command <code>$("*")</code>. What elements are in the resulting <a href="http://learn.jquery.com/using-jquery-core/jquery-object/" title="http://learn.jquery.com/using-jquery-core/jquery-object/" target="learn.jquery.com">jQuery object<span class="printonly"> [http://learn.jquery.com/using-jquery-core/jquery-object/]</span></a>?</li>
                    <li>Execute the <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> command <code>$(document)</code> with no quotation marks inside the brackets. What element is in the resulting <a href="http://jquery.com/" title="http://jquery.com/" target="jquery.com">jQuery<span class="printonly"> [http://jquery.com/]</span></a> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>?</li>
                </ol>
            <p></p></div>
            <p>The object returned from the $ function can be treated a lot like any an array. For example, this command will change the border style of the checkerboard:
                <code class="first">$("#checkerboard")[0].style["borderStyle"] = "dashed";</code>
            </p>
            <p>The above statement is equivalent to the following:
                <code class="first">document.getElementById("checkerboard").style["borderStyle"] = "dashed";</code>
            </p>
            <p>Similarly, you could put an X into every even checkerboard square of <a href="http://localhost:8383/TextBook/examples/jQuerySandbox/index.html" target="examples" title="jQuerySandbox/index.html">jQuerySandbox/index.html</a> with the following:
                <code class="first">
                    var squares=$("td.even");
                    <br>for (var i=0; i&lt;squares.length; i++)
                    <code class="new">
                        squares[i].innerHTML = "X";
                    </code>
                </code>
            </p>
            <p><span class="bold">But wait!</span> Although in some rare cases you might want to do array processing on the <a href="http://learn.jquery.com/using-jquery-core/jquery-object/" title="http://learn.jquery.com/using-jquery-core/jquery-object/" target="learn.jquery.com">jQuery object<span class="printonly"> [http://learn.jquery.com/using-jquery-core/jquery-object/]</span></a>, in most cases there is a far easier way. Read on...</p>

            <div class="sectionStart"><a name="11.1.3"></a><h3 id="sec11-1-3">11.1.3 Chaining Methods: <code>innerHTML</code>, styles and attributes</h3><p>So now you've mastered selectors, and you can process the jQuery object as if it were an array. But where jQuery really gets its power is in the <a href="http://en.wikipedia.org/wiki/Method_chaining" title="http://en.wikipedia.org/wiki/Method_chaining" target="en.wikipedia.org">chaining</a> of other jQuery <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> onto the end of the <code>$</code> function. Four such methods are <code>html</code>, <code>css</code>, <code>val</code> and <code>attr</code>. When chained at the end of the <code>$</code> function using the dot operator, these functions can be used to set the <code>innerHTML</code>, style properties, <code>value</code> attributes (for form elements) and other attributes of an entire set of selected elements all at once.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Here are some examples to try in the JavaScript console of <a href="http://localhost:8383/TextBook/examples/jQuerySandbox/index.html" target="examples" title="jQuerySandbox/index.html">jQuerySandbox/index.html</a>:
                <code class="first">
                    $("#instructions").html("No more instructions!");
                    <br>$("td.odd").css("backgroundColor","blue");
                    <br>$("a").attr("href", "http://www.facebook.com");
                    <br>$("input:text").val("A new value");
                </code>
                Verify the changes made to the page in each case. Note that the last one makes use of a special <a href="http://www.w3schools.com/jquery/jquery_selectors.asp" title="http://www.w3schools.com/jquery/jquery_selectors.asp" target="www.w3schools.com">jQuery selector</a> <code>input:text</code> which selects all input <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> of type text. There are also selectors for <code>:button</code>, <code>:checkbox</code> and so on.
                <br><br>You can also use each of these methods with one less parameter, and they will return the innerHTML, style property, or attribute of the first element in the matching set. Try the following:
                <code class="first">
                    $("#instructions").html();		
                    <br>$("td.odd").css("backgroundColor");	
                    <br>$("a").attr("href");
                    <br>$("input:text").val();
                </code>
                Verify that the results make sense in each case.
            </p></div>
            <p>And method chaining doesnât stop at just one method! Each chained jQuery method returns a copy of the original jQuery object. This means methods can be chained one after another as many times as you want. </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try the following command in <a href="http://localhost:8383/TextBook/examples/jQuerySandbox/index.html" target="examples" title="jQuerySandbox/index.html">jQuerySandbox/index.html</a>, but try to predict the result before you press enter.
                <code class="first">$("#instructions").css("backgroundColor","red").css("color","rgba(255,255,255,0.5)").html("Hello, World!");</code>
                There is no limit to how many <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> you can chain together in this way.
            </p></div>
            <p>You can also change the class(es) an element belongs to with the <code>addClass</code> and <code>removeClass</code> methods, and you can find out if it belongs to a particular <a href="http://www.w3schools.com/css/css_selectors.asp" title="http://www.w3schools.com/css/css_selectors.asp" target="www.w3schools.com">class</a> with the <code>hasClass</code> method. More information on these methods can be found in the <a href="http://www.w3schools.com" title="http://www.w3schools.com" target="www.w3schools.com">w3schools</a> jQuery section called <a href="http://www.w3schools.com/jquery/jquery_css_classes.asp" title="http://www.w3schools.com/jquery/jquery_css_classes.asp" target="www.w3schools.com">jQuery CSS Classes</a>.</p>
            <p>The jQuery methods mentioned above all have counterparts in ordinary JavaScript (<code>style</code>, <code>innerHTML</code>, <code>className</code>, etc.). But in many cases the jQuery versions are more powerful. </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                For example, try the JavaScript statement below in <a href="http://localhost:8383/TextBook/examples/jQuerySandbox/index.html" target="examples" title="jQuerySandbox/index.html">jQuerySandbox/index.html</a>.
                <code class="first">document.getElementById("instructions").style["color"]</code>
                It returns an empty string because the color property of this element is not explicitly set in the style attribute of the element.
                <br><br>Now try the equivalent jQuery statement.
                <code class="first">$("#instructions").css("color")	</code>
                This command searches the hierarchy of CSS styles and returns the correct color <code>"rgb(0,0,0)"</code> which it retrieves from the default browser style.
            </p></div>
            <a name="e11.1.3"></a><div class="exercises"><h5>&lt;exercises section='11.1.3'&gt;</h5>
                <ol>
                    <li>Try the following on <a href="http://localhost:8383/TextBook/examples/jQuerySandbox/index.html" target="examples" title="jQuerySandbox/index.html">jQuerySandbox/index.html</a> using the JavaScript console of your browser. Note that you can always reload the page to get it back to its initial state between commands.
                        <ol class="sublist">
                            <li>Use the <code>.css()</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a> to change the  checkerboard border style to dashed.</li>
                            <li>Use the <code>html()</code> method to put an "X" in every even checkerboard square.</li>
                            <li>Use the <code>addClass()</code> and <code>removeClass()</code> methods to change the odd squares to even.</li>
                            <li>Use the <code>html()</code> method to change every link on the page to read "this is a link".</li>
                            <li>Change the contents and color of all <code>&lt;td&gt;</code> elements in one line.</li>
                            <li>Change the class of even to odd and odd to even in two lines. Can you do it in one line?</li>
                        </ol>
                    </li>
                    <li>The following require changes to the <a href="http://localhost:8383/TextBook/examples/jQuerySandbox/index.html" target="examples" title="jQuerySandbox/index.html">jQuerySandbox/index.html</a> file of the sandbox. Make sure you also have the CSS and JavaScript files. You can view the source of the page and open the extra files from there, or you can get everything in the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>.
                        <ol class="sublist">
                            <li>Put a button on the sandbox page that, when clicked, toggles the checkerboard from white and red squares to brown and black squares, and back again.</li>
                            <li>Put a second button on the sandbox page that prompts the user for two numbers, then moves the instructions panel to those coordinates.</li>
                        </ol>
                    </li>
                    <li>Get the <a href="http://localhost:8383/TextBook/examples/basicForm.html" target="examples" title="basicForm.html">basicForm.html</a> file from the example pack and make the following changes:
                        <ol class="sublist">
                            <li>Load the <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> library in a <code>&lt;script&gt;</code> element.</li>
                            <li>Using <a href="http://jquery.com/" title="http://jquery.com/" target="jquery.com">jQuery<span class="printonly"> [http://jquery.com/]</span></a>, add an <code>onsubmit</code> <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handler to the form, and check to make sure the user name and password <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a> are filled in, that the password is at least 8 characters long and contains letters and numbers, and that at least two interests are selected. If not, return <code>false</code> and issue an alert telling the user what went wrong.</li>
                            <li>Add a "fill in" button that auto-fills the form with <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a> of your choosing. Use jQuery for all processing.</li>
                        </ol>
                    </li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="11.1.4"></a><h3 id="sec11-1-4">11.1.4 Effects and Animations</h3><p>The jQuery library also contains methods to make various effects and animations easy. These methods can be chained after the <code>$</code> function just like the ones discussed in the previous section. </p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">Here's an example to try in <a href="http://localhost:8383/TextBook/examples/jQuerySandbox/index.html" target="examples" title="jQuerySandbox/index.html">jQuerySandbox/index.html</a>:
                <code class="first">$("#instructions").fadeOut();</code>
                The above will fade out the instruction panel, and then remove it by setting its display <a href="https://en.wikipedia.org/wiki/Property_(computer_science)" title="https://en.wikipedia.org/wiki/Property_(computer_science)" target="en.wikipedia.org">property</a> to "none". 
                <br><br>Note that to be at its most effective, the <code>fadeOut()</code> method should only be applied to elements with absolute positioning. Try the following to see what happens otherwise:
                <code class="first">$("#td.odd").fadeOut();</code>
            </p></div>
            <p>I will leave it to you to explore most of these effects on your own. You can find information on all of them in the <a href="http://api.jquery.com/" title="http://api.jquery.com/" target="api.jquery.com">jQuery API<span class="printonly"> [http://api.jquery.com/]</span></a>. Look in the "effects" section. Read the "basics", "fading" and "sliding" sections. Click on each method name for an explanation. You can also go to the <a href="http://www.w3schools.com/jquery/default.asp" title="http://www.w3schools.com/jquery/default.asp" target="www.w3schools.com">w3schools Learn jQuery</a> section for more help.</p>
            <p>Note that most of these methods have optional parameters. For example, the page for the <code>fadeOut()</code> method has the following header:
                <code class="first">.fadeOut( [duration] [, complete ] )</code>
            </p>
            <p>The square brackets mean that the <code>duration</code> and <code>complete</code> parameters are optional. If you call this function with no parameters, it will use default <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a>. You can also set the duration if you call it with one parameter, or set both duration and "complete" if you call it with two parameters. (I will explain more about the "complete" parameter in the next section).</p>
            <p>There is also a generic <code>animate()</code> method which is explained under "custom" in the "effects" section of the <a href="http://api.jquery.com/" title="http://api.jquery.com/" target="api.jquery.com">jQuery API<span class="printonly"> [http://api.jquery.com/]</span></a>. This method needs at least one parameter, specifying a set of CSS properties and values to "move towards". Any of the specified properties that  can be animated (usually numeric properties) will be animated.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try this in <a href="http://localhost:8383/TextBook/examples/jQuerySandbox/index.html" target="examples" title="jQuerySandbox/index.html">jQuerySandbox/index.html</a>:                
                <code class="first">$("#instructions").animate({left:"200px", width:"100px"})</code>
            </p></div>
            <p>The parameter on the above instruction is a little odd if youâve never seen anything like before. The curly brackets indicate that it is actually a specification of a JavaScript object - it's an object <a href="https://en.wikipedia.org/wiki/Literal_(computer_programming)" title="https://en.wikipedia.org/wiki/Literal_(computer_programming)" target="en.wikipedia.org">literal</a>, something that is unique to languages which, like JavaScript, were derived from <a href="http://en.wikipedia.org/wiki/Ecmascript" title="http://en.wikipedia.org/wiki/Ecmascript" target="en.wikipedia.org">ECMAScript</a>. The contents of the curly brackets consist of a list of <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">field</a> names (unquoted) and values (quoted). </p>
            <p>So <code>{left:"0px", width:"20%"}</code> creates a new object with the fields <code>left</code> and <code>width</code> set to contain the <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">strings</a> <code>"200px"</code> and <code>"100px"</code> respectively. Then this object is passed as a parameter to <code>animate()</code>. You will learn a lot more about creating JavaScript objects in a later chapter.</p>
            <a name="e11.1.4"></a><div class="exercises"><h5>&lt;exercises section='11.1.4'&gt;</h5>
                <ol>
                    <li>Complete the <a href="http://localhost:8383/TextBook/examples/jQuerySandbox/index.html" target="examples" title="jQuerySandbox/index.html">jQuerySandbox/index.html</a> exercises as laid out in the instructions panel.</li>
                    <li>Explore the <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> <a href="http://en.wikipedia.org/wiki/Application_programming_interface" title="http://en.wikipedia.org/wiki/Application_programming_interface" target="en.wikipedia.org">API</a> a bit more. Take a look at the "Attributes", "CSS", "Dimensions", "Effects" and "Manipulation" sections. Find and try out at least 3 more interesting <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a>.</li>
                    <li>Go back to the memo pad exercise from previous chapters and tweak it so it makes effective use of <a href="http://jquery.com/" title="http://jquery.com/" target="jquery.com">jQuery<span class="printonly"> [http://jquery.com/]</span></a>.</li>
                    <li>Go back to the exercise based on <a href="http://localhost:8383/TextBook/examples/dropdownMobileExercise.html" target="examples" title="dropdownMobileExercise.html">dropdownMobileExercise.html</a> in which you created menus that appear and disappear when buttons were clicked. Modify this to make good use of <a href="http://www.w3schools.com/jquery/jquery_selectors.asp" title="http://www.w3schools.com/jquery/jquery_selectors.asp" target="www.w3schools.com">jQuery selectors</a> and method <a href="http://en.wikipedia.org/wiki/Method_chaining" title="http://en.wikipedia.org/wiki/Method_chaining" target="en.wikipedia.org">chaining</a>.</li>
                    <li>Go back to the <a href="http://localhost:8383/TextBook/examples/catchTheRabbit.html" target="examples" title="catchTheRabbit.html">catchTheRabbit.html</a> exercise from previous chapters. Using jQuery, change your original solution so that when you mouse over the rabbit, it slides to a new, randomly-generated location on the screen. (Tip: use the <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://www.w3schools.com/jsref/obj_window.asp" title="http://www.w3schools.com/jsref/obj_window.asp" target="www.w3schools.com">window object</a> to find out the height and width of the screen.)</li>
                    <li>Take the <a href="http://localhost:8383/TextBook/examples/slidingTiles.html" target="examples" title="slidingTiles.html">slidingTiles.html</a> code from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and add JavaScript (using jQuery) to implement a sliding tiles puzzle. When the user clicks a tile (i.e. an <code>&lt;a&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>) that is beside the blank tile, it should slide smoothly into its new position using the jQuery <code>animate()</code> method. Note that this code can be very tricky to write if you have never done anything like this before.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="11.2"></a><h2 id="sec11-2-0">11.2 jQuery Events and the Truth about Functions</h2><p>Up until now, you have probably been adding <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handlers to <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> by placing <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> code into the corresponding HTML <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attributes</a>, like this:
                <code class="first"><code>&lt;input type="button" onclick="myFunction()"&gt;</code></code>
            </p></div>
            
            <p>This is not considered best practice by most JavaScript programmers for at least three reasons. </p>
            <ol>
                <li>It spreads your JavaScript code throughout the HTML file, making the code harder to maintain. (i.e. It would be much better if you could add all your event handler code in a single place.) </li>
                <li>It violates the clean separation between the structure of the interface (the job of HTML), the style of the interface (the job of CSS) and the functionality of your app (the job of JavaScript). </li>
                <li>It causes the browser to create a new <a href="http://en.wikipedia.org/wiki/Anonymous_function" title="http://en.wikipedia.org/wiki/Anonymous_function" target="en.wikipedia.org">anonymous function</a> with the code you put in the attribute as its contents. This is unnecessary and wasteful. (I'll explain what I mean by this in a moment.)</li>
            </ol>
            <p>It is widely considered best practice to add event handlers in JavaScript after the document has loaded. But to be able to do that, you need to understand how functions work in JavaScript in a little more depth. Once you have this understanding, you will also be able to use the new <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> <code>ready</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a>, as well as the <a href="http://en.wikipedia.org/wiki/Callback_(computer_programming)" title="http://en.wikipedia.org/wiki/Callback_(computer_programming)" target="en.wikipedia.org">callback</a> parameters of the <a href="http://jquery.com/" title="http://jquery.com/" target="jquery.com">jQuery<span class="printonly"> [http://jquery.com/]</span></a> effects <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a>.</p>

            <div class="sectionStart"><a name="11.2.1"></a><h3 id="sec11-2-1">11.2.1 The Truth About Functions</h3><p>The truth about JavaScript functions is that they are actually <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a>, just like <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">strings</a>, numbers,  <a href="http://en.wikipedia.org/wiki/Boolean_data_type" title="http://en.wikipedia.org/wiki/Boolean_data_type" target="en.wikipedia.org">Booleans</a>, and <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">objects</a>. Like any other value, functions can be stored in <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a>, passed as parameters to other functions, and returned from function calls.</p></div>
            
            <p>The technical term for this is that JavaScript functions are <a href="https://en.wikipedia.org/wiki/First-class_function" title="https://en.wikipedia.org/wiki/First-class_function" target="en.wikipedia.org">first-class functions</a>.</p>
            <p>When you use a function declaration like this:
                <code class="first">
                    function foo (a, b, c) {
                    <code class="new">alert(a+b+c);</code>
                    }
                </code>
            </p>
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">Methods vs.</span> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">Functions</a>. In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> and <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a> are completely different entities (how would you describe the difference?) In <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>, function names are actually variable names, and functions are data.</p></div>
            <p>What you are really doing is creating a variable named foo, and assigning a function value to it. </p>
            <p>The following shows the assignment of a function literal to a variable. It is legal JavaScript code, and is basically equivalent  to the function declaration above:
                <code class="first">
                    var foo = function(a, b, c) {
                    <code class="new">alert(a+b+c);</code>
                    };
                </code>
            </p><p>The above <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statement</a> creates a variable named <code>foo</code>, and assigns to it an anonymous function with 3 parameters. Note that since this is an assignment statement, we put a semicolon at the end of it.</p>
            <p>The main difference between the two notations is that you can only use function <a href="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" title="http://en.wikipedia.org/wiki/Declaration_(computer_programming)" target="en.wikipedia.org">declaration</a> in certain contexts, but you can use variable declaration and <a href="http://en.wikipedia.org/wiki/Function_literal" title="http://en.wikipedia.org/wiki/Function_literal" target="en.wikipedia.org">function literals</a> in any context. Because it is limited and adds nothing to the language, many programmers avoid function declaration altogether and always use the variable declaration / function <a href="https://en.wikipedia.org/wiki/Literal_(computer_programming)" title="https://en.wikipedia.org/wiki/Literal_(computer_programming)" target="en.wikipedia.org">literal</a> notation.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                No matter whether you use function declaration or variable declaration with function literals, if you refer to foo in your program, you are referring to a variable. To see this, try the following in the JavaScript console of your browser:
                <code class="first">
                    function foo () {alert("hi");} â foo is a function
                    <br>foo;							
                    <br>foo();	
                </code>
                <span class="bold">Question:</span> What is the difference between the last two lines above?
                <code class="first">
                    <br>alert(foo);					
                    <br>alert(foo());	
                </code>
                <span class="bold">Question:</span> What is the difference between the above two lines?
                <br><br>Try the lines below to see that you can switch <code>foo</code> back and forth between a function and other data types.
                <code class="first">
                    foo = 5; â foo is now a number
                    <br>alert(foo);
                    <br>
                    <br>foo = function() {alert("hi");}; â foo is a function again
                    <br>alert(foo);
                    <br>
                    <br>foo = "hi"; â foo is now a string
                    <br>alert (foo);
                </code>
            </p></div>
            <p><span class="bold">Answers:</span> In the console window, <code>foo</code> returns the value of the variable. It's a function. But <code>foo()</code> calls the function so you will see the popup. On the other hand, <code>alert(foo)</code> will display a popup whose content is the value of the variable <code>foo</code> (if it's a function, it will show you something to that effect). Finally, <code>alert(foo())</code> will first call the <code>foo</code> function, displaying a popup. Then it will create another popup to display the <a href="http://en.wikipedia.org/wiki/Return_statement" title="http://en.wikipedia.org/wiki/Return_statement" target="en.wikipedia.org">return value</a> of <code>foo</code>. Since there is nothing explicitly returned, it will return the special value <code>undefined</code>. </p>

            <div class="sectionStart"><a name="11.2.2"></a><h3 id="sec11-2-2">11.2.2 Adding Event Handlers in Plain JavaScript</h3><p>If you want to add event handlers to an element after it is created, you can do it by getting the element out of the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a>, creating a function, and assigning that function to the attribute for the event handler.</p></div>
            
            <div class="DIY" id="test6"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try the following in the javaScript console for this textbook.
                <code class="first">
                    document.getElementById("test6").onclick = function(event) { 
                    <code class="new">
                        alert("hello!"); 
                    </code>
                    };
                </code>
                Since this DIY box has an id of <code>test6</code>, you should now be able to click it and see the result.
                <br><br>P.S. Don't worry about the <code>event</code> parameter above. It will be explained at the end of this section.
            </p></div>
            <p>Or you can create the function (either through function declaration or using a function literal) first, and then assign it to the event handler.</p>
            <div class="DIY" id="test7"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try the following in the JavaScript console for this textbook.
                <code class="first">
                    var clickHandler = function (event) {  
                    <code class="new">
                        alert("goodbye! "); 
                    </code>
                    }
                    <br>document.getElementById("test7").onclick = clickHandler;
                </code>
                Now you should be able to click this box for a message.
            </p></div>
            <p>Another option that some programmers prefer is to use the <code>addEventListener</code> method which takes two parameters. The first is the event name (without the "on" -- so use "click" instead of "onclick") and the second is the handler function.</p>
            <div class="DIY" id="test8"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try this in the JavaScript console for this textbook. Note that you will have to define clickhandler first. You can get it from the last DIY box.
                <code class="first">
                    function clickHandler (event) {  
                    <code class="new">
                        alert("goodbye! "); 
                    </code>
                    }
                    <br>document.getElementById("test8")
                    <code class="new">.addEventListener("click",clickHandler);</code>
                </code>
                Of course you can also add a handler using a function literal. Try this: 
                <code class="first">
                    document.getElementById("test8")
                    <code class="new">
                        .addEventListener("click", function(event) { 
                        <code class="new">
                            alert("hello!"); 
                        </code>
                        });
                    </code>
                </code>
                Now, when you click this box you should get two popups, not one. This illustrates one crucial difference between assigning to <code>onclick</code> and using <code>addEventListener</code>. The latter allows you to add many <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handlers of the same type to the same <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>.
                <br><br>You should also notice that in the second case above, the <a href="http://en.wikipedia.org/wiki/Function_literal" title="http://en.wikipedia.org/wiki/Function_literal" target="en.wikipedia.org">function literal</a> is not assigned to any particular <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variable</a> name. This makes it an <a href="http://en.wikipedia.org/wiki/Anonymous_function" title="http://en.wikipedia.org/wiki/Anonymous_function" target="en.wikipedia.org">anonymous function</a>.
            </p></div>
            <div class="JC"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">
                Event Listeners.</span> <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a> and <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> both use <code>addListener</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> to register <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handlers. The difference is that in Java an <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event listener</a> is an <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>, while in JavaScript it's a <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a>.
            </p></div>
            <p>Note that the functions above all contain an <code>event</code> parameter. Any event handler is always passed a special event object that represents the event that fired to trigger this function. You can use it to access information about the event, such as which element was the target (<code>event.target</code>), which mouse button was pressed (<code>event.button</code>), the location of the mouse (<code>event.clientX</code> and <code>event.clientY</code>), etc. </p>
            <div class="DIY" id="test9"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Here are two last things to try in the JavaScript console for this textbook.
                <code class="first">
                    document.getElementById("test9").onclick = function(event) {
                    <code class="new">
                        alert(event.pageX+","+event.pageY);
                    </code>
                    };
                </code>
                Now when you click on this box, you will get to see the exact X and Y location of your click, in pixels from the top left corner of the page.
                <br><br>The <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> contains a number of useful <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a>, but probably the most useful is the <code>target</code> field which contains the DOM node that was the subject of the event.
                <br><br>Try this:
                <code class="first">
                    document.getElementById("test9").onclick = function(event) {
                    <code class="new">
                        alert(event.target.innerHTML);
                    </code>
                    };
                </code>
                Now clicking this box should get you the full <code>innerHTML</code>.
            </p></div>
            <p>For more information on the JavaScript Event object, go to w3schools and click on <span class="bold">HTML DOM</span>, then <span class="bold">HTML DOM Objects</span>, then <a href="http://www.w3schools.com/jsref/dom_obj_event.asp" title="http://www.w3schools.com/jsref/dom_obj_event.asp" target="www.w3schools.com">DOM Events</a>.</p>
            <a name="e11.2.2"></a><div class="exercises"><h5>&lt;exercises section='11.2.2'&gt;</h5>
                <ol>
                    <li>Load <a href="http://localhost:8383/TextBook/examples/eventHandlerTest.html" target="examples" title="eventHandlerTest.html">eventHandlerTest.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>. Compare how the handlers have been added to the <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> with <code>id</code> <code>test1</code> and <code>test2</code>. 
                        <ol class="sublist">
                            <li>Consider the page as it is loading into the browser. At what point in time is each handler added? To check your answer you will probably have to look up the <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <a href="http://www.w3schools.com/jsref/obj_window.asp" title="http://www.w3schools.com/jsref/obj_window.asp" target="www.w3schools.com">window object</a> and onload <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> on <a href="http://www.w3schools.com" title="http://www.w3schools.com" target="www.w3schools.com">w3schools</a>.</li>
                            <li>Try commenting out the <code>window.onload</code> line and the <code>};</code> line that goes with it and reload the page. Describe how the page works (or not) now and explain why.</li>
                        </ol>
                    </li>
                    <li>Add two handler <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> to the element with <code>id="message"</code> using JavaScript (not HTML <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attributes</a>). These functions should respond to the <code>onmouseover</code> and <code>onmouseout</code> events. When the mouse is inside the message box, one of the other boxes should be pink and the other should be white. When the mouse is outside the message box, the one that was white should become light blue and the one that was pink should become white.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="11.2.3"></a><h3 id="sec11-2-3">11.2.3 Event Handlers in jQuery</h3><p>The jQuery library contains its own event management system that extends the regular HTML and JavaScript system, making it more robust, useful and cross-browser compatible. In jQuery, event handlers are added to elements by chaining an event method on the jQuery selector function, like this:
                <code class="first">$( <span class="bold">selector</span> ). <span class="bold">event</span> ( <span class="bold">handler</span> );</code>
            </p></div>
            
            <p>In the above, "selector" is a normal <a href="http://www.w3schools.com/jquery/jquery_selectors.asp" title="http://www.w3schools.com/jquery/jquery_selectors.asp" target="www.w3schools.com">jQuery selector</a>, "event" is an event name (<code>load</code>, <code>click</code>, <code>mousenter</code>, etc.), and "handler" is a function.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Hereâs an example of how to add a <code>clickHandler</code> function to the all DIY boxes in this document. Try it in the JavaScript console.
                <code class="first">
                    var clickHandler = function (event) {  
                    <code class="new">
                        alert(event.pageX+","+event.pageY); 
                    </code>
                    }
                    <br> $("div.DIY").click(clickHandler);
                </code>
                The <code>event</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> above is actually a new <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> object. It works exactly like the original <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> object, but with full <a href="http://en.wikipedia.org/wiki/Cross-browser" title="http://en.wikipedia.org/wiki/Cross-browser" target="en.wikipedia.org">cross-browser compatibility</a>.
            </p></div>
            <p>The correct place to add handlers is either in the <code>load</code> event of the <code>window</code> object, or in the new jQuery <code>ready</code> event of the <code>document</code> object. Hereâs what this would look like.
                <br><br>Using the <code>load</code> event of the <code>window</code>:
                <code class="first"> 
                    $(window).load( function() {
                    <code class="new">
                        $( <span class="bold">selector</span> ). <span class="bold">event</span> ( <span class="bold">clickHandler </span>);
                        <br>// more code, function declarations, etc.
                    </code>
                    });
                </code>
                <br>Using the <code>ready</code> event on the <code>document</code>:
                <code class="first"> 
                    $(document).ready( function() {
                    <code class="new">
                        $( <span class="bold">selector</span> ). <span class="bold">event</span> ( <span class="bold">clickHandler </span>);
                        <br>// more code, function declarations, etc.
                    </code>
                    });
                </code>
            </p>
            <p>(In the above examples, you would replace "selector", "event", and "clickHandler" with appropriate values.)</p>
            <p>The difference between the above two options is that the <code>window</code> <code>onload</code> event will not fire until all resources (images, etc) of the are loaded. But the jQuery <code>ready</code> event will fire as soon as the DOM is constructed. So unless you want to access images and other external resources that may not be loaded yet, the <code>ready</code> event is the one you should use.</p>
            <p>We should also say something here about <code>$(window)</code> and <code>$(document)</code>. These calls to the jQuery function do not use a CSS-style selector. Instead they simply provide an object as a parameter. The jQuery function supports this by return a <a href="http://learn.jquery.com/using-jquery-core/jquery-object/" title="http://learn.jquery.com/using-jquery-core/jquery-object/" target="learn.jquery.com">jQuery object<span class="printonly"> [http://learn.jquery.com/using-jquery-core/jquery-object/]</span></a> with a single object in it - the one that was passed in. So if you have an object and you want to chain jQuery methods on it, you can use the jQuery function and just pass it the object.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">			
                Try the following in the JavaScript console for this textbook.
                <code class="first">
                    $(document.getElementById("test4"));
                </code>
                and
                <code class="first">
                    var x = document.getElementById("test4");
                    <br>$(x);
                </code>
                and
                <code class="first">
                    $("#test4");
                </code>
                You should get the same result in each case. We will see another very important use of this soon.
            </p></div>
            <p>Go to the jQuery <a href="http://en.wikipedia.org/wiki/Application_programming_interface" title="http://en.wikipedia.org/wiki/Application_programming_interface" target="en.wikipedia.org">API</a> events <a href="http://en.wikipedia.org/wiki/Reference_(computer_science)" title="http://en.wikipedia.org/wiki/Reference_(computer_science)" target="en.wikipedia.org">reference</a> for more information on the events supported by jQuery. The most important categories of events are keyboard, mouse, and form events, but you should take a look at the others as well. Note that jQuery provides cross-browser support for some events and event utilities you may not have seen before (e.g. Internet Explorer's <code>mouseenter</code> event).</p>
            <a name="e11.2.3"></a><div class="exercises"><h5>&lt;exercises section='11.2.3'&gt;</h5>
                <ol>
                    <li>Load the file <a href="http://localhost:8383/TextBook/examples/eventHandlerTest2.html" target="examples" title="eventHandlerTest2.html">eventHandlerTest2.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> into a browser. Take a look at how the handler has been added to the <a href="http://www.w3schools.com/html/html_tables.asp" title="http://www.w3schools.com/html/html_tables.asp" target="www.w3schools.com">table</a> cell <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a>. Change the file so that the handler is added on the load <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> of the window.</li>
                    <li>Add a <code>&lt;textarea&gt;</code> element to the HTML. Using <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a>, add a handler that responds to the <code>keyUp</code> event, checks the elementâs <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> for certain "secret words" and changes the colors of other elements on the screen in response.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="11.2.4"></a><h3 id="sec11-2-4">11.2.4 A Note on Best Practices</h3><p>It is actually considered best practice in JavaScript, whether you're using jQuery or not, to write <span class="bold">all</span> of your code inside a <code>window</code> load event or <code>document</code> ready event. Even other helper functions should be defined inside these events, like this:
                <code class="first">
                    $(document).ready(function() {
                    <code class="new">
                        ALL YOUR CODE GOES HERE
                    </code>
                    });
                </code>
                or like this:
                <code class="first">
                    $(window).load(function() {
                    <code class="new">
                        ALL YOUR CODE GOES HERE
                    </code>
                    });
                </code>
                or if you're not using jQuery, like this:
                <code class="first">
                    window.onload = function() {
                    <code class="new">
                        ALL YOUR CODE GOES HERE
                    </code>
                    });
                </code>
            </p></div>
            
            <p>When you do this, the browser will wait until the page is ready before executing your code. So you can put your code into the <code>&lt;head&gt;</code> of your document without having to worry about whether the DOM is ready at that point. This is a big advantage. Another advantage is that now all variables you use (including function names) become <a href="http://en.wikipedia.org/wiki/Local_variable" title="http://en.wikipedia.org/wiki/Local_variable" target="en.wikipedia.org">local</a> to the anonymous function you assign to the <code>ready</code> or <code>load</code> event. This is good too because it minimizes potential name conflicts with other JavaScript or jQuery code or libraries you might be using.</p>

            <div class="sectionStart"><a name="11.2.5"></a><h3 id="sec11-2-5">11.2.5 jQuery Callback Functions</h3><p>Many jQuery effects have parameters for callback functions. Now that you understand a bit more about functions, you can use these effectively as well. For example, the <code>slideDown()</code> method has parameters called <code>duration</code> (in milliseconds) and <code>complete</code>. The <code>complete</code> parameter should be a function that is to be called after the slide operation has finished. A function used in this way is often referred to as a callback function.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load up the file <a href="http://localhost:8383/TextBook/examples/callBackTest.html" target="examples" title="callBackTest.html">callBackTest.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and slide up all the <code>div</code> elements, like this:
                <code class="first">$("div").slideUp();</code>
                Now try the following in the JavaScript console to slide them down and turn them red when the slide is finished:
                <code class="first"> 
                    $("div").slideDown(1000, function() {
                    <code class="new">
                        $(this).css("backgroundColor","red");
                    </code>
                    });
                </code>
            </p></div>
            <div class="JC" style="float: right;"><img class="jcImage" src="images/coffee.png"><h4>Java Connection</h4><br><p class="break"><span class="bold">
                This (keyword).</span> In <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" title="https://en.wikipedia.org/wiki/Java_(programming_language)" target="en.wikipedia.org">Java</a>, the <code>this</code> keyword inside a <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a> always refers to the <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> that the method is linked to. The <code>this</code> keyword in <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> does the same thing.
            </p></div>
            <p>Notice the use of the <code>this</code> keyword above. In the example shown, the callback function is going to get called for every single <code>div</code> element on the page. It's job is to turn each one red. So each time the function runs, it needs to know which object it is being run against - that's what the <code>this</code> keyword is for - it's a variable that has been automatically loaded with the object the function is being applied to. As I mentioned earlier, you can use the jQuery function to wrap any DOM element inside a jQuery object. So the <code>$(this)</code> selector lets you chain jQuery methods against whichever element the function is being called against. </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                You might be thinking that we don't need the callback function. Why not just do the following in <a href="http://localhost:8383/TextBook/examples/callBackTest.html" target="examples" title="callBackTest.html">callBackTest.html</a> (reload the page before trying it):
                <code class="first">
                    $("div").slideDown(1000).css("backgroundColor","red");
                </code>
                <span class="bold">Question:</span> What went wrong here?
                <br><span class="bold">Answer:</span> The call to the <code>slideDown</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a> only starts the slide. Once the slide is started, it lets the <code>css</code> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> run. Since this happens very quickly, it loos like the <code>css</code> function goes first, followed by the <code>slideDown</code>.
            </p></div>
            <p>One more thing to notice about <a href="http://localhost:8383/TextBook/examples/callBackTest.html" target="examples" title="callBackTest.html">callBackTest.html</a> is that it is following the best practice of defining all code in a <code>$(document).ready</code> event handler.</p>
            <a name="e11.2.5"></a><div class="exercises"><h5>&lt;exercises section='11.2.5'&gt;</h5>
                <ol>
                    <li>Add to <a href="http://localhost:8383/TextBook/examples/callBackTest.html" target="examples" title="callBackTest.html">callBackTest.html</a> so that when the user mouses over <code>div2</code>, it slides downwards 100 pixels and then changes color and fades out.</li>
                    <li>Add to <a href="http://localhost:8383/TextBook/examples/callBackTest.html" target="examples" title="callBackTest.html">callBackTest.html</a> so that there is a third <code>&lt;div&gt;</code>. When it is clicked, it should start sliding around the screen randomly and not stop until it is caught. (This is a bit tricky.)</li>
                    <li><a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">JQuery</a> also contains a cool <code>toggle</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a>. This method takes two <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">functions</a> as parameters and then calls one or the other each time the toggle function is used. So you can go back to exercise 2a from 11.1.3 and use this toggle method to switch the colors back and forth on each click.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="11.3"></a><h2 id="sec11-3-0">11.3 DOM Manipulation with jQuery</h2><p>As with most things in JavaScript, <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> can make <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> manipulation a lot easier. If you go to the <a href="http://jquery.com/" title="http://jquery.com/" target="jquery.com">jQuery<span class="printonly"> [http://jquery.com/]</span></a> <a href="http://en.wikipedia.org/wiki/Application_programming_interface" title="http://en.wikipedia.org/wiki/Application_programming_interface" target="en.wikipedia.org">API</a> and look into the "Manipulation" section. There you will find a multitude of <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> like the following:</p></div>
            
            <div class="table">
                <table>
                    <tbody><tr><td><code>.html()</code></td><td>use this to change the innerHTML property of the selected elements</td></tr>
                    <tr><td><code>.append()</code></td><td>appends a DOM Node or an HTML string after the selected elements</td></tr>
                    <tr><td><code>.before()</code></td><td>inserts a sibling DOM Node or an HTML string before the selected elements</td></tr>
                    <tr><td><code>.after()</code></td><td>inserts a sibling DOM Node aor an HTML string fter the selected elements</td></tr>
                    <tr><td><code>.remove()</code></td><td>removes the selected elements from the DOM</td></tr>
                </tbody></table>
            </div>
            <p>Remember that you can use the <code>this</code> keyword to refer to each selected <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>, and then the selector <code>$(this)</code> to chain jQuery methods.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Try the following in the JavaScript console for this textbook:
                <code class="first">
                    $("div.DIY").click(function(event) { 
                    <code class="new">
                        $(this).remove(); 
                    </code>
                    });
                </code>
                Now try clicking on any DIY box and watch it get removed. Notice that no matter where within the DIY box you click, the whole box is removed.
            </p></div>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                To truly appreciate what jQuery is doing for you in this instance, try this roughly equivalent raw JavaScript code in the console for this textbook.
                <code class="first">
                    var diys = document.querySelectorAll("div.DIY");
                    <br>for (var i=0; i&lt;diys.length; i++)
                    <code class="new">
                        diys[i].onclick = function(event) { 
                        <code class="new">
                            event.target.parentNode.removeChild(event.target);
                        </code>
                        };
                    </code>
                </code>
                Now click on a sentence or a line of code within a DIY box. Notice that only part of the DIY box content disappears. 
                <br><br>In raw <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> the target is the lowest level <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">node</a> that was clicked on (i.e. the <code>&lt;p&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> within the <code>&lt;div&gt;</code>). But <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> makes sure the target you were interested in (i.e. the one that matches the selector) is the one removed.
            </p></div>
            <a name="e11.3"></a><div class="exercises"><h5>&lt;exercises section='11.3'&gt;</h5>
                <ol>
                    <li>In <a href="http://localhost:8383/TextBook/examples/morePractice.html" target="examples" title="morePractice.html">morePractice.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> you'll find HTML to define a little <a href="http://www.w3schools.com/html/html_tables.asp" title="http://www.w3schools.com/html/html_tables.asp" target="www.w3schools.com">table</a> and four buttons. Add <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a> using <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> to these buttons so they delete and add rows and columns from the table. Careful, itâs a bit trickier than it sounds!</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>


            <!-- CHAPTER 12 -->
            <div class="sectionStart pageBreak"><a name="12."></a><h1 id="sec12-0-0">12. AJAX with jQuery</h1><p><small><i>The text in this chapter mirrors the text in Chapter 10. In this chapter, you learn to use <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> with the <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> library and you also learn a little bit about how to work with <a href="https://en.wikipedia.org/wiki/Xml" title="https://en.wikipedia.org/wiki/Xml" target="en.wikipedia.org">XML</a> data. In Chapter 10, you learn to use AJAX with raw <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> and without XML. </i></small></p></div>
            
            <p>Even if you donât know what AJAX is, you have experienced its effects. When you start typing into the <a href="http://www.google.com" title="http://www.google.com" target="www.google.com">Google<span class="printonly"> [http://www.google.com]</span></a> search box, it doesnât take long before you start getting some suggestions about what to search for. When you view your list of friends on <a href="http://www.facebook.com" title="http://www.facebook.com" target="www.facebook.com">Facebook<span class="printonly"> [http://www.facebook.com]</span></a>, it starts you with a small list, and when you scroll to the bottom of that list, it loads some more for you. Both of these are examples of AJAX in action.</p>
            <p>Before AJAX, if you wanted to get some more content for the user, you had to get the browser to load and display a whole new page. With AJAX, you can launch an <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" title="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="en.wikipedia.org">HTTP</a> request from JavaScript. Then when the response data comes back from the server, you can use JavaScript code to incorporate this data into the page without reloading it.</p>

            <div class="sectionStart"><a name="12.1"></a><h2 id="sec12-1-0">12.1 The Basic Idea</h2><p>The term <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> was coined by a web developer named <a href="http://www.adaptivepath.com/ideas/ajax-new-approach-web-applications" title="http://www.adaptivepath.com/ideas/ajax-new-approach-web-applications" target="www.adaptivepath.com">Jesse James Garrett<span class="printonly"> [http://www.adaptivepath.com/ideas/ajax-new-approach-web-applications]</span></a> in 2005. At the time, AJAX was a term for a new way of thinking about and making use of a collection of already existing technologies. AJAX stands for <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">Asynchronous JavaScript and XML</a>. Letâs break this phrase down.</p></div>
            
            <p><span class="bold">JavaScript:</span> You already know what this is.</p>
            <p><span class="bold">Asynchronous:</span> You already know about this too, even if you donât realize it. <a href="https://en.wikipedia.org/wiki/Asynchronous_I/O" title="https://en.wikipedia.org/wiki/Asynchronous_I/O" target="en.wikipedia.org">Asynchronous</a> processes are processes that happen outside of the regular flow of the program. In Asynchronous programming, you make some kind of request that will take time to complete, and then continue on with other tasks. In many cases you also specify a <a href="http://en.wikipedia.org/wiki/Callback_(computer_programming)" title="http://en.wikipedia.org/wiki/Callback_(computer_programming)" target="en.wikipedia.org">callback</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> to be triggered when the asynchronous task is finished. You saw this in the last chapter where I introduced you to jQueryâs animation and effects functions like <code>slideUp</code>, <code>fadeIn</code>, and <code>animate</code>. Because these are asynchronous tasks, the user can still interact with the web page while the animation is happening. If they were not asynchronous, everything would be at a standstill until they finished.</p>
            <p><span class="bold">XML:</span> You may have encountered this before. <a href="https://en.wikipedia.org/wiki/Xml" title="https://en.wikipedia.org/wiki/Xml" target="en.wikipedia.org">XML</a> stands for eXtensible <a href="https://en.wikipedia.org/wiki/Markup_language" title="https://en.wikipedia.org/wiki/Markup_language" target="en.wikipedia.org">Markup Language</a>. Itâs a generic markup language for representing structured data. It looks a lot like HTML, but it can be used to represent any kind of data (sports scores, the weather, a shopping list, etc.). XML is one possible format for the data that comes from the server in response to an AJAX request. But you can get your data from the server in any format you want. It can be XML, HTML, <a href="http://en.wikipedia.org/wiki/JSON" title="http://en.wikipedia.org/wiki/JSON" target="en.wikipedia.org">JSON</a> (<a href="http://en.wikipedia.org/wiki/JSON" title="http://en.wikipedia.org/wiki/JSON" target="en.wikipedia.org">JavaScript Object Notation</a>) or even just plain text. No matter what kind of data youâre getting, most developers would say that if youâre getting it asynchronously by launching a request from a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> program, youâre using AJAX.</p>

            <div class="sectionStart"><a name="12.2"></a><h2 id="sec12-2-0">12.2 A New Web App Architecture</h2><p>Up until now, we have been assuming a <a href="http://en.wikipedia.org/wiki/Web_application" title="http://en.wikipedia.org/wiki/Web_application" target="en.wikipedia.org">web app</a> architecture that looks like this.</p></div>
            
            <img class="fullsize" alt="web app architecture" src="images/webapparchitecture.png" style="width: 263px;">
            <p>In this architecture, an <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" title="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="en.wikipedia.org">HTTP</a> request is launched by the user either by typing a URL, clicking a link, or submitting a form.  (HTTP Requests are also generated by the browser to automatically to load images, CSS files, <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> files and other resources. But Iâm ignoring that minor complication in the story Iâm telling here.) The request goes to the server where either a file is retrieved and becomes the HTTP Response, or a script is run and the output of the script becomes the HTTP Response. When the response arrives at the browser, it interprets the HTML and CSS in the document to display the page, and executes the JavaScript commands in the page. Then it continues to run JavaScript in response to user interactions and other <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">events</a>, refreshing the page view when something changes. It doesnât go back to the server again unless the user clicks a link, types in a URL, or submits a form.</p>
            <p>But with <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a>, the life cycle looks a bit different:</p> 
            <img class="fullsize" alt="ajax architecture" src="images/webapparchitecture_ajax.png" style="width: 263px;">
            <p>An AJAX request is an HTTP Request just like any other, and can have <a href="http://www.w3schools.com/tags/ref_httpmethods.asp" title="http://www.w3schools.com/tags/ref_httpmethods.asp" target="www.w3schools.com">GET and POST</a> parameters associated with it just like any other. At the server it is treated in exactly the same way as any other HTTP request. The only difference is where it came from: it was launched by a JavaScript <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a>. Since HTTP Requests can take time to complete they are done asynchronously and you register a <a href="http://en.wikipedia.org/wiki/Callback_(computer_programming)" title="http://en.wikipedia.org/wiki/Callback_(computer_programming)" target="en.wikipedia.org">callback</a> function to deal with the response when it comes. (What would happen if this was not <a href="https://en.wikipedia.org/wiki/Asynchronous_I/O" title="https://en.wikipedia.org/wiki/Asynchronous_I/O" target="en.wikipedia.org">asynchronous</a>?)</p>
            <p>The HTTP Response from the server is also the same as any other. The only difference is that when the response arrives at the client, it will not trigger a page reload. Instead it will be passed to the callback function you registered. </p>

            <div class="sectionStart"><a name="12.3"></a><h2 id="sec12-3-0">12.3 How jQuery Makes AJAX Easier</h2><p><a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> queries are launched using the <a href="http://en.wikipedia.org/wiki/XMLHttpRequest" title="http://en.wikipedia.org/wiki/XMLHttpRequest" target="en.wikipedia.org">XMLHttpRequest</a> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> that is built in to all modern browsers. To launch an AJAX request from scratch, you would create a new XMLHttpRequest object and build it up over several lines of code, adding headers, <a href="http://www.w3schools.com/tags/ref_httpmethods.asp" title="http://www.w3schools.com/tags/ref_httpmethods.asp" target="www.w3schools.com">GET and POST</a> parameters, registering a <a href="http://en.wikipedia.org/wiki/Callback_(computer_programming)" title="http://en.wikipedia.org/wiki/Callback_(computer_programming)" target="en.wikipedia.org">callback</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a>, etc. It is not that hard to do (for more information, go to the <a href="http://www.w3schools.com/ajax/" title="http://www.w3schools.com/ajax/" target="www.w3schools.com">w3schools Learn AJAX</a> section) but itâs messy and easy to make mistakes. As with so many other tasks in <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>, <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a> will make your life a lot easier here. </p></div>
            

            <div class="sectionStart"><a name="12.3.1"></a><h3 id="sec12-3-1">12.3.1 A Data Source</h3><p>You canât do much in AJAX without access to a data source on a server somewhere. There are many excellent sources of data on the web that are free to use in your AJAX programs. For example Yahooâs <a href="http://developer.yahoo.com/yql/" title="http://developer.yahoo.com/yql/" target="developer.yahoo.com">YQL<span class="printonly"> [http://developer.yahoo.com/yql/]</span></a> (<a href="http://developer.yahoo.com/yql/" title="http://developer.yahoo.com/yql/" target="developer.yahoo.com">Yahoo Query Language<span class="printonly"> [http://developer.yahoo.com/yql/]</span></a>) can be used to retrieve information about geographic locations, weather, music, maps, and a number of other domains. But for now, you need an easier-to-use source of information. </p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                In the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, you will find a <a href="http://localhost:8383/TextBook/examples/servers" target="examples" title="servers">servers</a> folder containing two PHP scripts: a "time server" named <a href="http://localhost:8383/TextBook/examples/servers/timeServer.php" target="examples" title="servers/timeServer.php">servers/timeServer.php</a> and a "Lorem Ipsum server" named <a href="http://localhost:8383/TextBook/examples/servers/loremIpsumServer.php" target="examples" title="servers/loremIpsumServer.php">servers/loremIpsumServer.php</a>. 
                <br><br>Load the two server files by clicking on the links above (don't try to open them on your own machine). Then read over the <a href="http://en.wikipedia.org/wiki/Application_programming_interface" title="http://en.wikipedia.org/wiki/Application_programming_interface" target="en.wikipedia.org">APIs</a> they display and try them out. You can experiment with the GET parameters by typing them into a URL. For example, if you wanted to set the <code>pstart</code> parameter to 2 and <code>plength</code> to 1, you could do it like this:
                <code class="first"><a href="http://localhost:8383/TextBook/examples/servers/loremIpsumServer.php?pstart=2&amp;plength=1" target="examples" title="servers/loremIpsumServer.php?pstart=2&amp;plength=1">servers/loremIpsumServer.php?pstart=2&amp;plength=1</a></code>
                And if you want to test POST parameters with the Lorem Ipsum server, you can use the <a href="http://localhost:8383/TextBook/examples/servers/loremIpsumPostTest.html" target="examples" title="servers/loremIpsumPostTest.html">servers/loremIpsumPostTest.html</a> file which uses a <code>&lt;form&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> with its <code>method</code> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> set to "post" to send requests to the Lorum Ipsum server.
                <br><br>If you've forgotten what all this means, you may need to review <a href="http://www.w3schools.com" title="http://www.w3schools.com" target="www.w3schools.com">w3schools</a> or a similar source to refresh your memory about <a href="http://www.w3schools.com/tags/ref_httpmethods.asp" title="http://www.w3schools.com/tags/ref_httpmethods.asp" target="www.w3schools.com">GET and POST</a> and <a href="http://www.w3schools.com/php/php_forms.asp" title="http://www.w3schools.com/php/php_forms.asp" target="www.w3schools.com">PHP Form Handling</a>.
            </p></div>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                The Lorem Ipsum and Time servers will be used as a test bed for the AJAX examples and exercises to come. But PHP files will not run outside a web server, and AJAX requests that do not come from the same web server will usually be rejected due to the Same Origin Policy. So you will need to nail down one of the two following web server options to do any further work in this chapter.           
                </p><ol>
                    <li>Install WampServer or XAmpp on your machine to turn it into a web server, or </li>
                    <li>Find some web space (e.g. mobile.sheridanc.on.ca) and upload your programs to it for testing. </li>
                </ol>
                <p>
                    If take the first option and you are using <a href="https://netbeans.org/" title="https://netbeans.org/" target="netbeans.org">NetBeans<span class="printonly"> [https://netbeans.org/]</span></a>, you should be able to use a project of type PHP and set up an option so that NetBeans automatically copies files to the WampServer or <a href="http://www.apachefriends.org/en/xampp-windows.html" title="http://www.apachefriends.org/en/xampp-windows.html" target="www.apachefriends.org">XAmpp<span class="printonly"> [http://www.apachefriends.org/en/xampp-windows.html]</span></a> server running on your machine. If you get that right, you can "run" your PHP projects from <a href="http://www.netbeans.org" title="http://www.netbeans.org" target="www.netbeans.org">NetBeans<span class="printonly"> [http://www.netbeans.org]</span></a>.
                    <br><br>Take a moment to set yourself up before moving on.
                </p>
            <p></p></div>

            <div class="sectionStart"><a name="12.3.2"></a><h3 id="sec12-3-2">12.3.2 Your First AJAX Request</h3><p>The jQuery <a href="http://en.wikipedia.org/wiki/Application_programming_interface" title="http://en.wikipedia.org/wiki/Application_programming_interface" target="en.wikipedia.org">API</a> lists a number of shortcut and helper functions to make your life easier using AJAX. We will <a href="http://en.wikipedia.org/wiki/Focus_(computing)" title="http://en.wikipedia.org/wiki/Focus_(computing)" target="en.wikipedia.org">focus</a> on just two here, both listed under the heading "shorthand <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a>" in the AJAX portion of the API. The two methods are <code>jQuery.get()</code> and <code>jQuery.post()</code>. The name <code>jQuery</code> is just another way to access the familiar <code>$</code> object, so we will use <code>$.get()</code> and <code>$.post()</code> in the examples below.</p></div>
            
            <p>As you might have guessed, these functions are for sending GET and POST requests, respectively. Other than their name, the <a href="https://en.wikipedia.org/wiki/Syntax_(logic)" title="https://en.wikipedia.org/wiki/Syntax_(logic)" target="en.wikipedia.org">syntax</a> of these two functions is identical. There are three parameters of note:</p>
            <ol>
                <li><span class="bold">URL:</span> A string parameter that encodes the base URL of the request. This can be an absolute URL or it can be relative to your current location.</li>
                <li><span class="bold">Data:</span> This is a map of your GET or POST parameters.</li>
                <li><span class="bold">CallBack:</span> This is a function that will be called when the <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" title="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="en.wikipedia.org">HTTP</a> Response arrives.</li>
            </ol>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load <a href="http://localhost:8383/TextBook/examples/ajaxTime.html" target="examples" title="ajaxTime.html">ajaxTime.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> into a desktop browser (if you are working with your own copy, remember that you need to have a PHP server running or it won't work - see the previous section). 
                <br><br>Ignore the contents of the page for now. Just open the JavaScript console and launch your first AJAX request, like this:
                <code class="first">
                    $.get(
                    <code class="new">
                        "servers/timeServer.php", 
                        <br>{
                        <code class="new">
                            timezone: "Canada/Eastern", 
                            <br>request: "time"
                        </code>
                        }, 
                        <br>function(data) {
                        <code class="new">
                            alert(data);
                        </code>
                        }
                    </code>
                    );
                </code>
                The above should pop up the current time for you in an alert box.
            </p></div>
            <p>There are three parameters in the <code>$.get()</code> method above. The first is the URL. Note that it is specified relative to whereever the browser is now. The second is a map of GET parameters (this object has a syntax exactly like the map you had to pass to the <code>animate()</code> method in the previous chapter). Together, the URL and data parameters above are equivalent to the following:
                <code class="first">â¦ /servers/timeServer.php?timeZone=Canada/Eastern&amp;request=time</code>
            </p>
            <p>The final parameter is the callback function. This function could take up to 3 parameters, but we will only be using the first (<code>data</code>), which contains the text of the response from the server.</p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Repeat the command from the last DIY box, but this time use <code>$.post()</code> instead of <code>$.get()</code>. 
                <br><br>Now try changing some of the parameters to get the day or month, or use a different time zone. 
                <br><br>Now try changing the <a href="http://en.wikipedia.org/wiki/Callback_(computer_programming)" title="http://en.wikipedia.org/wiki/Callback_(computer_programming)" target="en.wikipedia.org">callback</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> so it puts the text somewhere on the screen (maybe in the <code>innerHTML</code> of all <code>&lt;h1&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a>, or in the <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a> <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> of all <code>&lt;input&gt;</code> elements).
                <br><br>Finally, try out the form interface provided on the <a href="http://localhost:8383/TextBook/examples/ajaxTime.html" target="examples" title="ajaxTime.html">ajaxTime.html</a> page. Do you think you could write the code for this page now, given what you know about <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> and <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a>?
            </p></div>

            <div class="sectionStart"><a name="12.3.3"></a><h3 id="sec12-3-3">12.3.3 AJAX From a Web Page</h3><p>The JavaScript code below is from the <a href="http://localhost:8383/TextBook/examples/ajaxTime.html" target="examples" title="ajaxTime.html">ajaxTime.html</a> example.  Take a moment to read it over and try to understand it.
                <code class="first">
                    $(document).ready( function() {
                    <code class="new">
                        var launchAjax = function() {
                        <code class="new">
                            $.get(
                            <code class="new">
                                "servers/timeServer.php", 
                                <br>{ 
                                <code class="new">
                                    timezone: $("[name=timezone]").val(), 
                                    <br>request: $("[name=type]").val(), 
                                    <br>delay: $("[name=delay]").val(), 
                                </code>
                                },
                                <br>function(data, textStatus, jqXHR) {
                                <code class="new">
                                    $("#result").html(data);
                                </code>
                                };
                            </code>
                            )};
                        </code>
                        $("#ajaxButton").click(launchAjax);
                    </code></code>
                    }); 
                
            </p></div>
            
            <p>The first thing to note is that all the code is inside the <code>document</code> object's <code>ready</code> <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handler. This is just following the best practices that were introduced in the last chapter.</p>
            <p>The second thing to notice is that the <code>launchAjax</code> function contains a call to <code>$.get()</code> that should look very familiar from the previous section. The only difference is that one more parameter is set (<code>delay</code>) and the <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a> for each parameter are coming from the form <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a>. Also, the callback function is placing the data into the <code>innerHTML</code> of the element with an <code>id</code> of "result".</p>
            <p>The syntax <code>$("[attribute=value]")</code> is used to select all the elements with a particular <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> value. In this case itâs being used to retrieve named form elements. The programmer could just as easily give them <code>id</code> attributes and use <code>$("#id")</code>.</p>
            <p>After the definition of <code>ajaxFunction</code>, the function is added as a <code>click</code> event handler onto the element with an <code>id</code> of "ajaxButton". This could have been done in HTML, but again, it is considered best practice to do it here.</p>
            <p>Now you have two data sources (<a href="http://localhost:8383/TextBook/examples/servers/loremIpsumServer.php" target="examples" title="servers/loremIpsumServer.php">servers/loremIpsumServer.php</a> and <a href="http://localhost:8383/TextBook/examples/servers/timeServer.php" target="examples" title="servers/timeServer.php">servers/timeServer.php</a>) and a worked example (<a href="http://localhost:8383/TextBook/examples/ajaxTime.html" target="examples" title="ajaxTime.html">ajaxTime.html</a>). Itâs time to build something of your own.</p>
            <a name="e12.3.3"></a><div class="exercises"><h5>&lt;exercises section='12.3.3'&gt;</h5>
                <ol>
                    <li>Take the file <a href="http://localhost:8383/TextBook/examples/servers/loremIpsumPostTest.html" target="examples" title="servers/loremIpsumPostTest.html">servers/loremIpsumPostTest.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> and change it so that instead of launching a brand new POST request and reloading the page, it instead launches an <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> query and displays the result below the form.</li>
                    <li>In the exercises folder, look at the file <a href="http://localhost:8383/TextBook/examples/findLorem.html" target="examples" title="findLorem.html">findLorem.html</a>. You have the HTML and CSS here for a game. You just have to fill in the <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a>. This game will pull out a <a href="http://en.wikipedia.org/wiki/Random_number_generation" title="http://en.wikipedia.org/wiki/Random_number_generation" target="en.wikipedia.org">random</a> piece of Lorem Ipsum text from the server, using an AJAX query. Then it will allow the user to guess where the text came from, using more AJAX queries to check whether they were right or not. See the comments in the <a href="http://localhost:8383/TextBook/examples/findLorem.html" target="examples" title="findLorem.html">findLorem.html</a> file for detailed instructions. </li>
                    <li>In the example pack you will find <a href="http://localhost:8383/TextBook/examples/more.html" target="examples" title="more.html">more.html</a> and its associated files. Add the necessary JavaScript code so that this page allows the user to load one paragraph at a time from <a href="http://localhost:8383/TextBook/examples/servers/loremIpsumServer.php" target="examples" title="servers/loremIpsumServer.php">servers/loremIpsumServer.php</a>. When they first load, they should see the first paragraph, retrieved with AJAX. Then whenever they hit the "more" button, they should get the next paragraph in sequence.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="12.4"></a><h2 id="sec12-4-0">12.4 What To Do While You Wait</h2><p>Because networks can be slow, <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> requests can sometimes take a few seconds to complete. If things don't happen instantly, it can cause the user to start pressing buttons over and over again, or behaving in other destructive ways which could end up launching more and more AJAX requests. This is a problem you have to think about whenever you use AJAX.</p></div>
            
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Load up <a href="http://localhost:8383/TextBook/examples/ajaxTime.html" target="examples" title="ajaxTime.html">ajaxTime.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>, set the delay on the form to 15 seconds, and set the request to "time", then hit the "<a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a>!" Button. This will send a request to the <a href="http://localhost:8383/TextBook/examples/servers/timeServer.php" target="examples" title="servers/timeServer.php">servers/timeServer.php</a> page which instructs the php scripts to pause for 15 seconds before completing. So this simulates a delay over a slow network.
                <br><br>While youâre waiting for your first request, set the delay back to 0 and try some different requests (anything other than "time"). After 15 seconds, the original request will get its response and this will disrupt what you are currently doing.
            </p></div>

            <div class="sectionStart"><a name="12.4.1"></a><h3 id="sec12-4-1">12.4.1 Some Options</h3><p>The usual solution to this problem is to control the user somehow while you are waiting for the AJAX request to complete. For example, if the user clicks something to load more content, you could do the following:</p></div>
            
            <ol>
                <li>In the click handler, disable the button the user just clicked, and perhaps give them some visual indication that we are waiting for something to load.</li>
                <li>In the <a href="http://en.wikipedia.org/wiki/Callback_(computer_programming)" title="http://en.wikipedia.org/wiki/Callback_(computer_programming)" target="en.wikipedia.org">callback</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a>, re-enable the button.</li>
            </ol> 
            <p>This will ensure that only one AJAX request is dealt with at a time.</p>
            <p>Another approach might be to have a <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global variable</a> with a name like <code>waitingForAJAX</code>:</p>
            <ol>
                <li>Initialize <code>waitingForAJAX</code> to false.</li>
                <li>In the click handler, check if <code>waitingForAJAX</code> is true. If it is, give the user an error message. If not, launch the AJAX query and set <code>waitingForAJAX</code> to <code>true</code>.</li>
                <li>In the callback function, set <code>waitingForAJAX</code> back to to false.</li>
            </ol>
            <a name="e12.4.1"></a><div class="exercises"><h5>&lt;exercises section='12.4.1'&gt;</h5>
                <ol>
                    <li>Add code to the <a href="http://localhost:8383/TextBook/examples/ajaxTime.html" target="examples" title="ajaxTime.html">ajaxTime.html</a> page so that the user has to wait until the previous request has completed before a new one will be launched. You can use either of the two strategies above. Then test it by setting the <code>delay</code> parameter.</li>
                    <li>Repeat the above, but this time use the other suggested strategy for what to do while you wait.</li>
                    <li>Alter your solution to the <a href="http://localhost:8383/TextBook/examples/more.html" target="examples" title="more.html">more.html</a> exercise from the previous section. Set up the <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> requests to include a short delay and make sure you disable the user while they wait for their next paragraph.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="12.4.2"></a><h3 id="sec12-4-2">12.4.2 AJAX Error Handling</h3><p>The only problem with the above strategy is that sometimes AJAX requests do not complete (the server is down, thereâs a typo in the URL, etc.). In this case, the callback function is never called, and the user could end up waiting forever. </p></div>
            
            <p>In the AJAX section of the jQuery <a href="http://en.wikipedia.org/wiki/Application_programming_interface" title="http://en.wikipedia.org/wiki/Application_programming_interface" target="en.wikipedia.org">API</a>, thereâs a subsection on <a href="http://api.jquery.com/category/ajax/global-ajax-event-handlers" title="http://api.jquery.com/category/ajax/global-ajax-event-handlers" target="api.jquery.com">Global AJAX Event Handlers<span class="printonly"> [http://api.jquery.com/category/ajax/global-ajax-event-handlers]</span></a>. This section describes the <code>$(document).ajaxError()</code> <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">method</a>. You can use this function to register an error <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handler attached to any <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> or elements. Then if an AJAX error happens, this function will be called and you can re-enable the appropriate buttons or reset the appropriate <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variables</a>.</p>
            <a name="e12.4.2"></a><div class="exercises"><h5>&lt;exercises section='12.4.2'&gt;</h5>
                <ol>
                    <li>Add an <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> Error <a href="http://en.wikipedia.org/wiki/Event_(computing)" title="http://en.wikipedia.org/wiki/Event_(computing)" target="en.wikipedia.org">event</a> handler to <a href="http://localhost:8383/TextBook/examples/ajaxTime.html" target="examples" title="ajaxTime.html">ajaxTime.html</a> so that the page leaves its "waiting" state if there is an error. To test, you can create a <a href="http://en.wikipedia.org/wiki/HTTP_404" title="http://en.wikipedia.org/wiki/HTTP_404" target="en.wikipedia.org">404 File Not Found</a> error by temporarily renaming or moving the <a href="http://localhost:8383/TextBook/examples/servers/timeServer.php" target="examples" title="servers/timeServer.php">servers/timeServer.php</a> file.</li>
                    <li>Add an AJAX Error event handler to your solution to the <a href="http://localhost:8383/TextBook/examples/more.html" target="examples" title="more.html">more.html</a> exercise from the previous sections. Make sure the error handler works and gets the user out of the waiting state.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>

            <div class="sectionStart"><a name="12.5"></a><h2 id="sec12-5-0">12.5 Working With XML Data</h2><p>You can use <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a> requests to retrieve any type of document that is accessible through <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" title="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="en.wikipedia.org">HTTP</a> requests on the World Wide Web. These documents do not have to be in <a href="https://en.wikipedia.org/wiki/Xml" title="https://en.wikipedia.org/wiki/Xml" target="en.wikipedia.org">XML</a> format despite the "X" in the name AJAX (indeed so far we have only been using plain text files). But most of the time, information does come with structure attached, and XML is by far the most common way of representing that structure.</p></div>
            


            <div class="sectionStart"><a name="12.5.1"></a><h3 id="sec12-5-1">12.5.1 Basic XML Structure</h3><p>Here's some data from a book store, adapted from w3Schools.
                <code class="first">
                    cooking, Everyday Italian, Giada De Laurentiis, 2005, 30.00
                    <br>web, xQuery Kick Start, James McGovern, Per Bothner, Kurt Cagle, James Linn, Vaidyanathan Nagarajan, 2003, 49.99
                    <br>web, paperback, Learning XML, Erik T. Ray, 2003, 39.95
                    <br>programming, JavaScript for Sheridan Students, Sam Scott, 2013, 0.00
                </code>
            </p></div>
            
            <p>This information is a little hard to read, but if you look carefully you might notice it appears to be data for 4 different books, along with book type, title, authors, year of publication, and price. </p>
            <p>Here is the same information in XML format:
                <code class="first">
                    &lt;bookstore&gt;
                    <code class="new">
                        &lt;book category="cooking"&gt;
                        <code class="new">
                            &lt;title lang="en"&gt;Everyday Italian&lt;/title&gt;
                            <br>&lt;author&gt;Giada De Laurentiis&lt;/author&gt;
                            <br>&lt;year&gt;2005&lt;/year&gt;
                            <br>&lt;price&gt;30.00&lt;/price&gt;
                        </code>
                        &lt;/book&gt;
                        <br>&lt;book category="web"&gt;
                        <code class="new">
                            &lt;title lang="en"&gt;XQuery Kick Start&lt;/title&gt;
                            <br>&lt;author&gt;James McGovern&lt;/author&gt;
                            <br>&lt;author&gt;Per Bothner&lt;/author&gt;
                            <br>&lt;author&gt;Kurt Cagle&lt;/author&gt;
                            <br>&lt;author&gt;James Linn&lt;/author&gt;
                            <br>&lt;author&gt;Vaidyanathan Nagarajan&lt;/author&gt;
                            <br>&lt;year&gt;2003&lt;/year&gt;
                            <br>&lt;price&gt;49.99&lt;/price&gt;
                        </code>
                        &lt;/book&gt;
                        <br>&lt;book category="web" cover="paperback"&gt;
                        <code class="new">
                            &lt;title lang="en"&gt;Learning XML&lt;/title&gt;
                            <br>&lt;author&gt;Erik T. Ray&lt;/author&gt;
                            <br>&lt;year&gt;2003&lt;/year&gt;
                            <br>&lt;price&gt;39.95&lt;/price&gt;
                        </code>
                        &lt;/book&gt;
                        <br>&lt;book category="programming"&gt;
                        <code class="new">
                            &lt;title lang="en"&gt;JavaScript for Sheridan Students&lt;/title&gt;
                            <br>&lt;author&gt;Sam Scott&lt;/author&gt;
                            <br>&lt;year&gt;2013&lt;/year&gt;
                            <br>&lt;price&gt;0.00&lt;/price&gt;
                        </code>
                        &lt;/book&gt;
                    </code>
                    &lt;/bookstore&gt;
                </code>
            </p>
            <p>Notice how much easier it is to see the structure of this document. HTML-like tags are being used to provide it with structure and make it easier to work with, both for machines and for humans. When everybody uses XML, data can be more easily transported and shared between applications. </p>


            <div class="sectionStart"><a name="12.5.2"></a><h3 id="sec12-5-2">12.5.2 XML vs. HTML</h3><p>Here's a list of similarities between XML and HTML:</p></div>
            
            <ol>
                <li>XML and HTML are both <a href="https://en.wikipedia.org/wiki/Markup_language" title="https://en.wikipedia.org/wiki/Markup_language" target="en.wikipedia.org">markup languages</a> with tags that define <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">elements</a> containing data. For example, the tag <code>&lt;author&gt;J K Rowling&lt;/author&gt;</code> defines an element of type <code>&lt;author&gt;</code> with the contents "J K Rowling".</li>
                <li>XML and <a href="http://en.wikipedia.org/wiki/HTML_element" title="http://en.wikipedia.org/wiki/HTML_element" target="en.wikipedia.org">HTML tags</a> can contain <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attributes</a>. For example <code>&lt;book category="cooking"&gt;</code> is the start of an element of type <code>&lt;book&gt;</code> that contains the attribute category. Attributes are descriptive information, or metadata that provides additional descriptive information about the contents of the element. </li>
                <li>XML and HTML documents must have a single root element that contains all the other elements. In HTML, this is the <code>&lt;html&gt;</code> element. In XML it can be any element you want. What is the root element in the book store example from the last section?</li>
                <li>XML and HTML comments can be added using <code>&lt;!-- --&gt;</code>.</li>
                <li>Both XML and HTML documents are represented in browsers using a <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">Document Object Model</a> (<a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a>). More on this in a moment.</li>
            </ol>

            <p>And here's a list of differences:</p>
            <ol>
                <li>XML documents do not do anything. XML is designed only to carry structured data, not to display it. XML tags and attributes cannot be read as commands like HTML tags and attributes sometimes can be.</li>
                <li>XML has no predefined tags. You can use any set of single-word tag names you want. You can also define your own document types, but we wonât get into that here.</li>
                <li>XML tags and attributes are case sensitive. For example, <code>&lt;p&gt;</code> and <code>&lt;P&gt;</code> are the same tag in HTML, but would define two different element types in XML.</li>
                <li>XML attribute <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">values</a> must be quoted. In HTML you can sometimes get away with <code>&lt;p id=myparagraph&gt;&lt;/p&gt;</code>. In XML this would cause a <a href="http://en.wikipedia.org/wiki/Syntax_error" title="http://en.wikipedia.org/wiki/Syntax_error" target="en.wikipedia.org">syntax error</a> because there are no quotation marks around <code>myparagraph</code>.</li>
                <li>XML tags must be closed. In HTML there are many empty tags (<code>&lt;br&gt;</code>, <code>&lt;img&gt;</code>, etc.) that do not need a closing tag. In XML you must either provide a closing tag, or if the tag has no data you can use a self-closing tag like this <code>&lt;search query="AJAX"/&gt;</code>. Self-closing tags end with "/&gt;".</li>
                <li>XML tags must be properly nested. Nesting is the placing of one structure within another. In HTML, you can do this: <code>&lt;p&gt;AJAX &lt;b&gt;is&lt;/p&gt; cool&lt;/b&gt;</code>. This is ok, even though the <code>&lt;b&gt;</code> tag is partly inside and partly outside the <code>&lt;p&gt;</code> tag. In XML this would cause a <a href="https://en.wikipedia.org/wiki/Syntax_(logic)" title="https://en.wikipedia.org/wiki/Syntax_(logic)" target="en.wikipedia.org">syntax</a> error.</li>
                <li>XML syntax errors will usually (silently) crash an application. Unlike HTML, which always tries to make the best of bad syntax, XML parsers will stop if they find syntax errors.</li>
            </ol>

            <div class="sectionStart"><a name="12.5.3"></a><h3 id="sec12-5-3">12.5.3 Navigating the XML DOM</h3><p>When you go into the Chrome developer console and look at the "elements" view of the document, you are looking at the HTML Document <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">Object</a> Model (DOM). When you work with the <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> <code>document</code> object, and use it to make changes to an HTML page, you are accessing and modifying the HTML DOM. </p></div>
            
            <p>XML documents can also be represented and accessed using a DOM. The act of converting a text representation of an XML file into a DOM object is called <a href="https://en.wikipedia.org/wiki/Parsing" title="https://en.wikipedia.org/wiki/Parsing" target="en.wikipedia.org">parsing</a>. Chrome contains a special JavaScript object called <code>DOMParser</code> that does this very job. </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Open your browser's JavaScript console and type the following (or to save typing or copying and pasting, you can use the pre-baked example <a href="http://localhost:8383/TextBook/examples/note.html" target="examples" title="note.html">note.html</a> in the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a>):
                <code class="first">
                    var xmldoc = "&lt;note type='reminder'&gt;&lt;to&gt;Sam&lt;/to&gt;&lt;from&gt;Anne&lt;/from&gt; &lt;text&gt;Don't forget the groceries.&lt;/text&gt;&lt;/note&gt;";
                    <br>var parser = new DOMParser();
                    <br>var dom = parser.parseFromString(xmldoc,"text/xml");
                </code>
                The first command simply defines a <a href="http://en.wikipedia.org/wiki/String_(computer_science)" title="http://en.wikipedia.org/wiki/String_(computer_science)" target="en.wikipedia.org">string</a> <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variable</a> with <a href="https://en.wikipedia.org/wiki/Xml" title="https://en.wikipedia.org/wiki/Xml" target="en.wikipedia.org">XML</a> data in it. The second command creates a new <code>DOMParser</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a>. The third command <a href="https://en.wikipedia.org/wiki/Parsing" title="https://en.wikipedia.org/wiki/Parsing" target="en.wikipedia.org">parses</a> the variable and creates a document object. 
                <br><br>Now type <code>dom</code>, open the document object and examine the structure. Do the same for <code>document</code>. Note any similarities or differences you find.
            </p></div>

            <p>The XML DOM <a href="http://en.wikipedia.org/wiki/Tree_(data_structure)" title="http://en.wikipedia.org/wiki/Tree_(data_structure)" target="en.wikipedia.org">tree</a> is constructed just like the HTML DOM trees you learned about in Chapters 4 and 10. The simple <code>&lt;note&gt;</code> example above has the following structure:</p>
            <img class="fullsize" alt="dom example" src="images/xmldomexample3.jpg" style="width: 263px;">
            <p>Here's a terminology reminder. In the picture above, there are 13 Nodes (8 are DOM Nodes and 5 are TextNodes, including whitespace TextNodes - see Chapter 11). The <span class="bold">root node</span> is <code>&lt;note&gt;</code>. It has three <span class="bold">children</span> or <span class="bold">child nodes</span>. Each of the children share the same <span class="bold">parent</span>. The line from parent to child means that the child is contained within the parent. If there are many children, they are shown in order from left to right. Nodes that share a parent are <span class="bold">siblings</span> (this is the gender-neutral term for "brother" or "sister"). Each of the children of <code>&lt;note&gt;</code> has two siblings.</p>

            <p>A DOM object in JavaScript is a collection of <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">Node</a> objects that are all linked together in a tree structure. This is true whether the DOM is for an XML document or an HTML document, so most of what you learned about the HTML DOM in Chapters 4, 7, and 10 applies to the XML DOM as well. Instead of <code>document</code> at the root, you find a DOM object, and every piece of text also appears as a special child node called a Text Node. </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Go back to the bookstore example from a previous section and draw the <a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">DOM</a> for this example on a piece of paper.
            </p></div>
            <p>As with the HTML DOM, you can navigate the structure by moving up and down along the links with the following <a href="http://en.wikipedia.org/wiki/Field_(computer_science)" title="http://en.wikipedia.org/wiki/Field_(computer_science)" target="en.wikipedia.org">fields</a> and <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a>.</p>
            <div class="table">                
                <table>
                    <tbody><tr><td><code>childNodes</code>:</td><td>returns an array of all child nodes of the current node</td></tr>
                    <tr><td><code>firstChild</code>:</td><td>returns the first child of the current node</td></tr>
                    <tr><td><code>lastChild</code>:</td><td>returns the last child of the current node</td></tr>
                    <tr><td><code>nextSibling</code>:</td><td>returns the sibling to the right of the current node</td></tr>
                    <tr><td><code>previousSibling</code>:</td><td>returns the sibling to the left of the current node</td></tr>
                    <tr><td><code>data</code>:</td><td>if this is a text node, gets the text</td></tr>
                    <tr><td><code>getAttribute()</code>:</td><td>(new to XML Nodes) if the specified attribute exists for the current node, returns its value</td></tr>
                </tbody></table>
            </div>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Continue the <code>&lt;note&gt; example from the previous session (<a href="http://localhost:8383/TextBook/examples/note.html" target="examples" title="note.html">note.html</a>). Try the following in the browser console and note the results:
                <code class="first">
                    dom.childNodes
                    <br>dom.firstChild
                    <br>dom.lastChild
                    <br>dom.childNodes[0]
                    <br>dom.firstChild.getAttribute("type")
                </code>
                Can you explain the result in each case?
                <br><br>Now try </code><a href="http://en.wikipedia.org/wiki/Document_Object_Model" title="http://en.wikipedia.org/wiki/Document_Object_Model" target="en.wikipedia.org">dom</a>.firstChild.childNodes<code> and explain the result.
                <br><br>Now for a challenge. Find as many ways as you can to get the text of the </code>&lt;from&gt; <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>. Remember that the text is a special child <a href="http://en.wikipedia.org/wiki/Node_(computer_science)" title="http://en.wikipedia.org/wiki/Node_(computer_science)" target="en.wikipedia.org">node</a>, not an <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> or a <a href="http://en.wikipedia.org/wiki/Value_(computer_science)" title="http://en.wikipedia.org/wiki/Value_(computer_science)" target="en.wikipedia.org">value</a>.
            </p></div>
            <p>Just like with the <code>document</code> object, you can also use tag names and <code>id</code> attributes (if the XML document has them) to find particular elements inside the DOM. The methods are the same as for the HTML DOM: <code>getElementById</code>, <code>getElementsByTagNames</code>, <code>querySelector</code> and <code>querySelectorAll</code>. </p>
            <p>These methods can be used to search within any node, not just the root node. For example if you wanted the author name of the third book in the bookstore example, you could load the XML DOM into a <a href="http://en.wikipedia.org/wiki/Variable_(computer_science)" title="http://en.wikipedia.org/wiki/Variable_(computer_science)" target="en.wikipedia.org">variable</a> called <code>dom</code> and do the following:
                <code class="first">dom.getElementsByTagName("book")[2].getElementsByTagName("author")[0]</code>
            </p>
            <p>The first <code>getElementsByTagName</code> retrieves a list of all the <code>&lt;book&gt;</code> elements. The <code>[2]</code> retrieves the third node from the resulting <a href="http://en.wikipedia.org/wiki/Array" title="http://en.wikipedia.org/wiki/Array" target="en.wikipedia.org">array</a> of <code>&lt;book&gt;</code> elements. Then the next <code>getElementsByTagName</code> looks just inside that node for <code>&lt;author&gt;</code> elements, and the <code>[0]</code> retrieves the first one from the array of found nodes. </p>
            <div class="DIY"><img class="diyImage" src="images/diy.png"><h4>Do It Yourself</h4><br><p class="break">
                Using the <code>&lt;note&gt;</code> example again (<a href="http://localhost:8383/TextBook/examples/note.html" target="examples" title="note.html">note.html</a>), find two more ways to get the text of the <code>&lt;from&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a>, using one of the two convenience <a href="http://en.wikipedia.org/wiki/Method_(computer_programming)" title="http://en.wikipedia.org/wiki/Method_(computer_programming)" target="en.wikipedia.org">methods</a> above. 
            </p></div>

            <div class="sectionStart"><a name="12.5.4"></a><h3 id="sec12-5-4">12.5.4 Loading XML With AJAX</h3><p>When you use <a href="http://en.wikipedia.org/wiki/Jquery" title="http://en.wikipedia.org/wiki/Jquery" target="en.wikipedia.org">jQuery</a>, loading an XML document is almost as easy as loading plain text. You can use the same commands (<code>$.get</code> and <code>$.post</code>) with exactly the same parameters as before. The only difference is that the data parameter of the <a href="http://en.wikipedia.org/wiki/Callback_(computer_programming)" title="http://en.wikipedia.org/wiki/Callback_(computer_programming)" target="en.wikipedia.org">callback</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> will be converted by jQuery into an XML document using the <code>DOMParser</code>.</p></div>
            
            <p><span class="bold">Troubleshooting Tip</span></p>
            <p>If you are trying to put some data from an XML file (say a province name) into your output and you keep getting things that look like this:
                <code class="first">[object Text]</code>
            </p>
            <p>This means that you are trying to print out a Text node. But you donât want to print the whole node, just the data it contains. To do this you need to access the data field.</p>
            <p>For example, this wonât work:
                <code class="first">textOutput += dom.getElementsByTagName("name").firstChild</code>
            </p>
            <p>Do this instead:
                <code class="first">textOutput += dom.getElementsByTagName("name").firstChild.data</code>
            </p>
            <a name="e12.5.4"></a><div class="exercises"><h5>&lt;exercises section='12.5.4'&gt;</h5>
                <p>This stuff can be tricky! Make sure you give yourself lots of time. Perhaps even working with a partner would be a good idea.</p>
                <ol>
                    <li>Load <a href="http://localhost:8383/TextBook/examples/ajaxSandbox.html" target="examples" title="ajaxSandbox.html">ajaxSandbox.html</a> from the <a href="http://localhost:8383/TextBook/JFSS_examples.zip" title="Download Example Pack">example pack</a> into a browser, then open the JavaScript console. (Remember that the html file must be hosted on a server along with the rest of the files for the example pack.)
                        <ol class="sublist">
                            <li>Use the following command to load the data from the <a href="http://localhost:8383/TextBook/examples/XMLData/note.xml" target="examples" title="XMLData/note.xml">XMLData/note.xml</a> file:
                                <code class="first">$.get("XMLData/note.xml",function(data) {x = data;});</code>
                                Note that there are no parameters required, so we are only using the URL and the <a href="http://en.wikipedia.org/wiki/Callback_(computer_programming)" title="http://en.wikipedia.org/wiki/Callback_(computer_programming)" target="en.wikipedia.org">callback</a> <a href="http://en.wikipedia.org/wiki/Function_(computer_science)" title="http://en.wikipedia.org/wiki/Function_(computer_science)" target="en.wikipedia.org">function</a> parameters. The callback function simply stores the data parameter into a <a href="http://en.wikipedia.org/wiki/Global_variable" title="http://en.wikipedia.org/wiki/Global_variable" target="en.wikipedia.org">global variable</a> <code>x</code>. </li>
                            <li>Once you have executed this command, open the <code>x</code> <a href="http://en.wikipedia.org/wiki/Object_(computer_science)" title="http://en.wikipedia.org/wiki/Object_(computer_science)" target="en.wikipedia.org">object</a> and take a look at its structure to make sure it worked.</li>
                            <li>Write a <a href="http://en.wikipedia.org/wiki/Javascript" title="http://en.wikipedia.org/wiki/Javascript" target="en.wikipedia.org">JavaScript</a> expression that retrieves the <code>&lt;note&gt;</code> <a href="http://en.wikipedia.org/wiki/Html_element" title="http://en.wikipedia.org/wiki/Html_element" target="en.wikipedia.org">element</a> from <code>x</code>. Notice that the root of <code>x</code> actually has two children instead of one. Why is that?</li>
                            <li>Now write a JavaScript <a href="http://en.wikipedia.org/wiki/Statement_(computer_science)" title="http://en.wikipedia.org/wiki/Statement_(computer_science)" target="en.wikipedia.org">statement</a> to load <a href="http://localhost:8383/TextBook/examples/XMLData/bookstore.xml" target="examples" title="XMLData/bookstore.xml">XMLData/bookstore.xml</a> through <a href="http://en.wikipedia.org/wiki/Ajax_(programming)" title="http://en.wikipedia.org/wiki/Ajax_(programming)" target="en.wikipedia.org">AJAX</a>. In the callback function, put an alert statement that displays the author name and language <a href="http://en.wikipedia.org/wiki/HTML_attribute" title="http://en.wikipedia.org/wiki/HTML_attribute" target="en.wikipedia.org">attribute</a> for the second book in the store.</li>
                        </ol>
                    </li>
                    <li>Complete the exercise described in the header comments of the <a href="http://localhost:8383/TextBook/examples/cdcatalog.html" target="examples" title="cdcatalog.html">cdcatalog.html</a> file.</li>
                    <li>Complete the exercise described in the header comments of the <a href="http://localhost:8383/TextBook/examples/canada.html" target="examples" title="canada.html">canada.html</a> file.</li>
                    <li>Complete the exercise described in the header comments of the <a href="http://localhost:8383/TextBook/examples/loremIpsum.html" target="examples" title="loremIpsum.html">loremIpsum.html</a> file.</li>
                </ol>
            <h5>&lt;/exercises&gt;</h5></div>
            <div class="sectionStart"><a name="12.5.5"></a><h3 id="sec12-5-5">12.5.5 Learning More About XML</h3><p>XML is a big topic and there is lots more that can be said. For those who want to go further, <a href="http://www.w3schools.com" title="http://www.w3schools.com" target="www.w3schools.com">W3Schools</a> has good tutorials on all things XML. On the front page of w3schools, scroll down to XML tutorials and read through the <a href="http://www.w3schools.com/xml/default.asp" title="http://www.w3schools.com/xml/default.asp" target="www.w3schools.com">Learn XML</a> and <a href="http://www.w3schools.com/dom/default.asp" title="http://www.w3schools.com/dom/default.asp" target="www.w3schools.com">Learn XML DOM</a> tutorials in particular for more information.</p></div>
            
            <p></p>
            <p></p>
            <p></p>

        </div>
        <div id="cover" style="display: none;"> <br> <br>Preparing Document </div>
        <div id="navbar" style="opacity: 0.2; right: 10px;">
            <a class="toplink" href="Bottom" onclick="$(window).scrollTop(311434);return false;" title="Bottom">â¦</a>
            <a class="toplink" href="Top" onclick="$(window).scrollTop(0);return false;" title="Top">â§</a>
            <a class="toplink" href="Contents" onclick="$(window).scrollTop(418.053955078125);return false;" title="Contents">â¨</a></div>
        <a name="bottom" id="bottomanchor"></a>
    

</body>
</html>